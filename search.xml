<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Docker常用命令</title>
      <link href="/blog/2020/02/19/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/blog/2020/02/19/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>Docker 常用命令。<a id="more"></a></p><h3 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># 搜索Docker Hub中的镜像</span><br><span class="line">docker search java</span><br><span class="line"># 从Docker Hub下载最新的java</span><br><span class="line">docker pull java</span><br><span class="line"># Docker Registry地址/仓库/镜像名称:标签</span><br><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/wangrui15034005712/nginx</span><br><span class="line"># 列出本地所有镜像，默认过滤中间映像层</span><br><span class="line">docker images -a</span><br><span class="line"># 删除指定镜像</span><br><span class="line">docker rmi -f [镜像名称]</span><br><span class="line"># 删除全部镜像</span><br><span class="line">docker rmi -f $(docker images)</span><br><span class="line"># 构建镜像 -t 设置签名</span><br><span class="line">docker build -t nginx:wr .</span><br><span class="line"># 启动容器 -d 后台启动，并打印容器ID -p 指定映射端口</span><br><span class="line">docker run -d -p 8080:8080 nginx:wr</span><br><span class="line"># 累出运行中的容器 -a 列出所有容器（包括未运行容器）</span><br><span class="line">docker ps -a</span><br><span class="line"># 停止容器</span><br><span class="line">docker stop 容器ID</span><br><span class="line"># 强制停止容器</span><br><span class="line">docker kill 容器ID</span><br><span class="line"># 启动已停止的容器</span><br><span class="line">docker statr 容器ID</span><br><span class="line"># 重新启动容器</span><br><span class="line">docker restatr 容器ID</span><br><span class="line"># 进入容器</span><br><span class="line">docker attach 容器ID</span><br><span class="line"># 删除容器指定容器</span><br><span class="line">docker rm [容器ID]</span><br><span class="line"># 删除全部容器 -q 只展示容器ID</span><br><span class="line">docker rm -f $(docker ps -a -q)</span><br><span class="line"># 将指定容器导出tar包 --output将内容写入文件而非标准输出</span><br><span class="line">docker export 容器名称 &gt; app.tar</span><br><span class="line">docker export --output &gt; app.tar</span><br><span class="line"># 引入容器并创建nginx镜像</span><br><span class="line">docker import app.tar nginx</span><br><span class="line"># 保存镜像</span><br><span class="line">docker save 容器名称 &gt; app.tar</span><br><span class="line">docker save --output app.tar 容器名称</span><br><span class="line"># 加载镜像 --input 从文件加载而非标准输入</span><br><span class="line">docker load &lt; app.tar</span><br><span class="line">docker load --input app.tar</span><br><span class="line"># docker Hub注册后才可登录</span><br><span class="line">docker login</span><br><span class="line"># 推送镜像</span><br><span class="line">docker push wangrui/nginx:wr</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mysql基础函数及行转列</title>
      <link href="/blog/2020/02/18/Mysql%E5%9F%BA%E7%A1%80%E5%87%BD%E6%95%B0%E5%8F%8A%E8%A1%8C%E8%BD%AC%E5%88%97/"/>
      <url>/blog/2020/02/18/Mysql%E5%9F%BA%E7%A1%80%E5%87%BD%E6%95%B0%E5%8F%8A%E8%A1%8C%E8%BD%AC%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>MYSQL借用<b>mysql.help_topic</b>生成连续的日期。<br><b>mysql.help_topic</b>是一个从0开始到506的一个序列组（列转行、生成连续日期等）。<br><a id="more"></a></p><h3 id="生成连续的日期"><a href="#生成连续的日期" class="headerlink" title="生成连续的日期"></a>生成连续的日期</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  date_format(date_add(SYSDATE(),INTERVAL-t.help_topic_id DAY),&apos;%Y-%m-%d&apos;) </span><br><span class="line">FROM</span><br><span class="line">  mysql.help_topic t </span><br><span class="line">WHERE</span><br><span class="line">  t.help_topic_id &lt; 10</span><br></pre></td></tr></table></figure><p><img src="/blog/2020/02/18/Mysql基础函数及行转列/mysql.png" alt=""></p><h3 id="行转列"><a href="#行转列" class="headerlink" title="行转列"></a>行转列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">create table group_by(</span><br><span class="line">name VARCHAR(50),</span><br><span class="line">class VARCHAR(50),</span><br><span class="line">item VARCHAR(50),</span><br><span class="line">price int(10)</span><br><span class="line">)</span><br><span class="line">insert into GROUP_BY VALUES (&apos;张三&apos;,&apos;一班&apos;,&apos;3&apos;,20);</span><br><span class="line">insert into GROUP_BY VALUES (&apos;张三&apos;,&apos;二班&apos;,&apos;5&apos;,70);</span><br><span class="line">insert into GROUP_BY VALUES (&apos;张三&apos;,&apos;三班&apos;,&apos;6&apos;,54);</span><br><span class="line">insert into GROUP_BY VALUES (&apos;李四&apos;,&apos;一班&apos;,&apos;9&apos;,80);</span><br><span class="line">insert into GROUP_BY VALUES (&apos;李四&apos;,&apos;二班&apos;,&apos;2&apos;,50);</span><br><span class="line"># mysql分组小计和合计</span><br><span class="line">SELECT</span><br><span class="line">case when c.name is null then &apos;合计&apos; </span><br><span class="line">else c.name end as name,</span><br><span class="line">case when c.name is null then &apos;&apos;</span><br><span class="line">  when c.class is null then &apos;小计&apos;</span><br><span class="line">else c.class end as class,</span><br><span class="line">c.item as item,</span><br><span class="line">sum(c.price) as price</span><br><span class="line">FROM</span><br><span class="line">GROUP_BY c</span><br><span class="line">GROUP BY</span><br><span class="line">c.NAME,</span><br><span class="line">c.class WITH ROLLUP</span><br></pre></td></tr></table></figure><p><img src="/blog/2020/02/18/Mysql基础函数及行转列/mysql1.png" alt="基础数据"><br><img src="/blog/2020/02/18/Mysql基础函数及行转列/mysql2.jpg" alt="行专列实现分组小计合计"></p><h3 id="IFNULL出现乱码"><a href="#IFNULL出现乱码" class="headerlink" title="IFNULL出现乱码"></a>IFNULL出现乱码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL( cast(t2.maleTotal as CHAR), &apos;&apos; )</span><br></pre></td></tr></table></figure><h3 id="sum-case-when返回0-0"><a href="#sum-case-when返回0-0" class="headerlink" title="sum case when返回0.0"></a>sum case when返回0.0</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SUM( CASE `register_sex` WHEN &apos;1&apos; THEN &quot;1&quot; ELSE &apos;0&apos; END ) #后边的1和0不加符号</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用Dockerfile构建及推送镜像</title>
      <link href="/blog/2020/02/16/%E4%BD%BF%E7%94%A8Dockerfile%E6%9E%84%E5%BB%BA%E5%8F%8A%E6%8E%A8%E9%80%81%E9%95%9C%E5%83%8F/"/>
      <url>/blog/2020/02/16/%E4%BD%BF%E7%94%A8Dockerfile%E6%9E%84%E5%BB%BA%E5%8F%8A%E6%8E%A8%E9%80%81%E9%95%9C%E5%83%8F/</url>
      
        <content type="html"><![CDATA[<p>Dockerfile是一个文本文件，包含若干条指令，描述了构建镜像的细节。<br>1、<b>Dockerfile</b>修改<b>Nginx</b>镜像的首页。<br>2、<b>Docker部署jar包运行</b>。<a id="more"></a></p><h3 id="Dockerfile修改Nginx镜像的首页"><a href="#Dockerfile修改Nginx镜像的首页" class="headerlink" title="Dockerfile修改Nginx镜像的首页"></a>Dockerfile修改Nginx镜像的首页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@root ~]# mkdir docker</span><br><span class="line">[root@root ~]# cd docker</span><br><span class="line">[root@root ~]# vi Dockerfile# D开头必须大写</span><br><span class="line">FROM nginx</span><br><span class="line">RUN echo &apos;&lt;h1&gt;Hello Docker&lt;/h1&gt;&apos; &gt; /usr/share/nginx/html/index.html</span><br><span class="line">[root@root ~]# docker build -t nginx:wr .# mynginx表示标签 . 表示当前目录</span><br><span class="line">#上行代码如有报错 手打一次即可（编码、空格等问题）</span><br><span class="line">[root@root ~]# docker run -d -p 8888:80 nginx:wr #启动创建的镜像</span><br></pre></td></tr></table></figure><p><img src="/blog/2020/02/16/使用Dockerfile构建及推送镜像/docker.png" alt=""></p><h3 id="Docker部署Jar包运行"><a href="#Docker部署Jar包运行" class="headerlink" title="Docker部署Jar包运行"></a>Docker部署Jar包运行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@root ~]# mkdir eureka</span><br><span class="line">[root@root ~]# cd eureka</span><br><span class="line">[root@root ~]# vi Dockerfile# D开头必须大写</span><br><span class="line"></span><br><span class="line"># 基于java镜像</span><br><span class="line">FROM java:8</span><br><span class="line"></span><br><span class="line"># 作者</span><br><span class="line">MAINTAINER wr</span><br><span class="line"></span><br><span class="line"># 复制文件到容器</span><br><span class="line">ADD eureka.jar eureka.jar</span><br><span class="line"></span><br><span class="line"># 声明需要暴露的端口</span><br><span class="line">EXPOSE 8761</span><br><span class="line"></span><br><span class="line"># 配置容器启动后执行的命令</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;eureka.jar&quot;]</span><br><span class="line"></span><br><span class="line">[root@root ~]# docker build -t wr/eureka:wr . </span><br><span class="line"># -t 指定镜像的仓库名称/镜像名称：标签名称</span><br><span class="line"></span><br><span class="line">[root@root ~]# docker run -d -p 8761:8761 wr/eureka:wr </span><br><span class="line"># -d 后台启动容器，打印容器ID -p 映射端口</span><br></pre></td></tr></table></figure><p><img src="/blog/2020/02/16/使用Dockerfile构建及推送镜像/docker1.png" alt=""></p><h3 id="推送-Docker镜像到Docker-Hub官网"><a href="#推送-Docker镜像到Docker-Hub官网" class="headerlink" title="推送 Docker镜像到Docker Hub官网"></a>推送 Docker镜像到Docker Hub官网</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">在[Docker官网](https://lastsummer.top)注册、登录并创建存储库 wangrui</span><br><span class="line">登录docker账号</span><br><span class="line">[root@root ~]# docker login</span><br><span class="line">Username: wangrui</span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br><span class="line">[root@root ~]# docker images</span><br><span class="line">REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                      wr                  9f21117959fe        About an hour ago   127 MB</span><br><span class="line"># tag 打标签 wangrui 为你的 docker hub名字</span><br><span class="line">[root@root ~]# docker tag 9f21117959fe wangrui/nginx:wr</span><br><span class="line">[root@root ~]# docker push wangrui/nginx:wr</span><br></pre></td></tr></table></figure><h3 id="推送-Docker-镜像到-阿里云-官网"><a href="#推送-Docker-镜像到-阿里云-官网" class="headerlink" title="推送 Docker 镜像到 阿里云 官网"></a>推送 Docker 镜像到 阿里云 官网</h3><p>1、<a href="https://dev.aliyun.com/search.html" target="_blank" rel="noopener">注册阿里云账户</a><br>2、登陆账户<br>3、<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener">配置Docker加速器</a><br>4、<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/namespaces" target="_blank" rel="noopener">创建镜像仓库的命名空间</a><br>5、<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/repositories" target="_blank" rel="noopener">创建镜像仓库</a><br>6、操作指南(登录及推送镜像)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker login --username=wangrui registry-internal.cn-hangzhou.aliyuncs.com</span><br><span class="line">$ sudo docker tag [imagesId] registry-internal.cn-hangzhou.aliyuncs.com/wangrui/nginx:wr</span><br><span class="line">$ sudo docker push registry-internal.cn-hangzhou.aliyuncs.com/wangrui/nginx:wr</span><br></pre></td></tr></table></figure></p><p>参考博客：<a href="https://blog.csdn.net/qq_16605855/article/details/79961933" target="_blank" rel="noopener">Docker镜像上传到阿里云的步骤详解</a><br>参考博客：<a href="https://blog.csdn.net/weixin_42054155/article/details/90815393" target="_blank" rel="noopener">Docker部署jar包运行</a><br>参考博客：<a href="https://yangfannie.com/1272.html" target="_blank" rel="noopener">推送你的镜像到Docker Hub</a></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Nginx </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>分布式事务</title>
      <link href="/blog/2020/02/05/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"/>
      <url>/blog/2020/02/05/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>分布式有很多种实现方式，本文讲解可靠消息模式，通过消息队列实现。<a id="more"></a></p><h3 id="什么是分布式事务"><a href="#什么是分布式事务" class="headerlink" title="什么是分布式事务"></a>什么是分布式事务</h3><p>一个大的操作由两个或者更多的小的系统操作共同完成。而这些小的操作又分布在不同的网络主机上。这些操作，要么全部成功执行，要么全部不执行。<br>本质上就是说：分布式事务就是为了保证不同系统、不同数据库的数据一致性。</p><h3 id="消息队列实现分布式事务"><a href="#消息队列实现分布式事务" class="headerlink" title="消息队列实现分布式事务"></a>消息队列实现分布式事务</h3><p>1、把消息写入数据库的消息表（消息表：内容、状态等）<br>2、后台运行定时任务、每次执行从消息表中获取未发送的消息发送到队列，确认返回后修改已发送状态<br>3、重复消息幂等性（创建判重表，判断是否已处理过）</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>1、上游系统保证消息不丢 通过本地消息和后台定时任务程序实现<br>2、下游系统保证消息不重复处理，保证幂等性</p><h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><p>分布式失误的提交或回滚只取决于事务发起方，也就是无需回滚</p><p><img src="/blog/2020/02/05/分布式事务/分布式事务.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 分布式事务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 队列 </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客部署Nginx</title>
      <link href="/blog/2020/02/04/Hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2Nginx/"/>
      <url>/blog/2020/02/04/Hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2Nginx/</url>
      
        <content type="html"><![CDATA[<h3 id="Hexo部署方法"><a href="#Hexo部署方法" class="headerlink" title="Hexo部署方法"></a>Hexo部署方法</h3><p>部署hexo静态博客到生产环境通常有两种方法<br>1、nohup命令执行hexo s由于hexo s，是框架提供的调试方法，不是部署方式，因此在生产环境会存在性能问题不建议使用<br>2、nginx部署静态资源将本地调试好的hexo打包生成的public目录部署到nginx上。nginx性能好访问速度快<a id="more"></a></p><h3 id="Hexo配置"><a href="#Hexo配置" class="headerlink" title="Hexo配置"></a>Hexo配置</h3><h4 id="部署在根目录无需处理"><a href="#部署在根目录无需处理" class="headerlink" title="部署在根目录无需处理"></a>部署在根目录无需处理</h4><p>打包：通常在调试环境无需打包，修改后使用hexo s，即可生效，可以直接在本地查看效果。但是，以静态资源的方式部署需要打包生成静态资源，命令为：hexo generate到public文件夹中。</p><h4 id="处理二级目录"><a href="#处理二级目录" class="headerlink" title="处理二级目录"></a>处理二级目录</h4><p>当生产环境中，静态博客部署在二级目录下（如：“http://域名(ip)/blog”这种情况），需要修改hexo工程下的_config.yml配置文件，否则打包生成的css、js文件目录会缺失（默认在根目录），导致无法加载样式。<br>一般修改root和url,增加二级目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</span><br><span class="line">url: http://lastsummer.top/blog</span><br><span class="line">root: /blog</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure></p><h3 id="nginx配置-HTTPS（阿里云申请SSL证书配置即可）"><a href="#nginx配置-HTTPS（阿里云申请SSL证书配置即可）" class="headerlink" title="nginx配置+HTTPS（阿里云申请SSL证书配置即可）"></a>nginx配置+HTTPS（阿里云申请SSL证书配置即可）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1、部署在根目录无需处理，放到nginx webapp中即可</span><br><span class="line">2、部署到二级目录则在webapp中新建二级目录名称，把静态文件放入到二级目录下</span><br><span class="line"> server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  www.lastsummer.top;</span><br><span class="line">rewrite ^(.*)$ https://$host$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 443; </span><br><span class="line">    server_name lastsummer.top;</span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate  lastsummer.top.pem;</span><br><span class="line">    ssl_certificate_key lastsummer.top.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    location / &#123;</span><br><span class="line">root /usr/local/nginx/;</span><br><span class="line">index index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line">location ^~ /blog &#123;</span><br><span class="line">root /usr/local/nginx;</span><br><span class="line">&#125;</span><br><span class="line">#...缓存等</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐博客：<a href="https://www.jianshu.com/p/62acf17b1710" target="_blank" rel="noopener">nginx部署hexo的方法</a></p>]]></content>
      
      
      <categories>
          
          <category> HEXO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Nginx </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker安装和使用</title>
      <link href="/blog/2020/02/03/Docker%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/blog/2020/02/03/Docker%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Docker时dotCloud公司开源的一个基于LXC技术之上搭建的Container容器引擎，源代码托管在Github上，基于Go语言并遵从Apache2.0协议开源。<br>Docker属于Linux容器的一种封装，提供简单易用的容器使用接口。<br>Docker将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了Docker，就不用担心环境问题。<br>总体来说，Docker的接口相当简单，用户可以方便地创建和使用容器，把自己的应用放入容器。容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样。<br><b>同时 Docker 划分为 CE 和 EE。CE 即社区版（免费，支持周期三个月），EE 即企业版，强调安全，付费使用。<b><a id="more"></a></b></b></p><h3 id="CentOS安装Docker-CE"><a href="#CentOS安装Docker-CE" class="headerlink" title="CentOS安装Docker CE"></a>CentOS安装Docker CE</h3><h4 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h4><p>目前，CentOS 仅发行版本中的内核支持 Docker。<br>Docker CE 支持 64 位版本 CentOS 7，并且要求内核版本不低于 3.10。 CentOS 7 满足最低内核的要求，但由于内核版本比较低，部分功能（如 overlay2 存储层驱动）无法使用，并且部分功能可能不太稳定。<br>Docker 运行在 CentOS-6.5 或更高的版本的 CentOS 上，要求系统为64位、系统内核版本为 2.6.32-431 或者更高版本。</p><h4 id="使用-yum-安装（CentOS-7）"><a href="#使用-yum-安装（CentOS-7）" class="headerlink" title="使用 yum 安装（CentOS 7）"></a>使用 yum 安装（CentOS 7）</h4><p>通过 uname -r 命令查看你当前的内核版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@1234qwer ~]# uname -r </span><br><span class="line">3.10.0-957.21.2.el7.x86_64</span><br></pre></td></tr></table></figure></p><h4 id="更新系统-可选"><a href="#更新系统-可选" class="headerlink" title="更新系统(可选)"></a>更新系统(可选)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><h4 id="安装-Dockedr-CE"><a href="#安装-Dockedr-CE" class="headerlink" title="安装 Dockedr CE"></a>安装 Dockedr CE</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install docker-ce</span><br><span class="line"># Docker 版本</span><br><span class="line">docker version</span><br></pre></td></tr></table></figure><h4 id="启动-Docker"><a href="#启动-Docker" class="headerlink" title="启动 Docker"></a>启动 Docker</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure><h3 id="Docker-命令"><a href="#Docker-命令" class="headerlink" title="Docker 命令"></a>Docker 命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 从Docker Hub下载tomcat最新版镜像</span><br><span class="line">docker pull tomcat</span><br><span class="line"># 启动tomcat容器</span><br><span class="line">docker run -d -p 8080:16000 tomcat</span><br><span class="line"># 列出所有在运行的容器信息。</span><br><span class="line">docker ps </span><br><span class="line"># Docker 运行容器ID控制台：</span><br><span class="line">docker exec -it 容器ID /bin/bash</span><br><span class="line"># 两种退出容器的方式</span><br><span class="line">docker kill 容器ID</span><br><span class="line">docker stop 容器ID</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JWT生成TOKEN</title>
      <link href="/blog/2020/01/25/JWT%E7%94%9F%E6%88%90TOKEN/"/>
      <url>/blog/2020/01/25/JWT%E7%94%9F%E6%88%90TOKEN/</url>
      
        <content type="html"><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Jwt 是一种生成token,或者解析token 返回对象的工具，现在流行的都是前后端分离项目，用之前的shiro,或者sercurity 去做权限是会遇到无法做前端的权限，所以就采用token 这种方式，服务器返回token  给前端，前端通过token 访问资源，前端通过cookie保存。<br><a id="more"></a></p><h3 id="什么是jwt"><a href="#什么是jwt" class="headerlink" title="什么是jwt"></a>什么是jwt</h3><p>WT本质上是一个字符串，一个完整的JWT由三部分组成，头部(header), 荷载(Payload), 和签名(Signature)，中间用.隔开，如下是一个典型的JWT：eyJhbGciOiJIUzUxMiJ9.iIxMjM0NSIsInN1YiI6InhsIn0.5MSq92FV7vneEo9IrrZw9XH6g<br><b>注意：保存的信息越多，生成的token长度越长<b></b></b></p><h3 id="JWT-头部（Header）"><a href="#JWT-头部（Header）" class="headerlink" title="JWT 头部（Header）"></a>JWT 头部（Header）</h3><p>用于描述关于该JWT的最基本的信息，例如其类型以及签名所用的算法等。这也可以被表示成一个JSON对象。<br>{“typ”:”JWT”,”alg”:”HS256”}</p><h3 id="载荷（playload）"><a href="#载荷（playload）" class="headerlink" title="载荷（playload）"></a>载荷（playload）</h3><p>载荷就是存放有效信息的地方（自定义变量+标准变量）。</p><h3 id="签证（signature）"><a href="#签证（signature）" class="headerlink" title="签证（signature）"></a>签证（signature）</h3><p>jwt的第三部分是一个签证信息，这个签证信息由三部分组成：<br>这个部分需要base64加密后的header和base64加密后的payload使用.连接组成的字符串，然后通过header中声明的加密方式进行加盐secret组合加密，然后就构成了jwt的第三部分。<br>eyJhbGciOiJIUzUxMiJ9.iIxMjM0NSIsInN1YiI6InhsIn0.5MSq92FV7vneEo9IrrZw9XH6g</p><h3 id="引入依赖包"><a href="#引入依赖包" class="headerlink" title="引入依赖包"></a>引入依赖包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.6.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">``` </span><br><span class="line">### JWT工具类</span><br></pre></td></tr></table></figure><p>package com.zes.utils;</p><p>import com.zexx.springcloudcommon.exception.WebException;<br>import com.zexx.springcloudcommon.utils.StringUtil;<br>import io.jsonwebtoken.Claims;<br>import io.jsonwebtoken.Jwts;<br>import io.jsonwebtoken.SignatureAlgorithm;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.beans.factory.annotation.Value;<br>import org.springframework.data.redis.core.RedisTemplate;<br>import org.springframework.stereotype.Component;</p><p>import java.io.Serializable;<br>import java.util.Date;<br>import java.util.HashMap;<br>import java.util.Map;<br>import java.util.concurrent.TimeUnit;</p><p>/**</p><ul><li>Description: JWT生成token相关的工具类<br>*</li><li>@author wangrui</li><li><p>@date 2019/12/18<br>*/<br>@Component<br>public class JwtTokenUtil implements Serializable {</p><p> private static final long serialVersionUID = -4324967L;</p><p> //用户名称<br> private static final String CLAIM_KEY_USERNAME = “CLAIM_KEY_USERNAME”;<br> //创建时间<br> private static final String CLAIM_KEY_CREATE_TIME = “CLAIM_KEY_CREATE_TIME”;<br> //结束时间<br> private static final String CLAIM_KEY_END_TIME = “CLAIM_KEY_END_TIME”;</p><p> //注入redis<br> @Autowired<br> private RedisTemplate redisTemplate;</p><p> // JWT 密钥（服务器密钥加密解密 application.yml配置）<br> @Value(“${jwt.secret}”)<br> private String secret;</p><p> // redis存储时间 分钟 一般24小时<br> @Value(“${jwt.redisexpiration}”)<br> private Long redisExpiration;</p><p> //签发人<br> @Value(“${jwt.issuer}”)<br> private String issuer;</p><p> /**</p><ul><li>Description: 解析token，从token中获取信息<br>*</li><li><p>@param token<br>*/<br>private Claims getClaimsFromToken(String token) {<br> Claims claims;<br> try {</p><pre><code>claims = Jwts.parser()        .setSigningKey(secret)        .parseClaimsJws(token)        .getBody();</code></pre><p> } catch (Exception e) {</p><pre><code>e.printStackTrace();claims = null;</code></pre><p> }<br> return claims;<br>}</p><p>/**</p></li><li>Description:获取用户名<br>*</li><li><p>@param token<br>*/<br>public String getUserNameFromToken(String token) {<br> String userName;<br> try {</p><pre><code>final Claims claims = getClaimsFromToken(token);userName = claims.get(CLAIM_KEY_USERNAME) == null ? &quot;&quot; : claims.get(CLAIM_KEY_USERNAME).toString();</code></pre><p> } catch (Exception e) {</p><pre><code>userName = null;</code></pre><p> }<br> return userName;<br>}</p><p>/**</p></li><li>Description:获取token创建时间<br>*</li><li><p>@param token<br>*/<br>public Date getCreatedDateFromToken(String token) {<br> Date created;<br> try {</p><pre><code>final Claims claims = getClaimsFromToken(token);created = new Date((Long) claims.get(CLAIM_KEY_CREATE_TIME));</code></pre><p> } catch (Exception e) {</p><pre><code>created = null;</code></pre><p> }<br> return created;<br>}</p><p>/**</p></li><li>Description: 获取token过期时间<br>*</li><li><p>@param token<br>*/<br>public Date getExpirationDateFromToken(String token) {<br> Date expiration;<br> try {</p><pre><code>final Claims claims = getClaimsFromToken(token);expiration = claims.getExpiration();</code></pre><p> } catch (Exception e) {</p><pre><code>expiration = null;</code></pre><p> }<br> return expiration;<br>}</p><p>/**</p></li><li><p>Description:token生成过期时间<br><em>/<br>private Date generateExpirationDate() {<br> return new Date(System.currentTimeMillis() + redisExpiration </em> 60 * 1000);<br>}</p><p>/**</p></li><li>Description:token是否过期<br>*</li><li><p>@param token<br>*/<br>private Boolean isTokenExpired(String token) {<br> final Date expiration = getExpirationDateFromToken(token);<br> return expiration.before(new Date());<br>}</p><p>/**</p></li><li><p>Description: 创建token<br>*/<br>public String generateToken(String userName, String mac) {<br> Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();<br> claims.put(CLAIM_KEY_USERNAME, userName);<br> claims.put(CLAIM_KEY_CREATE_TIME, new Date());<br> claims.put(CLAIM_KEY_END_TIME, generateExpirationDate());<br> return generateToken(claims);<br>}</p><p>/**</p></li><li><p>Description:使用Rs256签名<br>*/<br>private String generateToken(Map&lt;String, Object&gt; claims) {<br> return Jwts.builder()</p><pre><code>.setClaims(claims)//自定义变量.setIssuer(issuer).setIssuedAt(new Date())//发行时间.setAudience((String) claims.get(CLAIM_KEY_USERNAME)).setExpiration(generateExpirationDate())//过期时间.signWith(SignatureAlgorithm.HS512, secret)//签名密钥.compact();</code></pre><p>}</p><p>/**</p></li><li>Description:验证token<br>*</li><li>@param token</li><li>@param userName</li><li>@param mac<br>*/<br>public boolean validateToken(String token, String userName, String mac) {<br> String tokenName = “”;<br> try {<pre><code>if (redisTemplate.hasKey(&quot;token_&quot; + userName)) {    tokenName = (String) redisTemplate.opsForValue().get(&quot;token_&quot; + userName);    if (tokenName.equals(token)) {        return true;    } else {        //自定义异常        throw new WebException(&quot;无效令牌&quot;);    }}</code></pre> } catch (WebException e) {<pre><code>throw new WebException(e.getMessage());</code></pre> }<br> return false;<br>}<br>}<br><code>`</code></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>微服务下实现日志模块</title>
      <link href="/blog/2019/12/09/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97/"/>
      <url>/blog/2019/12/09/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97/</url>
      
        <content type="html"><![CDATA[<h3 id="微服务下实现日志模块"><a href="#微服务下实现日志模块" class="headerlink" title="微服务下实现日志模块"></a>微服务下实现日志模块</h3><p>与传统单体应用不同，微服务下由于，项目模块、业务拆分成多个独立系统，数据库一般也相互独立。<br>所以对于日志的统一管理和收集，也趋于复杂，借助于springboot自动配置和spring事件发布订阅（RabbitMq）、SpringAop以及组件化思想，构建一个通用日志模块<br><a id="more"></a></p><h4 id="自定义SysLog注解"><a href="#自定义SysLog注解" class="headerlink" title="自定义SysLog注解"></a>自定义SysLog注解</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 自定义日志注解</span><br><span class="line"> * @author wangrui</span><br><span class="line"> * @date 2019-12-9</span><br><span class="line"> */</span><br><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">public @interface SysLog &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 服务(子系统)名 默认取$&#123;spring.application.name&#125;</span><br><span class="line">     */</span><br><span class="line">    String serverName() default &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 日志描述信息</span><br><span class="line">     */</span><br><span class="line">    String description() default &quot;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="通过Aop-pointCut拦截-SysLog的请求"><a href="#通过Aop-pointCut拦截-SysLog的请求" class="headerlink" title="通过Aop pointCut拦截@SysLog的请求"></a>通过Aop pointCut拦截@SysLog的请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * aop拦截</span><br><span class="line"> * @author wangrui</span><br><span class="line"> * @date 2019-06-09 17:47</span><br><span class="line"> */</span><br><span class="line">@Aspect</span><br><span class="line">public class LogAspect &#123;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">    private ThreadPoolTaskExecutor taskExecutor;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">    private AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;spring.application.name&#125;&quot;)</span><br><span class="line">    private String serverName;</span><br><span class="line"></span><br><span class="line">    @Around(value = &quot;@annotation(SysLog)&quot;)</span><br><span class="line">    public Object around(ProceedingJoinPoint point, ZgLog zgLog) throws Throwable &#123;</span><br><span class="line">        String strClassName = point.getTarget().getClass().getName();</span><br><span class="line">        String strMethodName = point.getSignature().getName();</span><br><span class="line">        SysLog logVo = SysLogUtils.getSysLog();</span><br><span class="line">        logVo.setServerName(StringUtils.isNotBlank(zgLog.serverName()) ? zgLog.serverName() : serverName);</span><br><span class="line">        logVo.setModule(zgLog.module());</span><br><span class="line">        logVo.setDescription(zgLog.description());</span><br><span class="line">        Long startTime = System.currentTimeMillis();</span><br><span class="line">        Object obj = point.proceed();</span><br><span class="line">        Long endTime = System.currentTimeMillis();</span><br><span class="line">        logVo.setTime(endTime - startTime);</span><br><span class="line">        1、实现spirng消息发布及订阅</span><br><span class="line">        2、springboot连接池异步多线程发送消息</span><br><span class="line">        taskExecutor.execute(new MyThread());</span><br><span class="line">        3、mq异步发送保存日志信息</span><br><span class="line">        amqpTemplate.convertAndSend(&quot;springcloud.exchange&quot;,&quot;log&quot;, JSONObject.toJSONString(logVo));</span><br><span class="line">        return obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SpringCloud基础</title>
      <link href="/blog/2019/11/26/SpringCloud%E5%9F%BA%E7%A1%80/"/>
      <url>/blog/2019/11/26/SpringCloud%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="SpringCloud基础"><a href="#SpringCloud基础" class="headerlink" title="SpringCloud基础"></a>SpringCloud基础</h3><a id="more"></a><h4 id="微服务的优缺点"><a href="#微服务的优缺点" class="headerlink" title="微服务的优缺点"></a>微服务的优缺点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">微服务是一种架构模式，叫微服务架构更合理，把一个系统的各个功能点都拆开为一个个的应用单独部署</span><br><span class="line">优点：</span><br><span class="line">1.每个服务直接足够内聚，代码容易理解</span><br><span class="line">2.开发效率高，一个服务只做一件事，适合小团队开发</span><br><span class="line">3.松耦合，有功能意义的服务</span><br><span class="line">4.可以用不同语言开发，面向接口编程</span><br><span class="line">5.易于第三方集成</span><br><span class="line">6.微服务只是业务逻辑的代码，不会和HTML,CSS或其他界面结合</span><br><span class="line">7.可以灵活搭配，连接公共库/连接独立库</span><br><span class="line">缺点：</span><br><span class="line">1.分布式系统的责任性</span><br><span class="line">2.多服务运维难度加大</span><br><span class="line">3.系统部署依赖，服务间通信成本，数据一致性，系统集成测试，性能监控</span><br></pre></td></tr></table></figure><h4 id="springCloud"><a href="#springCloud" class="headerlink" title="springCloud?"></a>springCloud?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Spring cloud流应用程序启动器是基于Spring Boot的Spring集成应用程序，提供与外部系统的集成</span><br><span class="line">Spring cloud Task，一个生命周期短暂的微服务框架，用于快速构建执行有限数据处理的应用程序</span><br><span class="line">相比Dubbo等RPC框架,Spring Cloud提供的全套的分布式系统解决方案</span><br></pre></td></tr></table></figure><h4 id="springCloud和Dubbo区别"><a href="#springCloud和Dubbo区别" class="headerlink" title="springCloud和Dubbo区别?"></a>springCloud和Dubbo区别?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.服务调用方式 dubbo基于RPC springcloud基于Rest Api</span><br><span class="line">2.注册中心,dubbo 是zookeeper springcloud是eureka，也可以是zookeeper</span><br><span class="line">3.服务网关,dubbo本身没有实现，只能通过其他第三方技术整合</span><br><span class="line">springcloud有Zuul路由网关，进行消费者的请求分发,springcloud支持断路器，与git完美集成配置文件支持版本控制，事物总线实现配置文件的更新与服务自动装配等等一系列的微服务架构要素</span><br></pre></td></tr></table></figure><h4 id="RPC和REST区别？"><a href="#RPC和REST区别？" class="headerlink" title="RPC和REST区别？"></a>RPC和REST区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REST是一种架构风格，REST规范把所有内容都视为资源，网络上一切皆资源</span><br><span class="line">REST并没有创造新的技术，组件或服务，只是使用Web的现有特征和能力</span><br><span class="line">完全通过HTTP协议实现，使用 HTTP 协议处理数据通信</span><br><span class="line">REST架构对资源的操作CRTUD的操作正好对应HTTP协议提供的GET、POST、PUT和DELETE方法</span><br><span class="line">RPC远程方法调用，就是像调用本地方法一样调用远程方法</span><br></pre></td></tr></table></figure><p><img src="/blog/2019/11/26/SpringCloud基础/RPC与REST.png" alt="RPC和REST区别"></p><h4 id="微服务通信方式？"><a href="#微服务通信方式？" class="headerlink" title="微服务通信方式？"></a>微服务通信方式？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.RestTemplate</span><br><span class="line">（1）restTemplate.getForObject(&quot;http://localhost:8773/hi&quot;,String.class);</span><br><span class="line">（2）loadBalancerClient</span><br><span class="line">（3）server_id服务调用</span><br><span class="line">2.远程调用，比如feign接口调用，直接通过远程过程调用来访问别的service。</span><br><span class="line">3.消息中间件rabbitmq</span><br></pre></td></tr></table></figure><h4 id="Eureka和Zookeeper区别"><a href="#Eureka和Zookeeper区别" class="headerlink" title="Eureka和Zookeeper区别?"></a>Eureka和Zookeeper区别?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.Eureka取CAP的AP，注重可用性，Zookeeper取CAP的CP注重一致性</span><br><span class="line">2.Zookeeper在选举期间注册服务瘫痪，虽然服务最终会恢复，但选举期间不可用</span><br><span class="line">3.eureka的自我保护机制，会导致一个结果就是不会再从注册列表移除因长时间没收到心跳而过期的服务。依然能接受新服务的注册和查询请求，但不会被同步到其他节点。不会服务瘫痪</span><br><span class="line">4.Zookeeper有Leader和Follower角色，Eureka各个节点平等</span><br><span class="line">5.Zookeeper采用过半数存活原则，Eureka采用自我保护机制解决分区问题</span><br><span class="line">6.eureka本质是一个工程，Zookeeper只是一个进程</span><br></pre></td></tr></table></figure><h4 id="Eureka和Zookeeper中CAP区别？"><a href="#Eureka和Zookeeper中CAP区别？" class="headerlink" title="Eureka和Zookeeper中CAP区别？"></a>Eureka和Zookeeper中CAP区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CAP理论</span><br><span class="line">1.C（Consistency）：数据一致性</span><br><span class="line">2.A（Availability）：可用性</span><br><span class="line">3.P（Partition Tolerance）：分区容错性</span><br><span class="line">当向注册中心查询服务列表时，我们可以容忍注册中心返回的是几分钟以前的注册信息，单不能接受服务直接down掉不可用,服务注册功能对可用性的要求要高于一致性</span><br><span class="line">Eureka看明白了这点，因此在设计师就有限保证可用性，Eureka各个节点都是平等的，几个节点挂掉不会影响正常节点的工作，剩余的节点依然可以提供注册和查询服务。而Eureka的客户端在向某个Eureka注册时如果发现连接失败，会自动切换至其他节点，只要有一台Eureka还在，就能保证注册服务可用（保证可用性），只不过查到的信息可能不是最新的（不保证强一致性）,Eureka还有一种自我保护机制</span><br><span class="line">Eureka基于AP原则，Eureka可以很好的应对因网络故障导致部分节点失去联系的情况，而不会像Zookeeper 那样使整个注册服务瘫痪</span><br><span class="line">Zookeeper基于CP原则，不是强一致的，并且选举时间在30-120秒在选举期间集群不可用，服务瘫痪</span><br><span class="line">作为注册中心，最主要得到就是保证可用性，可以接受短时间内数据不一致的情况</span><br><span class="line">个人觉得Eureka做i为单纯的服务注册中心来说比Zookeeper更专业一点</span><br></pre></td></tr></table></figure><h4 id="Eureka的自我保护机制？"><a href="#Eureka的自我保护机制？" class="headerlink" title="Eureka的自我保护机制？"></a>Eureka的自我保护机制？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Eureka还有一种自我保护机制，如果在15分钟内超过85%的节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障</span><br><span class="line">当Eureka Server 节点在短时间内丢失了过多实例的连接时（比如网络故障或频繁启动关闭客户端）节点会进入自我保护模式，保护注册信息，不再删除注册数据，故障恢复时，自动退出自我保护模式。</span><br><span class="line">1、Eureka不再从注册列表中溢出因为长时间没有收到心跳而应该过期的服务</span><br><span class="line">2、Eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其他节点上（即保证当前节点依然可用）</span><br><span class="line">3、当网络稳定是，当前实例新的注册信息会被同步到其他节点中</span><br><span class="line">因此，Eureka可以很好的应对网络故障导致部分节点失去联系的情况，而不会像zookeeper那样使整个注册服务瘫痪</span><br></pre></td></tr></table></figure><h4 id="Ribbon和Feign的区别？"><a href="#Ribbon和Feign的区别？" class="headerlink" title="Ribbon和Feign的区别？"></a>Ribbon和Feign的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.Ribbon都是调用其他服务的，但方式不同</span><br><span class="line">2.启动类注解不同，Ribbon是@RibbonClient feign的是@EnableFeignClients</span><br><span class="line">3.服务指定的位置不同，Ribbon是在@RibbonClient注解上声明，Feign则是在定义抽象方法的接口中使用@FeignClient声明</span><br><span class="line">4.调用方式不同，Ribbon需要自己构建http请求，模拟http请求然后使用RestTemplate发送给其他服务，步骤相当繁琐。Feign需要将调用的方法定义成抽象方法即可</span><br></pre></td></tr></table></figure><h4 id="什么是Spring-Cloud-Bus"><a href="#什么是Spring-Cloud-Bus" class="headerlink" title="什么是Spring Cloud Bus?"></a>什么是Spring Cloud Bus?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring cloud bus </span><br><span class="line">将分布式的节点用轻量的消息代理连接起来，可用于广播配置文件的更改或者服务直接的通讯和监控</span><br><span class="line">如果修改了配置文件，发送一次请求，所有的客户端便会重新读取配置文件</span><br></pre></td></tr></table></figure><h4 id="springcloud断路器作用"><a href="#springcloud断路器作用" class="headerlink" title="springcloud断路器作用?"></a>springcloud断路器作用?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">当一个服务调用另一个服务由于网络原因或自身原因出现问题，调用者就会等待被调用者的响应 当更多的服务请求到这些资源导致更多的请求等待，发生连锁效应（雪崩效应）</span><br><span class="line">打开:一段时间内 达到一定的次数无法调用 并且多次监测没有恢复的迹象 断路器完全打开 那么下次请求就不会请求到该服务</span><br><span class="line">半开:短时间内 有恢复迹象 断路器会将部分请求发给该服务，正常调用时 断路器关闭</span><br><span class="line">关闭：当服务一直处于正常状态 能正常调用</span><br></pre></td></tr></table></figure><h4 id="什么是SpringCloudConfig"><a href="#什么是SpringCloudConfig" class="headerlink" title="什么是SpringCloudConfig?"></a>什么是SpringCloudConfig?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要分布式配置中心组件</span><br><span class="line">在Spring Cloud中，有分布式配置中心组件spring cloud config ，它支持配置服务放在配置服务的内存中（即本地），也支持放在远程Git仓库中</span><br><span class="line">在spring cloud config 组件中，分两个角色，一是config server，二是config client</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux常用命令详解</title>
      <link href="/blog/2019/11/26/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
      <url>/blog/2019/11/26/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="Linux常用命令详解"><a href="#Linux常用命令详解" class="headerlink" title="Linux常用命令详解"></a>Linux常用命令详解</h3><a id="more"></a><h4 id="关机及重启"><a href="#关机及重启" class="headerlink" title="关机及重启"></a>关机及重启</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h now 立刻关机</span><br><span class="line">shutdown -h 5 5分钟后关机</span><br><span class="line">poweroff 立刻关机</span><br><span class="line"></span><br><span class="line">shutdown -r now</span><br><span class="line">shutdown -r 5 5分钟后重启</span><br><span class="line">reboot 立刻重启</span><br></pre></td></tr></table></figure><h4 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown --help：</span><br><span class="line">ifconfig  --help：查看网卡信息</span><br></pre></td></tr></table></figure><h4 id="目录操作指令"><a href="#目录操作指令" class="headerlink" title="目录操作指令"></a>目录操作指令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cd 切换目录</span><br><span class="line">ls 目录查看</span><br><span class="line">mkdir aaa 创建目录</span><br><span class="line">rm -f aaa 删除当前目录下的aaa目录（不询问）</span><br><span class="line">rm -r aaa 递归删除当前下的aaa目录</span><br><span class="line">rm -rf aaa 递归删除当前目录下的aaa目录（不询问，谨慎使用，避免全部删除）</span><br><span class="line">rm可以删除文件、目录、压缩包、</span><br><span class="line">mv 移动文件或者重命名文件或目录</span><br><span class="line">cp -r 目录名称 目录拷贝的目标位置   -r代表递归</span><br><span class="line">find 目录 参数 文件名称 搜索目录 find /usr/tmp -name &apos;a*&apos; </span><br><span class="line">touch aaa.txt 创建文件</span><br><span class="line">pwd 查看当前目录</span><br><span class="line">vim及vi编辑器命令模式底行模式及插入模式</span><br><span class="line">cat 文件的查看 看最后一屏</span><br><span class="line">more 百分比查看</span><br><span class="line">less 翻页查看</span><br><span class="line">head 显示文件头数据</span><br><span class="line">tail 指定行数或者动态查看</span><br><span class="line">echo 创建带有内容的文件</span><br></pre></td></tr></table></figure><h4 id="安装下载解压操作"><a href="#安装下载解压操作" class="headerlink" title="安装下载解压操作"></a>安装下载解压操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yum 应用市场安装</span><br><span class="line">wegt 加地址 表示下载</span><br><span class="line">tar -zvxf</span><br><span class="line">-A 新增文件到已压缩文件中</span><br><span class="line">-c 新建新压缩文件</span><br><span class="line">-r 将新文件添加到已压缩文件的末尾</span><br><span class="line">-x 解压缩文件</span><br><span class="line">-k 保留原压缩文件</span><br><span class="line">-f 待压缩或待解压缩文件</span><br><span class="line">-j bzip2格式</span><br><span class="line">-z gzip格式</span><br><span class="line">-v 显示过程</span><br></pre></td></tr></table></figure><h4 id="权限修改"><a href="#权限修改" class="headerlink" title="权限修改"></a>权限修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">chmod</span><br><span class="line">权限分为三种：读（r=4），写（w=2），执行（x=1）</span><br><span class="line">可读可执行 rx=5=4+1</span><br><span class="line">可读可写 rw=6=4+2</span><br><span class="line">可执行可写 wx=3=2+1</span><br><span class="line">可读可写可执行 rwx=7=4+1+2</span><br><span class="line">常用数字权限</span><br><span class="line">-rw------- (600) 只有拥有者有读写权限。</span><br><span class="line">-rw-r--r-- (644) 只有拥有者有读写权限；而属组用户和其他用户只有读权限。</span><br><span class="line">-rwx------ (700) 只有拥有者有读、写、执行权限。</span><br><span class="line">-rwxr-xr-x (755) 拥有者有读、写、执行权限；而属组用户和其他用户只有读、执行权限。</span><br><span class="line">-rwx--x--x (711) 拥有者有读、写、执行权限；而属组用户和其他用户只有执行权限。</span><br><span class="line">-rw-rw-rw- (666) 所有用户都有文件读、写权限。</span><br><span class="line">-rwxrwxrwx (777) 所有用户都有读、写、执行权限。</span><br><span class="line">创建sh文件后需要赋予可执行权限</span><br></pre></td></tr></table></figure><h4 id="进程命令"><a href="#进程命令" class="headerlink" title="进程命令"></a>进程命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep java 查看进程</span><br><span class="line">su 默认切换root用户</span><br><span class="line">ps -ef 查看所有正在运行的进程</span><br><span class="line">kill pid 杀死进程</span><br><span class="line">kill -9 pid 强制杀死进程</span><br><span class="line">ifconfig 查看你网卡信息</span><br><span class="line">ping 查看与某台机器的连接情况</span><br><span class="line">netstat 显示网络状态信息</span><br><span class="line">netstat -an 查看当前系统接口</span><br><span class="line">netstat -an | grep 8080 搜索指定端口8080</span><br><span class="line">clear 清屏</span><br><span class="line">usermod 修改用户</span><br><span class="line">useradd 添加用户</span><br><span class="line">userdel 删除用户</span><br><span class="line">passwd 修改密码</span><br><span class="line">groupadd 添加用户组</span><br><span class="line">groupmod 修改用户组</span><br><span class="line">groupdel 删除用户组</span><br></pre></td></tr></table></figure><h4 id="环境变量路径配置"><a href="#环境变量路径配置" class="headerlink" title="环境变量路径配置"></a>环境变量路径配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile java环境变量</span><br><span class="line">/etc/sysconfig/network-scripts/ifcfg-eno 网卡配置</span><br><span class="line">source /etc/profile 刷新环境变量</span><br><span class="line">uname -a 查看系统版本</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java代理模式</title>
      <link href="/blog/2019/11/14/Java%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/blog/2019/11/14/Java%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="Java代理模式"><a href="#Java代理模式" class="headerlink" title="Java代理模式"></a>Java代理模式</h3><a id="more"></a><p>代理模式主要为其他对象提供一种代理以控制这个对象的访问。在某些情况下，一个对象不想或者不能直接引用另一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用，好比你将一些繁琐的事情交给第三方去管理，那么第三方就是你的代理，其他人只会去找这个代理，而不会去找你，<b>AOP本身就是基于动态代理实现的</b>，所以掌握了代理模式对AOP的学习很有帮助的哦。<br><b>代理模式的三种种实现方式(静态代理、jdk动态代理、CGLib代理)</b></p><h4 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h4><p>代理类在程序运行前就已经存在,那么这种代理方式被成为静态代理(接口、实现类、代理类都存在)</p><h4 id="jdk动态代理"><a href="#jdk动态代理" class="headerlink" title="jdk动态代理"></a>jdk动态代理</h4><p>代理类在程序运行时创建的代理方式被称为 动态代理<br>如果目标对象实现了接口,采用JDK的动态代理(接口、实现类存在，代理类运行后创建)<br>如果目标对象没有实现接口,必须采用cglib动态代理(实现类，代理类运行后创建)</p><h4 id="CGLib代理"><a href="#CGLib代理" class="headerlink" title="CGLib代理"></a>CGLib代理</h4><p>目标类不能为final,目标对象的方法如果为final / static，那么就不会被拦截，即不会执行目标对象额外的业务方法</p><h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p>静态代理：<br>(1)可以做到在不修改目标对象的功能前提下,对目标功能扩展<br>(2)代理对象需要与目标对象实现一样的接口,所以会有很多代理类,类太多.同时,一旦接口增加方法,目标对象与代理对象都要维护<br>JDK动态代理:<br>(1)代理对象不需要实现接口, 利用JDK的API,动态的在内存中构建代理对象(需要我们指定创建代理对象/目标对象实现的接口的类型)<br>(2)目标对象一定要实现接口,否则不能用动态代理<br>CGLib代理:<br>(1)静态代理和动态代理模式都是要求目标对象是实现一个接口的目标对象,但是有时候目标对象只是一个单独的对象,并没有实现任何的接口,这个时候就可以使用以目标对象类实现代理</p><p>JDK动态代理使用Java的反射技术生成代理类，只能代理实现了接口的类，没有实现接口的类不能实现动态代理，CGLib会在运行时动态的生成一个被代理类的子类，子类重写了被代理类中所有非final的方法，在子类中采用方法拦截的技术拦截所有父类方法的调用，不需要被代理类对象实现接口，从而CGLIB动态代理效率比Jdk动态代理反射技术效率要高</p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java8中抽象类与接口的异同</title>
      <link href="/blog/2019/11/06/Java8%E4%B8%AD%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BC%82%E5%90%8C/"/>
      <url>/blog/2019/11/06/Java8%E4%B8%AD%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BC%82%E5%90%8C/</url>
      
        <content type="html"><![CDATA[<h3 id="Java-8中抽象类与接口的异同"><a href="#Java-8中抽象类与接口的异同" class="headerlink" title="Java 8中抽象类与接口的异同"></a>Java 8中抽象类与接口的异同</h3><a id="more"></a><h4 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)都是抽象类型；</span><br><span class="line">(2)都可以有实现方法（以前接口不行）；</span><br><span class="line">(3)都可以不需要实现类或者继承者去实现所有方法,以前不行，现在接口中默认方法不需要实现者实现</span><br></pre></td></tr></table></figure><h4 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1)抽象类不可以多重继承，接口可以（无论是多重类型继承还是多重行为继承）；</span><br><span class="line">(2)抽象类和接口所反映出的设计理念不同。</span><br><span class="line">  其实抽象类表示的是&quot;is-a&quot;关系，接口表示的是&quot;like-a&quot;关系；</span><br><span class="line">(3)接口中定义的变量默认是public static final 型，且必须给其初值，所以实现类中不能重新定义，也不能改变其值；</span><br><span class="line">  抽象类中的变量默认是 friendly 型，其值可以在子类中重新定义，也可以重新赋值。</span><br></pre></td></tr></table></figure><h4 id="接口实例"><a href="#接口实例" class="headerlink" title="接口实例"></a>接口实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public interface InterfaceClass &#123;</span><br><span class="line"></span><br><span class="line">//接口中的常量定义（必须为其赋值）</span><br><span class="line">public static final String s = &quot;1&quot;;</span><br><span class="line"></span><br><span class="line">//抽象方法的定义（没有具体的实现）</span><br><span class="line">public abstract void query();</span><br><span class="line"></span><br><span class="line">//没有构造方法</span><br><span class="line"></span><br><span class="line">//java8新增的默认方法(默认方法实现类可以实现也可以不实现，不实现也能直接调用接口的默认方法)</span><br><span class="line">default void default1() &#123;</span><br><span class="line">System.out.println(&quot;测试默认方法&quot;);</span><br><span class="line">&#125;</span><br><span class="line">    //默认方法的重载</span><br><span class="line">    default  void default1(String a) &#123;</span><br><span class="line">        System.out.println(&quot;测试默认方法111&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    //包含方法的实现的静态方法（实现类不能重写此方法）</span><br><span class="line">static String static1() &#123;</span><br><span class="line">System.out.println(&quot;这是一个静态的方法！！！&quot;);</span><br><span class="line">return &quot;这是一个静态的方法！！！&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">testInterface test = new testInterface();</span><br><span class="line">System.out.println(test.s);</span><br><span class="line">test.default1();</span><br><span class="line">test.default1(&quot;ss&quot;);</span><br><span class="line">System.out.println(InterfaceClass.s);</span><br><span class="line">System.out.print(InterfaceClass.static1());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">class testInterface implements InterfaceClass&#123;</span><br><span class="line">@Override</span><br><span class="line">public void query() &#123;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public void default1() &#123;</span><br><span class="line">System.out.println(&quot;子类自我实现默认方法&quot;);</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public void default1(String a) &#123;</span><br><span class="line">InterfaceClass.super.default1(a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="抽象实例"><a href="#抽象实例" class="headerlink" title="抽象实例"></a>抽象实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractClass &#123;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//构造代码块</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static&#123;</span><br><span class="line">//可以有静态代码块</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//抽象类中变量的定义，默认为friendly类型，默认类型，只允许包内访问</span><br><span class="line">String s = &quot;1&quot;;</span><br><span class="line"></span><br><span class="line">//可以有构造方法</span><br><span class="line">public AbstractClass() &#123;&#125;</span><br><span class="line"></span><br><span class="line">//抽象方法使用public abstract、protected abstract、abstract修饰</span><br><span class="line">public abstract void query();</span><br><span class="line">protected abstract void query1();</span><br><span class="line">abstract void query2();</span><br><span class="line"></span><br><span class="line">//包含普通方法</span><br><span class="line">public void ss() &#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">class testAbstract extends AbstractClass&#123;</span><br><span class="line">@Override</span><br><span class="line">public void query() &#123;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">protected void query1() &#123;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public void query2() &#123;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public void ss() &#123;</span><br><span class="line">super.ss();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JAVA基础面试题四</title>
      <link href="/blog/2019/10/10/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E5%9B%9B/"/>
      <url>/blog/2019/10/10/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<h3 id="本文主要JAVA基础面试题四"><a href="#本文主要JAVA基础面试题四" class="headerlink" title="本文主要JAVA基础面试题四"></a>本文主要JAVA基础面试题四</h3><a id="more"></a><h4 id="Class-forName的作用-为什么要用"><a href="#Class-forName的作用-为什么要用" class="headerlink" title="Class.forName的作用?为什么要用?"></a>Class.forName的作用?为什么要用?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(&quot;&quot;)返回的是类</span><br><span class="line">Class.forName(&quot;&quot;).newInstance()返回的是object</span><br><span class="line">A a = (A)Class.forName(&quot;pacage.A&quot;).newInstance(); </span><br><span class="line">动态加载和创建Class 对象，比如想根据用户输入的字符串来创建对象。</span><br><span class="line">jvm会执行静态代码段，你要记住一个概念，静态代码是和class绑定的，class装载成功就表示执行了你的静态代码了。而且以后不会再走这段静态代码了。</span><br><span class="line">第一是CLASSPATH下指定名字的.class文件加载到Java虚拟机内存中</span><br><span class="line">第二是初始化这个类</span><br><span class="line">一.首先你要明白在java里面任何class都要装载在虚拟机上才能运行。</span><br><span class="line"> 1.forName这句话就是装载类用的(new是根据加载到内存中的类创建一个实例，要分清楚)。 </span><br><span class="line"> 2.至于什么时候用，可以考虑一下这个问题，给你一个字符串变量，它代表一个类的包名和类名，你怎么实例化它？</span><br><span class="line"> A a = (A)Class.forName(&quot;pacage.A&quot;).newInstance();这和 A a =new A();是一样的效果。</span><br><span class="line"> 3.jvm在装载类时会执行类的静态代码段，要记住静态代码是和class绑定的，class装载成功就表示执行了你的静态代码了，而且以后不会再执行这段静态代码了。</span><br><span class="line"> 4.Class.forName(xxx.xx.xx)的作用是要求JVM查找并加载指定的类，也就是说JVM会执行该类的静态代码段。</span><br><span class="line"> 5. 动态加载和创建Class 对象，比如想根据用户输入的字符串来创建对象</span><br><span class="line">二.在初始化一个类，生成一个实例的时候，newInstance()方法和new关键字除了一个是方法，一个是关键字外，最主要有什么区别？</span><br><span class="line"> 1.它们的区别在于创建对象的方式不一样，前者是使用类加载机制，后者是创建一个新类。</span><br><span class="line"> 2.那么为什么会有两种创建对象方式？</span><br><span class="line"> 这主要考虑到软件的可伸缩、可扩展和可重用等软件设计思想。 </span><br><span class="line"> 3.从JVM的角度看，我们使用关键字new创建一个类的时候，这个类可以没有被加载。 但是使用newInstance()方法的时候，必须保证这个类已经加载且这个类已经连接了。</span><br><span class="line">三.最后用最简单的描述来区分new关键字和newInstance()方法的区别： </span><br><span class="line"> 1. newInstance: 弱类型。低效率。只能调用无参构造。 </span><br><span class="line"> 2. new: 强类型。相对高效。能调用任何public构造。</span><br></pre></td></tr></table></figure><h4 id="Servlet介绍？-单例多线程"><a href="#Servlet介绍？-单例多线程" class="headerlink" title="Servlet介绍？(单例多线程)"></a>Servlet介绍？(单例多线程)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">servlet的生命周期由servlet容器控制，该容器创建servlet的实例。servlet的生命周期就是指servlet实例在创建之后响应客户端请求直至销毁的全过程。</span><br><span class="line">servlet实例的首次创建取决于servlet的首次调用。servlet接口定义了servlet生命周期的三个方法，这些方法就是init(),service(),destroy().</span><br><span class="line">（1）init()方法用来把servlet导入和初始化。这个方法在servlet被预加载或在第一次请求时执行。</span><br><span class="line">（2）servlet处理0个或多个请求。servlet对每个方法都用service()方法来处理。</span><br><span class="line">（3）当web应用声明servlet被关闭、servlet被销毁、垃圾收集器对资源进行收集时，用destroy()方法来关闭servlet。    </span><br><span class="line">高并发、不安全</span><br><span class="line">只存在一个servlet、多个线程同时请求实例变量、非线程安全</span><br><span class="line">如何做到线程安全？</span><br><span class="line">1.实现SingleThreadModel接口</span><br><span class="line">2.synchronized关键字加锁lock</span><br><span class="line">3.尽量不使用实例变量</span><br></pre></td></tr></table></figure><h4 id="Volatile关键字"><a href="#Volatile关键字" class="headerlink" title="Volatile关键字"></a>Volatile关键字</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Java语言中关键字 volatile 被称作轻量级的 synchronized</span><br><span class="line">用volatile修饰的变量，线程在每次使用变量的时候，都会读取变量修改后的最新的值。</span><br><span class="line">volatile很容易被误用，用来进行原子性操作，它不能保证多个线程修改的安全性。</span><br><span class="line">Java可以使用volatile关键字，确保每个线程对本地变量的访问和修改都直接与主内存交互，而不是与本地线程的工作内存交互的，保证每个线程都能获得最新的值。</span><br></pre></td></tr></table></figure><p><img src="/blog/2019/10/10/JAVA基础面试题四/java1.png" alt=""></p><h4 id="和equals的区别？"><a href="#和equals的区别？" class="headerlink" title="==和equals的区别？"></a>==和equals的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1)对于==，比较的是值是否相等</span><br><span class="line"> 如果作用于基本数据类型的变量，则直接比较其存储的 “值”是否相等；</span><br><span class="line"> 如果作用于引用类型的变量，则比较的是所指向的对象的地址</span><br><span class="line">(2)对于equals方法，注意：equals方法不能作用于基本数据类型的变量，equals继承Object类，比较的是是否是同一个对象</span><br><span class="line"> 如果没有对equals方法进行重写，则比较的是引用类型的变量所指向的对象的地址；</span><br><span class="line"> 诸如String、Date等类对equals方法进行了重写的话，比较的是所指向的对象的内容。</span><br></pre></td></tr></table></figure><h4 id="数组有没有length-方法？string没有lenght-方法？"><a href="#数组有没有length-方法？string没有lenght-方法？" class="headerlink" title="数组有没有length()方法？string没有lenght()方法？"></a>数组有没有length()方法？string没有lenght()方法？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数据没有length()，但有length属性</span><br><span class="line">string有length()方法</span><br></pre></td></tr></table></figure><h4 id="服务代理后获取真实ip地址"><a href="#服务代理后获取真实ip地址" class="headerlink" title="服务代理后获取真实ip地址"></a>服务代理后获取真实ip地址</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java获取客户端IP地址的方法为request.getRemoteAddr()。</span><br><span class="line">request.getHeader(&quot;x-forwarded-for&quot;)</span><br><span class="line">request.getHeader(&quot;Proxy-Client-IP&quot;)</span><br><span class="line">request.getHeader(&quot;WL-Proxy-Client-IP&quot;);</span><br></pre></td></tr></table></figure><h4 id="Oracle和Mysql的区别"><a href="#Oracle和Mysql的区别" class="headerlink" title="Oracle和Mysql的区别"></a>Oracle和Mysql的区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、关系型数据库</span><br><span class="line">2、Oracle收费、Mysql开源</span><br><span class="line">3、Oracle一个实例对应多个用户</span><br><span class="line">  Mysql一个用户对应多个数据库</span><br><span class="line">4、与Oracle相比，MySQL没有表空间，角色管理，快照，同义词和包以及自动存储管理。</span><br></pre></td></tr></table></figure><h4 id="Vue和JQuery区别"><a href="#Vue和JQuery区别" class="headerlink" title="Vue和JQuery区别"></a>Vue和JQuery区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、Vue比JQuery减少了 DOM 操作</span><br><span class="line">2、Vue支持双向数据绑定及组件化</span><br><span class="line">3、jquery 是javacript库，封装了一些js常用的方法。（动态效果）</span><br><span class="line">  vue 是一个前端框架，vue有成熟的生态链，mvvm模式，是一个真正的web框架（单页面开发）。</span><br></pre></td></tr></table></figure><h4 id="JWT和Token区别"><a href="#JWT和Token区别" class="headerlink" title="JWT和Token区别"></a>JWT和Token区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">token一个字符串。每次客户端保存localstore，每次请求放入到http head请求头中进行访问（Bearer），服务器查询数据库验证信息是否正确</span><br><span class="line">相同： </span><br><span class="line">都是访问资源的令牌， 都可以记录用户信息，都是只有验证成功后</span><br><span class="line">区别：</span><br><span class="line">​服务端验证客户端发来的token信息要进行数据的查询操作；</span><br><span class="line">JWT验证客户端发来的token信息就不用， 在服务端使用密钥校验就可以，不用数据库的查询。</span><br><span class="line">JWT（请求头【类型jwt+hs256算法加密】、载荷【预定义声明+自定义声明userid+签名】、签名）</span><br><span class="line">base64请求头+base64载荷+签名【(base64请求头+base64载荷)hash算法】组成两个点的字符串（secret解密）</span><br></pre></td></tr></table></figure><h4 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启动jar包</span><br><span class="line">nginx日志切割</span><br></pre></td></tr></table></figure><h4 id="Git冲突处理方案"><a href="#Git冲突处理方案" class="headerlink" title="Git冲突处理方案"></a>Git冲突处理方案</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当Git merge无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</span><br><span class="line">把修改的文件复制出来、先pull在修改。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Web相关优化</title>
      <link href="/blog/2019/10/09/Web%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/"/>
      <url>/blog/2019/10/09/Web%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="Web相关优化"><a href="#Web相关优化" class="headerlink" title="Web相关优化"></a>Web相关优化</h3><a id="more"></a><h4 id="表现层页面的优化"><a href="#表现层页面的优化" class="headerlink" title="表现层页面的优化"></a>表现层页面的优化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">尽量使用静态HTML页面</span><br><span class="line">不使用FLASH、图片</span><br><span class="line">尽量使用DIV、不将整个页面放入TABLE中</span><br><span class="line">将javascript放入到js文件中</span><br><span class="line">使用IFrame嵌套另一个页面，和主页面分开加载，不影响页面加载速度</span><br><span class="line">CSS放在头部、JS脚本放在底部加载</span><br><span class="line">对于访问量高的页面，设计缓存方案，经常访问的数据缓存起来</span><br><span class="line">优化重要的公共模块、高度集成提示信息</span><br></pre></td></tr></table></figure><h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis分布式缓存</span><br><span class="line">ehcache、oscache缓存</span><br><span class="line">hibernate二级缓存</span><br><span class="line">前端静态js、css、样式文件缓存</span><br></pre></td></tr></table></figure><h4 id="数据库的优化"><a href="#数据库的优化" class="headerlink" title="数据库的优化"></a>数据库的优化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数据库的优化(读写分离、分区、分表、缓存、索引、视图、存储过程等)</span><br><span class="line">sql优化</span><br></pre></td></tr></table></figure><h4 id="服务器的优化"><a href="#服务器的优化" class="headerlink" title="服务器的优化"></a>服务器的优化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">外部环境优化：</span><br><span class="line">（1）java虚拟机的优化、尽量采用最新的版本、设置java虚拟机的内存参数</span><br><span class="line">服务器自身的优化：</span><br><span class="line">（1）Tomcat 例如：设置线程数量、JSP编译速度、防止恶意攻击、压缩</span><br><span class="line"> 1、优化Tomcat的JVM环境内存优化</span><br><span class="line">2、优化tomcat线程池</span><br><span class="line">3、禁用DNS查询 enableLookups=&quot;false&quot;</span><br><span class="line">4、session过期时间</span><br><span class="line">5、Apr插件提高Tomcat性能</span><br><span class="line">6、压缩</span><br><span class="line">7、文字转码UTF-8</span><br><span class="line">（2）Nginx </span><br><span class="line">1、expires缓存模块、网页缓存</span><br><span class="line">2、gzip压缩模块</span><br><span class="line">3、隐藏版本号</span><br><span class="line">4、日志切割</span><br><span class="line">5、设置连接超时、进程数、配置防盗链</span><br><span class="line">6、动静分离</span><br><span class="line">7、代理http跳转https这块配置  </span><br><span class="line">8、nginx添加用户组</span><br><span class="line">9、最多可以打开文件数</span><br></pre></td></tr></table></figure><h4 id="硬件优化"><a href="#硬件优化" class="headerlink" title="硬件优化"></a>硬件优化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">负载均衡：</span><br><span class="line">是大型网站解决高负荷访问和大量并发请求采用的最终解决办法</span><br><span class="line">与图片服务器分离：</span><br><span class="line">设置独立的图片服务器，可以降低web应用的服务器的压力，保证系统不会因为图片问题二奔溃(优化)</span><br></pre></td></tr></table></figure><h4 id="减少外部http协议"><a href="#减少外部http协议" class="headerlink" title="减少外部http协议"></a>减少外部http协议</h4><h4 id="CDN加速"><a href="#CDN加速" class="headerlink" title="CDN加速"></a>CDN加速</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CDN的全称是Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。</span><br><span class="line">简单的来说，就是把原服务器上数据复制到其他服务器上，用户访问时，那台服务器近访问到的就是那台服务器上的数据。CDN加速优点是成本低，速度快。适合访问量比较大的网站。</span><br></pre></td></tr></table></figure><h4 id="echarts简单优化？"><a href="#echarts简单优化？" class="headerlink" title="echarts简单优化？"></a>echarts简单优化？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">模块复用</span><br><span class="line">缓存</span><br><span class="line">关闭动画（3D）</span><br><span class="line">SQL优化</span><br><span class="line">可选择 dataZoom</span><br><span class="line">type为line时可选择sampling</span><br><span class="line">懒加载（逐步加载）echarts模块或图片lazyload</span><br><span class="line">清理不用的图表、clear和dispose</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JAVA基础面试题三</title>
      <link href="/blog/2019/10/07/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%89/"/>
      <url>/blog/2019/10/07/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h3 id="本文主要JAVA基础面试题三"><a href="#本文主要JAVA基础面试题三" class="headerlink" title="本文主要JAVA基础面试题三"></a>本文主要JAVA基础面试题三</h3><a id="more"></a><h4 id="JDK、JRE、JVM三者间的关系？"><a href="#JDK、JRE、JVM三者间的关系？" class="headerlink" title="JDK、JRE、JVM三者间的关系？"></a>JDK、JRE、JVM三者间的关系？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JDK:Java运行环境JRE、Java工具和Java基础类库。</span><br><span class="line">JRE:运行JAVA程序所必须的环境的集合，包含JVM标准实现及Java核心类库。</span><br><span class="line">JVM:整个java实现跨平台的最核心的部分，能够运行以Java语言写作的软件程序。</span><br></pre></td></tr></table></figure><h4 id="amp-和-amp-amp-的区别？"><a href="#amp-和-amp-amp-的区别？" class="headerlink" title="&amp; 和 &amp;&amp; 的区别？"></a>&amp; 和 &amp;&amp; 的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">相同点：</span><br><span class="line">&amp;和&amp;&amp;都可以用作逻辑与的运算符，表示逻辑与（and）。</span><br><span class="line">不同点：</span><br><span class="line">(1)&amp;&amp;具有短路的功能，而&amp;不具备短路功能。</span><br><span class="line">(2)当&amp;运算符两边的表达式的结果都为true时，整个运算结果才为true。而&amp;&amp;运算符第一个表达式为false时，则结果为false，不再计算第二个表达式。</span><br><span class="line">(3)&amp;还可以用作位运算符，当&amp;操作符两边的表达式不是boolean类型时，&amp;表示按位与操作，我们通常使用0x0f来与一个整数进行&amp;运算，来获取该整数的最低4个bit位，例如：0x31 &amp; 0x0f的结果为0x01。</span><br><span class="line">5 &amp; 4  4</span><br><span class="line">00000101</span><br><span class="line">00000100</span><br><span class="line">00000100</span><br></pre></td></tr></table></figure><h4 id="a-b与a-a-b的区别？"><a href="#a-b与a-a-b的区别？" class="headerlink" title="a+=b与a=a+b的区别？"></a>a+=b与a=a+b的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1)byte、short类型的数相加、都会提升为int类型</span><br><span class="line">(2)=+赋值运算符 自动类型转换，也称隐式类型转换，是指不需要书写代码，由系统自动完成的类型转换。</span><br><span class="line">从存储范围小的类型到存储范围大的类型。</span><br><span class="line">具体规则为：</span><br><span class="line">short(char)→int→long→float→double</span><br><span class="line">+算数运算符</span><br></pre></td></tr></table></figure><h4 id="如何不使用第三个变量，交换变量a，b的值？"><a href="#如何不使用第三个变量，交换变量a，b的值？" class="headerlink" title="如何不使用第三个变量，交换变量a，b的值？"></a>如何不使用第三个变量，交换变量a，b的值？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = a + b;</span><br><span class="line">b = a - b;</span><br><span class="line">a = a - b;</span><br><span class="line"></span><br><span class="line">a = b + (b = a)0;</span><br></pre></td></tr></table></figure><h4 id="求最大公约数？"><a href="#求最大公约数？" class="headerlink" title="求最大公约数？"></a>求最大公约数？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//求出两个数字之间的小值</span><br><span class="line">int min = a &lt; b ? a : b;</span><br><span class="line"></span><br><span class="line">for (int i = min;i &gt;= 1;i --) &#123;</span><br><span class="line">    if (a % i == 0 &amp;&amp; b % i == 0) &#123;</span><br><span class="line">        System.out.println(&quot;最大公约数是：&quot; + i);</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="字符流和字节流的区别"><a href="#字符流和字节流的区别" class="headerlink" title="字符流和字节流的区别?"></a>字符流和字节流的区别?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字符流：用于处理文字和字符的 流。操作完成后不关闭流，数据无法传递。采用Unicode编码，由字符组成，1字符=2字节。</span><br><span class="line">字节流：文字以外的都可以用。操作完成后不需关闭流，也可以传递数据。采用ASCII编码,按字节处理。</span><br><span class="line">字符流有缓冲区，将数据接受于缓冲区，达到区的极限（通过手动 1.colse 2.flush）就会进入文件中，打开文件次数少。</span><br><span class="line">字节流：每传一次数据就会打开一次文件，打开数据次数多。占用内存。</span><br></pre></td></tr></table></figure><h4 id="类和对象的区别？"><a href="#类和对象的区别？" class="headerlink" title="类和对象的区别？"></a>类和对象的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java面对对象开发。</span><br><span class="line">类是对象的抽象，而对象是类的具体实例。</span><br><span class="line">类的实例化结果就是对象。</span><br></pre></td></tr></table></figure><h4 id="drop、truncate、delete区别？"><a href="#drop、truncate、delete区别？" class="headerlink" title="drop、truncate、delete区别？"></a>drop、truncate、delete区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop：将表所占用的空间全释放掉。</span><br><span class="line">truncate：不会触发触发器、执行速度快、初始化索引和表、不能回滚。只能对table</span><br><span class="line">delete：每次删除一行触发触发器，记入日志保存、可以添加条件、必须commit、存在缓存区、可以回退。可以是table和view。</span><br></pre></td></tr></table></figure><h4 id="JS中3种弹出窗口函数区别分析？"><a href="#JS中3种弹出窗口函数区别分析？" class="headerlink" title="JS中3种弹出窗口函数区别分析？"></a>JS中3种弹出窗口函数区别分析？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.alert：只有一个显示警告框的信息,无返回值；</span><br><span class="line">window.confirm：就一个参数即提示信息，有返回值 true或false；</span><br><span class="line">window.prompt：有两个参数，第一个显示提示信息，第二个显示输入框的默认值；</span><br></pre></td></tr></table></figure><h4 id="内存溢出和内存泄漏的区别？"><a href="#内存溢出和内存泄漏的区别？" class="headerlink" title="内存溢出和内存泄漏的区别？"></a>内存溢出和内存泄漏的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">内存溢出：</span><br><span class="line">系统已经不能再分配出你所需要的空间，比如你需要100M的空间，系统只剩90M了，这就叫内存溢出。</span><br><span class="line">内存泄漏：</span><br><span class="line">意思就是你用资源的时候为他开辟了一段空间，当你用完时忘记释放资源了，这时内存还被占用着，一次没关系，但是内存泄漏次数多了就会导致内存溢出。</span><br><span class="line">(1)for缓存、while(true)代码中存在死循环或循环产生过多重复的对象实体； </span><br><span class="line">(2)使用完后没有关闭资源；</span><br><span class="line">(3)重复创建对象；</span><br><span class="line">(4)内存中加载的数据量过于庞大，如一次从数据库取出过多数据；</span><br><span class="line">(5)启动参数内存值设定的过小；</span><br><span class="line">(6)使用的第三方软件中的BUG；</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JAVA基础面试题二</title>
      <link href="/blog/2019/10/07/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%BA%8C/"/>
      <url>/blog/2019/10/07/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h3 id="本文主要JAVA基础面试题二（二叉树）"><a href="#本文主要JAVA基础面试题二（二叉树）" class="headerlink" title="本文主要JAVA基础面试题二（二叉树）"></a>本文主要JAVA基础面试题二（二叉树）</h3><a id="more"></a><h4 id="树的介绍？"><a href="#树的介绍？" class="headerlink" title="树的介绍？"></a>树的介绍？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1)、每个结点有零个或多个子节点</span><br><span class="line">(2)、设有父节点的结点称为根节点</span><br><span class="line">(3)、每一个非根结点有且只有一个父节点</span><br><span class="line">(4)、除了根节点外，每个子结点可以分为多个不相交的子树</span><br></pre></td></tr></table></figure><h4 id="二叉树的介绍？"><a href="#二叉树的介绍？" class="headerlink" title="二叉树的介绍？"></a>二叉树的介绍？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1)、二叉树是每个结点最多有两个子树的结构</span><br><span class="line">(2)、基本形态：可以是空集、根可以有空的左右树、或者左、右树</span><br><span class="line">(3)、每一个非根结点有且只有一个父节点</span><br><span class="line">(4)、除了根节点外，每个子结点可以分为多个不相交的子树</span><br></pre></td></tr></table></figure><h4 id="二叉查找树有哪些特性？"><a href="#二叉查找树有哪些特性？" class="headerlink" title="二叉查找树有哪些特性？"></a>二叉查找树有哪些特性？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)、左子树上所有的节点的值均小于或等于他的根节点的值</span><br><span class="line">(2)、右子数上所有的节点的值均大于或等于他的根节点的值</span><br><span class="line">(3)、左右子树也一定分别为二叉排序树</span><br></pre></td></tr></table></figure><h4 id="红黑树的特性？-自平衡二叉查找树-自平衡：左旋、右旋和变色"><a href="#红黑树的特性？-自平衡二叉查找树-自平衡：左旋、右旋和变色" class="headerlink" title="红黑树的特性？(自平衡二叉查找树,自平衡：左旋、右旋和变色)"></a>红黑树的特性？(自平衡二叉查找树,自平衡：左旋、右旋和变色)</h4><p>红黑树就是一种平衡的二叉查找树，说他平衡的意思是他不会变成“瘸子”，左腿特别长或者右腿特别长。<br>除了符合二叉查找树的特性之外，还具体下列的特性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1)、节点是红色或者黑色</span><br><span class="line">(2)、根节点是黑色</span><br><span class="line">(3)、每个叶子的节点都是黑色的空节点（NULL）</span><br><span class="line">(4)、每个红色节点的两个子节点都是黑色的。</span><br><span class="line">(5)、从任意节点到其每个叶子的所有路径都包含相同的黑色节点。</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JAVA基础面试题一</title>
      <link href="/blog/2019/10/04/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80/"/>
      <url>/blog/2019/10/04/JAVA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h3 id="本文主要JAVA基础面试题一"><a href="#本文主要JAVA基础面试题一" class="headerlink" title="本文主要JAVA基础面试题一"></a>本文主要JAVA基础面试题一</h3><a id="more"></a><h4 id="如何跳出的多重嵌套循环？"><a href="#如何跳出的多重嵌套循环？" class="headerlink" title="如何跳出的多重嵌套循环？"></a>如何跳出的多重嵌套循环？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">（1）在Java中，要想跳出多重循环，可以在外面的循环语句前定义一个标号</span><br><span class="line">public static void method1()&#123;</span><br><span class="line">ok:for(int i=0;i&lt;10;i++)&#123;</span><br><span class="line">for(int j=0;j&lt;10;j++)&#123;</span><br><span class="line">System.out.println(&quot;i=&quot;+i+&quot;,j=&quot;+j);</span><br><span class="line">if(j==5)&#123;</span><br><span class="line">break ok;//跳到循环外的ok出，即终止整个循环</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">（2）也可以在里层循环体的代码中使用带有标号的break语句，即可跳出外层循环</span><br><span class="line">public static void method2()&#123;</span><br><span class="line">int[][] arr = &#123;&#123;1,2,3&#125;,&#123;4,5,6,7&#125;,&#123;9&#125;&#125;;</span><br><span class="line">boolean found = false;</span><br><span class="line">for(int i=0;i&lt;arr.length &amp;&amp; !found;i++)&#123;</span><br><span class="line">for(int j=0;j&lt;arr[i].length;j++)&#123;</span><br><span class="line">System.out.println(&quot;i=&quot;+i+&quot;,j=&quot;+j);</span><br><span class="line">if(arr[i][j]==5)&#123;</span><br><span class="line">found = true;//找到5，使外层循环判断条件变为false则终止整个循环</span><br><span class="line">break;//跳出当前循环</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="静态变量和实例变量的区别？"><a href="#静态变量和实例变量的区别？" class="headerlink" title="静态变量和实例变量的区别？"></a>静态变量和实例变量的区别？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（1）：首先在语法定义上区别：静态变量前面要加static，实例变量不用</span><br><span class="line">（2）：在程序运行时：实例变量输入对象的属性，必须创建了实例对象（如 new）才会被分配空间，才可以使用实例变量，</span><br><span class="line">  静态变量不属于某个实例对象，而是属于类，也叫类变量，只要程序加载了类的字节码，不用创建任何实例对象就会被分配空间，就可以被使用</span><br><span class="line">（3）：总之，实例变量必须创建对象后才可以通过这个对象来使用，静态变量则可以直接使用类名来引用。</span><br></pre></td></tr></table></figure><h4 id="堆和栈的区别在什么地方？"><a href="#堆和栈的区别在什么地方？" class="headerlink" title="堆和栈的区别在什么地方？"></a>堆和栈的区别在什么地方？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">堆（一般存放对象本身，block的copy等）</span><br><span class="line">（1）Java的堆是一个运行时数据区，类的对象从堆中分配空间。这些对象通过new等指令建立，通过垃圾回收器来销毁。</span><br><span class="line">（2）堆的优势是可以动态地分配内存空间，需要多少内存空间不必事先告诉编译器，因为它是在运行时动态分配的。但缺点是，由于需要在运行时动态分配内存，所以存取速度较慢。</span><br><span class="line">栈:后进先出（一般存储基本数据类型，对象的地址）</span><br><span class="line">（1）栈中主要存放一些基本数据类型的变量（byte，short，int，long，float，double，boolean，char）和对象的引用。</span><br><span class="line">（2）栈的优势是，存取速度比堆快，栈数据可以共享。但缺点是，存放在栈中的数据占用多少内存空间需要在编译时确定下来，缺乏灵活性。</span><br></pre></td></tr></table></figure><h4 id="类的实例化顺序"><a href="#类的实例化顺序" class="headerlink" title="类的实例化顺序?"></a>类的实例化顺序?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">父类静态代变量</span><br><span class="line">父类静态代码块</span><br><span class="line">子类静态变量</span><br><span class="line">子类静态代码块</span><br><span class="line">父类非静态变量（父类实例成员变量）</span><br><span class="line">父类构造函数</span><br><span class="line">子类非静态变量（子类实例成员变量）</span><br><span class="line">子类构造函数</span><br></pre></td></tr></table></figure><h4 id="集合区别？"><a href="#集合区别？" class="headerlink" title="集合区别？"></a>集合区别？</h4><p><img src="/blog/2019/10/04/JAVA基础面试题一/java1.png" alt=""></p><h4 id="http-https协议？"><a href="#http-https协议？" class="headerlink" title="http,https协议？"></a>http,https协议？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP：</span><br><span class="line">是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。</span><br><span class="line">HTTPS：</span><br><span class="line">是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。</span><br><span class="line">区别：</span><br><span class="line">1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。</span><br><span class="line">2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。</span><br><span class="line">3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</span><br><span class="line">4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。</span><br></pre></td></tr></table></figure><h4 id="常见到的runtime-exception？"><a href="#常见到的runtime-exception？" class="headerlink" title="常见到的runtime exception？"></a>常见到的runtime exception？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">空指针：NullPointerException</span><br><span class="line">类型转换失败：ClassCastException</span><br><span class="line">文件找不到：FileNotFoundException</span><br><span class="line">数组下标越界：ArrayIndexOutOfBoundsException</span><br><span class="line">类找不到：ClassNotFoundException</span><br><span class="line">字符串转换为数字异常：NumberFormatException</span><br><span class="line">方法未找到异常：NoSuchMethodException</span><br><span class="line">字符串索引越界异常：StringIndexOutOfBoundsException</span><br></pre></td></tr></table></figure><h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Java的基本数据类型转换规则，大的数据类型转换为小的数据类型需要强制转换，反之可以自动转换</span><br></pre></td></tr></table></figure><h4 id="char能存贮一个中文汉字-为什么"><a href="#char能存贮一个中文汉字-为什么" class="headerlink" title="char能存贮一个中文汉字?为什么"></a>char能存贮一个中文汉字?为什么</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char型变量是用来存储Unicode编码的字符的，unicode编码字符集中包含了汉字，所以，char型变量中当然可以存储汉字啦。不过，如果某个特殊的汉字没有被包含在unicode编码字符集中，那么，这个char型变量中就不能存储这个特殊汉字。补充说明：unicode编码占用两个字节，所以，char类型的变量也是占用两个字节。</span><br></pre></td></tr></table></figure><h4 id="abstractclass和interface区别"><a href="#abstractclass和interface区别" class="headerlink" title="abstractclass和interface区别"></a>abstractclass和interface区别</h4><p><img src="/blog/2019/10/04/JAVA基础面试题一/java2.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Nginx日志切割</title>
      <link href="/blog/2019/07/08/Nginx%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"/>
      <url>/blog/2019/07/08/Nginx%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/</url>
      
        <content type="html"><![CDATA[<h4 id="Nginx日志切割"><a href="#Nginx日志切割" class="headerlink" title="Nginx日志切割"></a>Nginx日志切割<a id="more"></a></h4><p>nginx版本：1.8.1<br>nginx目录：/usr/local/nginx/<br>nginx日志：/usr/local/nginx/logs<br>    acces.log    #访问量<br>    error.log    #错误日志<br>    pid.log        #NGINX进程ID</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 获取昨天的access日志</span><br><span class="line">mv access.log &apos;date +%F -d -1day&apos;_access.log</span><br><span class="line"># 重新打开日志文件</span><br><span class="line">/usr/local/nginx/sbin/nginx -s reopen</span><br></pre></td></tr></table></figure><p>完整代码<br><code>/usr/local/nginx/logs新建backup.sh命令并且vim编辑</code><br><code>/usr/local/nginx/logs/新建oldLogs文件夹</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># 备份日志文件夹（旧的日志）</span><br><span class="line">LOGS_PATH=/usr/local/nginx/logs/oldLogs</span><br><span class="line"># 当前日志文件夹（新的日志）</span><br><span class="line">CUR_LOGS_PATH=/usr/local/nginx/logs</span><br><span class="line"># 昨天的日期</span><br><span class="line">YESTERDAY=$(date +%F -d -1day)</span><br><span class="line"># 备份access.log</span><br><span class="line">mv $CUR_LOGS_PATH/access.log $LOGS_PATH/$&#123;YESTERDAY&#125;_access.log</span><br><span class="line"># 备份error.log</span><br><span class="line">mv $CUR_LOGS_PATH/error.log $LOGS_PATH/$&#123;YESTERDAY&#125;_error.log</span><br><span class="line"># 重新打开日志文件</span><br><span class="line">kill -USR1 $(cat /usr/local/nginx/logs/nginx.pid)</span><br><span class="line"># USR1 通常被用来告知应用程序重载配置文件</span><br></pre></td></tr></table></figure></p><p>执行<code>sh backup.sh</code>即可在oldLogs下生成昨天日志（完成）</p><h4 id="定时任务自动执行shell脚本"><a href="#定时任务自动执行shell脚本" class="headerlink" title="定时任务自动执行shell脚本"></a>定时任务自动执行shell脚本</h4><p><code>crontab -e</code>    #编辑定时任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * /bin/bash /usr/local/nginx/logs/backup.sh</span><br></pre></td></tr></table></figure></p><p><code>crontab -l</code>    #查看编辑任务<br><code>0 0 * * *</code>每天执行一次生成昨天的日志</p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Nginx配置Https遇到的问题</title>
      <link href="/blog/2019/07/06/Nginx%E9%85%8D%E7%BD%AEHttps%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/blog/2019/07/06/Nginx%E9%85%8D%E7%BD%AEHttps%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="Nginx配置Https-开启例外443端口"><a href="#Nginx配置Https-开启例外443端口" class="headerlink" title="Nginx配置Https 开启例外443端口"></a>Nginx配置Https 开启例外443端口</h3><a id="more"></a><h4 id="Nginx如果未开启SSL模块，配置Https时提示错误"><a href="#Nginx如果未开启SSL模块，配置Https时提示错误" class="headerlink" title="Nginx如果未开启SSL模块，配置Https时提示错误"></a>Nginx如果未开启SSL模块，配置Https时提示错误</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx: [emerg] the &quot;ssl&quot; parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:37</span><br></pre></td></tr></table></figure><p>nginx缺少http_ssl_module模块，编译安装的时候带上–with-http_ssl_module配置就行了</p><h4 id="Nginx开启SSL模块（重新编译）"><a href="#Nginx开启SSL模块（重新编译）" class="headerlink" title="Nginx开启SSL模块（重新编译）"></a>Nginx开启SSL模块（重新编译）</h4><p>Nginx源码包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx-1.8.1</span><br></pre></td></tr></table></figure></p><p>查看Nginx已安装的模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure></p><p>重新编译安装nginx（必须停止Nginx）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 停止Nginx</span><br><span class="line">/usr/local/nginx/sbin/nginx -s stop</span><br><span class="line"></span><br><span class="line"># 重新编译Nginx</span><br><span class="line">./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span><br><span class="line"></span><br><span class="line"># Nginx编译(不要进行make install，否则就是覆盖安装Nginx)</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"># 然后备份原有已安装好的nginx</span><br><span class="line">cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak</span><br><span class="line"></span><br><span class="line"># 然后将刚刚编译好的nginx覆盖掉原有的nginx（这个时候nginx要停止状态）</span><br><span class="line">cp ./objs/nginx /usr/local/nginx/sbin/</span><br><span class="line"></span><br><span class="line"># 然后启动nginx，仍可以通过命令查看是否已经加入成功</span><br><span class="line">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2019/07/06/Nginx配置Https遇到的问题/nginx.png" alt="nginx -V"></p><h4 id="Nginx配置Https"><a href="#Nginx配置Https" class="headerlink" title="Nginx配置Https"></a>Nginx配置Https</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  web.tset.com;# 改为绑定证书的域名</span><br><span class="line">return 301 https://$server_name$request_uri;# 重定向https</span><br><span class="line">&#125;    </span><br><span class="line">server &#123;</span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  web.tset.com;# 改为绑定证书的域名</span><br><span class="line">ssl on;</span><br><span class="line"># Nginx SSL性能调优</span><br><span class="line">ssl_certificate  cert/web.tset.com.pem;# 改为自己申请得到的 crt 文件的名称(新建cert目录)</span><br><span class="line">ssl_certificate_key cert/web.tset.com.key;# 改为自己申请得到的 key 文件的名称(新建cert目录)</span><br><span class="line">ssl_session_timeout 5m;</span><br><span class="line">ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">ssl_prefer_server_ciphers on;</span><br><span class="line">location / &#123;</span><br><span class="line">root html;</span><br><span class="line">index  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启Nginx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure></p><h4 id="阿里云开启服务器443端口及80端口（https默认端口）"><a href="#阿里云开启服务器443端口及80端口（https默认端口）" class="headerlink" title="阿里云开启服务器443端口及80端口（https默认端口）"></a>阿里云开启服务器443端口及80端口（https默认端口）</h4><p>阿里云控制台=》云计算基础服务=》云服务器ECS=》网络和安全=》安全组，没有安全组的创建一个安全组，有的直接选择相应安全组，点击配置规则=》添加安全组规则（把80端口和443端口添加进安全组，授权对象填0.0.0.0/0）<br><img src="/blog/2019/07/06/Nginx配置Https遇到的问题/aliyun.png" alt="阿里云开启服务器443端口"></p><h4 id="阿里云申请SSL证书"><a href="#阿里云申请SSL证书" class="headerlink" title="阿里云申请SSL证书"></a>阿里云申请SSL证书</h4><p><a href="https://jingyan.baidu.com/article/6c67b1d6431a872787bb1ece.html" target="_blank" rel="noopener">教大家怎么申请阿里云的免费版 SSL证书</a></p><p>配置完成！！！</p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> SSL </tag>
            
            <tag> HTTPS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux常用命令</title>
      <link href="/blog/2019/06/24/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/blog/2019/06/24/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h3><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp|grep 端口号#查看指定端口被哪个进程占用的情况</span><br><span class="line">ps -ef|grep nginx #查看进程号</span><br><span class="line">kill -9 pid #强制杀死进程</span><br><span class="line">nohup java -jar aaa.jar &gt; spring.log &amp;#后台启动jar包打印日志到spring</span><br><span class="line">tail -f spring.log #动态查看日志</span><br></pre></td></tr></table></figure><h3 id="登录mysql查看默认字符集"><a href="#登录mysql查看默认字符集" class="headerlink" title="登录mysql查看默认字符集"></a>登录mysql查看默认字符集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &apos;%char%&apos;;</span><br></pre></td></tr></table></figure><h3 id="mysql乱码"><a href="#mysql乱码" class="headerlink" title="mysql乱码"></a>mysql乱码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/my.cnf </span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_general_ci</span><br></pre></td></tr></table></figure><h3 id="重启msyql"><a href="#重启msyql" class="headerlink" title="重启msyql"></a>重启msyql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><h3 id="nginx命令"><a href="#nginx命令" class="headerlink" title="nginx命令"></a>nginx命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload#重新启动</span><br><span class="line">nginx -s stop#停止</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Jquery data()方法</title>
      <link href="/blog/2019/05/22/Jquery-data-%E6%96%B9%E6%B3%95/"/>
      <url>/blog/2019/05/22/Jquery-data-%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>jQuery.extend 与 jQuery.fn.extend 的区别在于：<br>jQuery.extend 是在 jQuery 这个构造函数上扩展的方法，调用的时候写成 $.xxx 或者 jQuery.xxx<br>jQuery.fn.extend 是在 jQuery 原型上扩展的方法，方法被所有 jQuery 对象共享，调用的时候为 $().xxx<br>$.data()可以用来设置DOM元素的data-<em>属性，也可以用来获取DOM元素的data-</em>的值<br>Jquery.data()方法作用：给普通对象或DOM元素附加（及获取） 数据。<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://libs.baidu.com/jquery/1.9.0/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;div id=&apos;testDiv&apos; data-test=&quot;111&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(&apos;#testDiv&apos;).data(&quot;test1&quot;,&quot;1111&quot;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    存储的值为</span><br><span class="line">    &lt;span&gt;&lt;/span&gt;</span><br><span class="line">    和</span><br><span class="line">    &lt;span&gt;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(function () &#123; </span><br><span class="line">    var div = $( &quot;div&quot; )[ 0 ];</span><br><span class="line">    jQuery.data( div, &quot;test2&quot;, &#123;</span><br><span class="line">        first: 16,</span><br><span class="line">        last: &quot;pizza!&quot;</span><br><span class="line">    &#125;);</span><br><span class="line">    $( &quot;span:first&quot; ).text( jQuery.data( div, &quot;test2&quot; ).first );</span><br><span class="line">    $( &quot;span:last&quot; ).text( jQuery.data( div, &quot;test2&quot; ).last );</span><br><span class="line">console.dir($( &quot;span:last&quot; ));</span><br><span class="line">&#125;)</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">jQuery.data(obj, &apos;name&apos;, &apos;王麻子&apos;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>源码解读<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ = function() &#123;  </span><br><span class="line">    var expando = &quot;jQuery&quot; + (&quot;1.6&quot; + Math.random()).replace(/\D/g, &apos;&apos;);  </span><br><span class="line">  </span><br><span class="line">    function getData(cache, name) &#123;  </span><br><span class="line">        return cache[name];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    function setData(cache, name, value) &#123;  </span><br><span class="line">        cache[name] = value;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    function getCache(obj) &#123;  </span><br><span class="line">        obj[expando] = obj[expando] || &#123;&#125;;  </span><br><span class="line">        return obj[expando];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    return &#123;  </span><br><span class="line">        data : function(obj, name, value) &#123;  </span><br><span class="line">            var cache = getCache(obj);  </span><br><span class="line">  </span><br><span class="line">            if (value === undefined) &#123;  </span><br><span class="line">                return getData(cache, name);  </span><br><span class="line">            &#125; else &#123;  </span><br><span class="line">                setData(cache, name, value);  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Jquery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jquery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java matcher中find,matches,lookingAt方法的区别</title>
      <link href="/blog/2019/05/13/java-matcher%E4%B8%ADfind-matches-lookingAt%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/blog/2019/05/13/java-matcher%E4%B8%ADfind-matches-lookingAt%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>在Matcher类中有matches、lookingAt和find都是匹配目标的方法，但容易混淆，整理它们的区别如下：</p><ul><li>matches:整个匹配，只有整个字符序列完全匹配成功，才返回True，否则返回False。但如果前部分匹配成功，将移动下次匹配的位置。</li><li>lookingAt:部分匹配，总是从第一个字符进行匹配,匹配成功了不再继续匹配，匹配失败了,也不继续匹配。</li><li>find:部分匹配，从当前位置开始匹配，找到一个匹配的子串，将移动下次匹配的位置。</li><li>reset:给当前的Matcher对象配上个新的目标，目标是就该方法的参数；如果不给参数，reset会把Matcher设到当前字符串的开始处。<a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Pattern pattern = Pattern.compile(&quot;\\d&#123;3,5&#125;&quot;);</span><br><span class="line">String charSequence = &quot;123-34345-234-00&quot;;</span><br><span class="line">Matcher matcher = pattern.matcher(charSequence);</span><br><span class="line"></span><br><span class="line">//虽然匹配失败，由于charSequence里面的&quot;123&quot;和pattern是匹配的</span><br><span class="line">//下次的匹配从位置4开始</span><br><span class="line">print(matcher.matches());/*false*/</span><br><span class="line">//测试匹配位置</span><br><span class="line">matcher.find();</span><br><span class="line">print(matcher.start());/*4*/</span><br><span class="line"></span><br><span class="line">//使用reset方法重置匹配位置(从0开始)</span><br><span class="line">matcher.reset();</span><br><span class="line"></span><br><span class="line">//第一次find匹配以及匹配的目标和匹配的起始位置</span><br><span class="line">print(matcher.find());/*true*/</span><br><span class="line">print(matcher.group()+&quot; - &quot;+matcher.start());/*123---0*/</span><br><span class="line">//第二次find匹配以及匹配的目标和匹配的起始位置</span><br><span class="line">print(matcher.find());/*true*/</span><br><span class="line">print(matcher.group()+&quot; - &quot;+matcher.start());/*34345---4*/</span><br><span class="line"></span><br><span class="line">//第一次lookingAt匹配以及匹配的目标和匹配的起始位置</span><br><span class="line">print(matcher.lookingAt());/*true*/</span><br><span class="line">print(matcher.group()+&quot; - &quot;+matcher.start());/*123---0*/</span><br><span class="line"></span><br><span class="line">//第二次lookingAt匹配以及匹配的目标和匹配的起始位置</span><br><span class="line">print(matcher.lookingAt());/*true*/</span><br><span class="line">print(matcher.group()+&quot; - &quot;+matcher.start());/*123---0*/</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> matcher </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Nginx+Tomcat+Redis（负载均衡+session共享+动静分离）案例</title>
      <link href="/blog/2019/04/29/Nginx-Tomcat-Redis%EF%BC%88%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-session%E5%85%B1%E4%BA%AB-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB%EF%BC%89%E6%A1%88%E4%BE%8B/"/>
      <url>/blog/2019/04/29/Nginx-Tomcat-Redis%EF%BC%88%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-session%E5%85%B1%E4%BA%AB-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB%EF%BC%89%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<p>今天整合了一些资源，做了一个Nginx+Tomcat+Redis（负载均衡+session共享+动静分离）完整案例，使部署的web项目能够承载较大的访问压力，Nginx实现负载均衡及动静分离，并使用Redis实现session共享。<br><a id="more"></a><br><img src="/blog/2019/04/29/Nginx-Tomcat-Redis（负载均衡-session共享-动静分离）案例/nginx1.png" alt="各版本如图所示"></p><h4 id="警告注意"><a href="#警告注意" class="headerlink" title="警告注意"></a>警告注意</h4><p>redis实现session共享，需要三个jar包（如果报错就是版本不符合，放入tomcat文件夹下的lib中）<br>tomcat-redis-session-manager1.2.jar<br>commons-pool2-2.4.1.jar<br>jedis-2.6.2.jar</p><h4 id="完整步骤"><a href="#完整步骤" class="headerlink" title="完整步骤"></a>完整步骤</h4><h5 id="Tomcat集群"><a href="#Tomcat集群" class="headerlink" title="Tomcat集群"></a>Tomcat集群</h5><p>复制多个tomcat文件，修改server.xml，修改其中的8005、8080、8009端口号（nginx和tomcat解压路径最好再同一目录D:/User/nginxTest）<br>在多个tomcat的webapps下新建nginx文件夹，在nginx下新建index.jsp(多个jsp修改<code>&lt;h2&gt;Nginx动静分离2&lt;/h2&gt;</code>)，代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;link href=&quot;/nginx/css/index.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/nginx/js/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Nginx动静分离&lt;/h2&gt;</span><br><span class="line">&lt;% </span><br><span class="line">  out.println(&quot;[&quot;+request.getLocalAddr()+&quot;:&quot; +request.getLocalPort()+&quot;]&quot; + &quot;&lt;br/&gt;session id:&quot; + session.getId());  </span><br><span class="line">%&gt;</span><br><span class="line">&lt;!--当前的css、js、图片均来自nginx的静态文件--&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;img alt=&quot;图片&quot; src=&quot;/nginx/img/1.png&quot; style=&quot;width:300px;height:300px&quot;&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  HttpSession mySession = request.getSession(false);</span><br><span class="line">  if(mySession.getAttribute(&quot;appname&quot;) == null)&#123;</span><br><span class="line">  mySession = request.getSession(true);</span><br><span class="line">  mySession.setAttribute(&quot;appname&quot;, &quot;AAA111&quot;);</span><br><span class="line">  out.println(&quot;new session:&quot;+mySession.getAttribute(&quot;appname&quot;));</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    out.println(&quot;old session:&quot;+mySession.getAttribute(&quot;appname&quot;));</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><h5 id="动静分离的-Nginx-配置"><a href="#动静分离的-Nginx-配置" class="headerlink" title="动静分离的 Nginx 配置"></a>动静分离的 Nginx 配置</h5><p>安装Nginx：<br>我使用的Nginx为绿色版本，双击即可开启（安装路径 D:/User/nginxTest/nginx）<br><img src="/blog/2019/04/29/Nginx-Tomcat-Redis（负载均衡-session共享-动静分离）案例/nginx2.png" alt="nginx目录结构"><br>修改 conf nginx.conf 配置文件，多个Tomcat服务器都是在这里配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">upstream test &#123;</span><br><span class="line">server 127.0.0.1:8080 weight=2;</span><br><span class="line">server 127.0.0.1:8081 weight=1;</span><br><span class="line">#配置多个tomcat，负载均衡</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen       80;</span><br><span class="line">server_namelocalhost;</span><br><span class="line"></span><br><span class="line">  #charset koi8-r;</span><br><span class="line"></span><br><span class="line">  #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"># 所有动态请求都转发给tomcat处理 </span><br><span class="line">location ~ \.(jsp|do)$ &#123; </span><br><span class="line">proxy_next_upstream http_502 http_504 error timeout invalid_header;</span><br><span class="line">proxy_pass http://test;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">#静态文件交给nginx处理</span><br><span class="line">location ~ .*\.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$</span><br><span class="line">&#123;</span><br><span class="line"># 绝对路径</span><br><span class="line">root  D:/User/nginxTest/nginx/webapps;</span><br><span class="line">&#125;</span><br><span class="line">#静态文件交给nginx处理</span><br><span class="line">location ~ .*\.(js|css)?$</span><br><span class="line">&#123;</span><br><span class="line"># 绝对路径</span><br><span class="line">root D:/User/nginxTest/nginx/webapps;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>由于静态文件都在<code>D:/User/nginxTest/nginx/webapps</code>中，在nginx文件夹下新建webapps，继续新建jsp中的路径<code>/nginx/img/1.png</code>、<code>/nginx/css/index.css</code>、<code>/nginx/js/index.js</code><br>现在动静分离和负载均衡就配置成功了，下面开始redis共享session<br>把前文提到的三个包加入到所有tomcat的lib中。<br>修改tomcat的conf中的context.xml，添加代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Valve className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve&quot; /&gt;  </span><br><span class="line">   &lt;Manager className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionManager&quot;  </span><br><span class="line">        host=&quot;localhost&quot;   </span><br><span class="line">        port=&quot;6379&quot;</span><br><span class="line">        password=&quot;admin&quot;&lt;!--redis密码，需要修改redis.window.conf文件--》</span><br><span class="line">        database=&quot;0&quot;</span><br><span class="line">        maxInactiveInterval=&quot;60&quot; /&gt;</span><br></pre></td></tr></table></figure></p><h5 id="redis共享session"><a href="#redis共享session" class="headerlink" title="redis共享session"></a>redis共享session</h5><p>安装redis：<br>我使用的redis为绿色版本，双击即可开启（安装路径 D:/User/nginxTest/redis）<br><img src="/blog/2019/04/29/Nginx-Tomcat-Redis（负载均衡-session共享-动静分离）案例/redis1.png" alt="redis目录结构"><br>修改redis.windows.conf文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># requirepass foobared redis密码</span><br><span class="line">requirepass admin</span><br></pre></td></tr></table></figure></p><p>启动redis，<code>redis-server.exe redis.windows.conf</code><br>大功告成！<br>session默认时间是30秒，可修改tomcat下的web.xml，根据实际情况调整<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;session-config&gt;</span><br><span class="line">  &lt;session-timeout&gt;60&lt;/session-timeout&gt;&lt;!--默认是30秒--&gt;</span><br><span class="line">&lt;/session-config&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Tomcat </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo+Github实现相册功能</title>
      <link href="/blog/2019/04/26/Hexo-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD/"/>
      <url>/blog/2019/04/26/Hexo-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h3 id="Hexo-Github-Python实现相册功能"><a href="#Hexo-Github-Python实现相册功能" class="headerlink" title="Hexo+Github+Python实现相册功能"></a>Hexo+Github+Python实现相册功能</h3><p>最终效果请看这里    <a href="https://lastsummer.top/blog/photos/">https://lastsummer.top/blog/photos/</a><br>我使用的主题是<code>hexo-theme-shana-master</code>,该主题没有集成相册功能，自己上网查了些资料,摸索摸索,终于搭建好了。<a id="more"></a></p><h3 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h3><p>在github上新建一个仓库，主要用于存储图片，可以通过url访问到，也方便管理（后期可以在七牛云上进行图片储存）<br>将要放到相册的图片处理成json格式的数据，然后进行访问，这里json的格式需要配合要使用的样式，所以需要处理成特定格式的json数据，下面会给出图片裁剪，因为相册显示的样式最好是正方形的的图片，这里使用脚本处理一下图片压缩，相册显示的图片是压缩后的图片，提高加载的速度，打开后的图片是原图。</p><h4 id="新建一个仓库存储图片"><a href="#新建一个仓库存储图片" class="headerlink" title="新建一个仓库存储图片"></a>新建一个仓库存储图片</h4><p>源码下载地址<code>https://github.com/wangrui15034005712/Blog-Back-Up</code><br>建立一个用于存储相册的仓库，我这里建立了名为Blog-Back-Up的仓库（和博客地址同一目录）<br><b>重点</b> 修改Blog-Back-Up中blog_photos_copy的ins.js文件，主要是里面的render函数，修改成自己的Github图片路径,这个链接很多人输入错了，不是直接的图片url，是github需要点“download”才能看到的url。<br><img src="/blog/2019/04/26/Hexo-Github实现相册功能/photo.png" alt="download文件"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var minSrc = &apos;https://raw.githubusercontent.com/wangrui15034005712/Blog-Back-Up/master/min_photos/&apos; + data.link[i];</span><br><span class="line">var src = &apos;https://raw.githubusercontent.com/wangrui15034005712/Blog-Back-Up/master/photos/&apos; + data.link[i];</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2019/04/26/Hexo-Github实现相册功能/photo1.png" alt="修改ins.js文件"><br><b>重点</b> 修改Blog-Back-Up中tool.py文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 把json文件发布到自己的博客中</span><br><span class="line">with open(&quot;../Hexo/source/photos/data.json&quot;,&quot;w&quot;) as fp:</span><br><span class="line">        json.dump(final_dict, fp)</span><br><span class="line"># 我设置的是本地博客路径如 D:\User\Hexo\source\photos\data.json</span><br><span class="line"># 把下载的博客Blog-Back-Up上传至自己新创建的仓库</span><br><span class="line"># 把自己的相册图片放入到Blog-Back-Up的photos中</span><br><span class="line"># DOS命令执行 Python tool.py 命令压缩图片到min_photos及json并且发布到Github</span><br><span class="line"># 如果报错自行百度python等问题（缺少模块、版本不对）</span><br></pre></td></tr></table></figure></p><h4 id="修改Hexo博客"><a href="#修改Hexo博客" class="headerlink" title="修改Hexo博客"></a>修改Hexo博客</h4><p>在Hexo目录中打开DOS命令创建新的相册菜单<code>hexo new page &quot;photos&quot;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;photos&quot;</span><br></pre></td></tr></table></figure></p><p>之后，去下载“empty.png” <a href="https://raw.githubusercontent.com/wangrui15034005712/blog/master/assets/img/empty.png" target="_blank" rel="noopener">点击这里，右键保存下载</a><br>在Hexo本地仓库source下新建一个文件夹命名为assets,再在assets下新建一个文件夹命名为img。最后把empty.png放到img里面。<br>把之前clone下来的Blog-Back-Up下blog_photos_copy的所有文件copy到Hexo本地仓库source中的photo文件夹下<br>如无法显示，可能是图片路径，网络传输较慢，js、css样式待优化，小编自己的样式是经过调整的。<br>有问题可以在下方评论区评论。<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>参考博客：<a href="https://blog.csdn.net/wardseptember/article/details/82780684" target="_blank" rel="noopener">hexo+yilia完美实现相册功能</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Hexo </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>RabbitMq入门及六种模式讲解</title>
      <link href="/blog/2019/04/23/RabbitMq%E5%85%A5%E9%97%A8%E5%8F%8A%E5%85%AD%E7%A7%8D%E6%A8%A1%E5%BC%8F%E8%AE%B2%E8%A7%A3/"/>
      <url>/blog/2019/04/23/RabbitMq%E5%85%A5%E9%97%A8%E5%8F%8A%E5%85%AD%E7%A7%8D%E6%A8%A1%E5%BC%8F%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="RabbitMQ-术语说明："><a href="#RabbitMQ-术语说明：" class="headerlink" title="RabbitMQ 术语说明："></a>RabbitMQ 术语说明：</h3><p>Server(Broker):接收客户端连接，实现AMQP协议的消息队列和路由功能的进程；<br>Virtual Host：虚拟主机的概念，类似权限控制组，一个Virtual Host里可以有多个Exchange和Queue,权限控制的最小丽都是Virtual Host；<br>Exchange:交换机，接收生产者发送的消息，并根据Routing Key将消息路由到服务器中的队列Queue。<br>ExchangeType:交换机类型决定了路由消息行为，RabbitMQ中有三种类型Exchange，分别是fanout、direct、topic；<br>Message Queue：消息队列，用于存储还未被消费者消费的消息；<br>Message：由Header和body组成，Header是由生产者添加的各种属性的集合，包括Message是否被持久化、优先级是多少、由哪个Message Queue接收等；body是真正需要发送的数据内容；<br>BindingKey：绑定关键字，将一个特定的Exchange和一个特定的Queue绑定起来。<br><a id="more"></a></p><h3 id="RabbitMQ-五种队列模式与-SpringBoot-实例"><a href="#RabbitMQ-五种队列模式与-SpringBoot-实例" class="headerlink" title="RabbitMQ 五种队列模式与(SpringBoot)实例"></a>RabbitMQ 五种队列模式与(SpringBoot)实例</h3><h5 id="在pom-xml中添加相关依赖"><a href="#在pom-xml中添加相关依赖" class="headerlink" title="在pom.xml中添加相关依赖"></a>在pom.xml中添加相关依赖</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--消息队列模块--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h5 id="修改application-properties"><a href="#修改application-properties" class="headerlink" title="修改application.properties"></a>修改application.properties</h5><p>在application.properties添加rabbitmq的相关信息（默认账号密码guest）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.rabbitmq.host=127.0.0.1</span><br><span class="line">spring.rabbitmq.port=5672</span><br><span class="line">spring.rabbitmq.username=guest</span><br><span class="line">spring.rabbitmq.password=guest</span><br></pre></td></tr></table></figure></p><h4 id="简单模式-Hello-World-工作模式"><a href="#简单模式-Hello-World-工作模式" class="headerlink" title="简单模式 Hello World + 工作模式"></a>简单模式 Hello World + 工作模式</h4><p>简单模式：一个生产者P发送消息到队列hello,一个消费者C接收</p><h5 id="一对一的使用配置"><a href="#一对一的使用配置" class="headerlink" title="一对一的使用配置"></a>一对一的使用配置</h5><p>一对一，一个发送者发送消息，一个接受者接受消息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test1;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.Queue;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Author: wangrui</span><br><span class="line"> * @Description: 队列配置，队列的名称，发送者和接受者的名称必须一致，否则接收不到消息</span><br><span class="line"> * @Date: 2019/4/26 16：54</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class RabbitMqConfig &#123;</span><br><span class="line"></span><br><span class="line">  public Queue Queue1() &#123;</span><br><span class="line">    return new Queue(&quot;lyhTest1&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test1;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Author: wangrui</span><br><span class="line"> * @Description: 发送者通过Controller类发送消息：</span><br><span class="line"> * @Date: 2019/4/26 16：54</span><br><span class="line"> */</span><br><span class="line">@RestController</span><br><span class="line">public class SendController &#123;</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  private AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">  //一对一</span><br><span class="line">  @RequestMapping(&quot;/send&quot;)</span><br><span class="line">  public String send()&#123;</span><br><span class="line">    String content=&quot;Date:&quot;+new Date();</span><br><span class="line">    amqpTemplate.convertAndSend(&quot;lyhTest1&quot;,content);</span><br><span class="line">    return content;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test1;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Author: wangrui</span><br><span class="line"> * @Description: 接收者Receiver1类接收信息</span><br><span class="line"> * @Date: 2019/4/26 16：54</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;lyhTest1&quot;)</span><br><span class="line">public class Receiver1 &#123;</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void receiver(String msg)&#123;</span><br><span class="line">    System.out.println(&quot;Test1 receiver1:&quot;+msg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试：浏览器访问地址：<a href="http://localhost:8080/send" target="_blank" rel="noopener">http://localhost:8080/send</a><br>终端输出Receiver1接收的内容<br>查看RabbitMQ的Web客户端<a href="http://localhost:15672" target="_blank" rel="noopener">http://localhost:15672</a> 可以在列表里看到之前创建的队列。</p><h5 id="一对多的使用配置"><a href="#一对多的使用配置" class="headerlink" title="一对多的使用配置"></a>一对多的使用配置</h5><p>一对多，一个发送者发送消息，多个接受者接受同一个消息，添加新的接收者Receiver2。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test1;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;lyhTest1&quot;)</span><br><span class="line">//这里的lyhTest2是多对多，如果要测试一对多改成lyhTest1</span><br><span class="line">public class Receiver2 &#123;</span><br><span class="line"></span><br><span class="line">    @RabbitHandler</span><br><span class="line">    public void receiver(String msg)&#123;</span><br><span class="line">        System.out.println(&quot;Test1 receiver2:&quot;+msg);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在SendController添加一对多发送方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//可以看到发送者发送一个消息被多个接收者接收，注意这里的消息只能被消费一次（一对多）</span><br><span class="line">@RequestMapping(&quot;/multiSend&quot;)</span><br><span class="line">public String multiSend()&#123;</span><br><span class="line">  StringBuilder times=new StringBuilder();</span><br><span class="line">  for(int i=0;i&lt;10;i++)&#123;</span><br><span class="line">    long time=System.nanoTime();</span><br><span class="line">    amqpTemplate.convertAndSend(&quot;lyhTest1&quot;,&quot;第&quot;+i+&quot;次发送的时间：&quot;+time);</span><br><span class="line">    times.append(time+&quot;&lt;br&gt;&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  return times.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>测试，浏览器访问<a href="http://localhost:8080/multiSend" target="_blank" rel="noopener">http://localhost:8080/multiSend</a></p><h5 id="多对多的使用配置"><a href="#多对多的使用配置" class="headerlink" title="多对多的使用配置"></a>多对多的使用配置</h5><p>在配置类RabbbitMqConfig添加新的队列名lyhTest2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class RabbitMqConfig &#123;</span><br><span class="line"></span><br><span class="line">@Bean</span><br><span class="line">public Queue Queue1() &#123;</span><br><span class="line">  return new Queue(&quot;lyhTest1&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Bean</span><br><span class="line">public Queue Queue2() &#123;</span><br><span class="line">  return new Queue(&quot;lyhTest2&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>修改Receiver2接收队列名为lyhTest2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;lyhTest2&quot;)</span><br><span class="line">//这里的lyhTest2是多对多，如果要测试一对多改成lyhTest1</span><br><span class="line">public class Receiver2 &#123;</span><br><span class="line"></span><br><span class="line">@RabbitHandler</span><br><span class="line">public void receiver(String msg)&#123;</span><br><span class="line">  System.out.println(&quot;Test1 receiver2:&quot;+msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在SendController添加多对多发送消息的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/multi2MultiSend&quot;)</span><br><span class="line">public String mutil2MutilSend()&#123;</span><br><span class="line">StringBuilder times=new StringBuilder();</span><br><span class="line">for(int i=0;i&lt;10;i++)&#123;</span><br><span class="line">  long time=System.nanoTime();</span><br><span class="line">  amqpTemplate.convertAndSend(&quot;lyhTest1&quot;,&quot;第&quot;+i+&quot;次发送的时间：&quot;+time);</span><br><span class="line">  amqpTemplate.convertAndSend(&quot;lyhTest2&quot;,&quot;第&quot;+i+&quot;次发送的时间：&quot;+time);</span><br><span class="line">  times.append(time+&quot;&lt;br&gt;&quot;);</span><br><span class="line">&#125;</span><br><span class="line">return times.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>测试，浏览器访问：<a href="http://localhost:8080/multi2MultiSend" target="_blank" rel="noopener">http://localhost:8080/multi2MultiSend</a></p><h4 id="Topic-Exchange（自定义程度较高-通配符）"><a href="#Topic-Exchange（自定义程度较高-通配符）" class="headerlink" title="Topic Exchange（自定义程度较高 通配符）"></a>Topic Exchange（自定义程度较高 通配符）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test2;</span><br><span class="line"></span><br><span class="line">  import org.springframework.amqp.core.Binding;</span><br><span class="line">  import org.springframework.amqp.core.BindingBuilder;</span><br><span class="line">  import org.springframework.amqp.core.Queue;</span><br><span class="line">  import org.springframework.amqp.core.TopicExchange;</span><br><span class="line">  import org.springframework.context.annotation.Bean;</span><br><span class="line">  import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Author:wangrui</span><br><span class="line"> * @Description:Topic Exchange配置类</span><br><span class="line"> * @Date:2019/4/18 9:32</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class RabbitMqTopicConfig &#123;</span><br><span class="line"></span><br><span class="line">  //只接一个topic</span><br><span class="line">  final static String message = &quot;topic.message&quot;;</span><br><span class="line">  //接收多个topic</span><br><span class="line">  final static String messages = &quot;topic.messages&quot;;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Queue queueMessage() &#123;</span><br><span class="line">    return new Queue(RabbitMqTopicConfig.message);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Queue queueMessages() &#123;</span><br><span class="line">    return new Queue(RabbitMqTopicConfig.messages);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  TopicExchange exchange() &#123;</span><br><span class="line">    return new TopicExchange(&quot;exchange&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  Binding bindingExchangeMessage(Queue queueMessage, TopicExchange exchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(queueMessage).to(exchange).with(&quot;topic.message&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  Binding bindingExchangeMessages(Queue queueMessages, TopicExchange exchange) &#123;</span><br><span class="line">    //这里的#表示零个或多个词。</span><br><span class="line">    return BindingBuilder.bind(queueMessages).to(exchange).with(&quot;topic.#&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;topic.message&quot;)</span><br><span class="line">public class TopicReceiver1 &#123;</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void process(String msg) &#123;</span><br><span class="line">    System.out.println(&quot;TopicReceiver1:&quot; + msg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;topic.messages&quot;)</span><br><span class="line">public class TopicReceiver2 &#123;</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void process(String msg) &#123;</span><br><span class="line">    System.out.println(&quot;TopicReceiver2 :&quot; + msg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test2;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class SendController1 &#123;</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  private AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">  @RequestMapping(&quot;/topicSend1&quot;)</span><br><span class="line">  public String  topicSend1() &#123;</span><br><span class="line">    String context = &quot;my topic 1&quot;;</span><br><span class="line">    System.out.println(&quot;发送者说 : &quot; + context);</span><br><span class="line">    this.amqpTemplate.convertAndSend(&quot;exchange&quot;, &quot;topic.message&quot;, context);</span><br><span class="line">    return context;</span><br><span class="line">  &#125;</span><br><span class="line">  @RequestMapping(&quot;/topicSend2&quot;)</span><br><span class="line">  public String topicSend2() &#123;</span><br><span class="line">    String context = &quot;my topic 2&quot;;</span><br><span class="line">    System.out.println(&quot;发送者说 : &quot; + context);</span><br><span class="line">    this.amqpTemplate.convertAndSend(&quot;exchange&quot;, &quot;topic.messages&quot;, context);</span><br><span class="line">    return  context;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试，浏览器访问：<a href="http://localhost:8080/topicSend1" target="_blank" rel="noopener">http://localhost:8080/topicSend1</a> 输出两个消费者<br>测试，浏览器访问：<a href="http://localhost:8080/topicSend2" target="_blank" rel="noopener">http://localhost:8080/topicSend2</a> 输出一个消费者</p><h4 id="Fanout-广播模式，发布订阅"><a href="#Fanout-广播模式，发布订阅" class="headerlink" title="Fanout 广播模式，发布订阅"></a>Fanout 广播模式，发布订阅</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test3;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.Binding;</span><br><span class="line">import org.springframework.amqp.core.BindingBuilder;</span><br><span class="line">import org.springframework.amqp.core.FanoutExchange;</span><br><span class="line">import org.springframework.amqp.core.Queue;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Author:wangrui</span><br><span class="line"> * @Description:队列配置，队列的名称，发送者和接受者的名称必须一致，否则接收不到消息</span><br><span class="line"> * @Date:2019/4/28 9:36</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class RabbitMqFanoutConfig &#123;</span><br><span class="line">    private static String EXCHANGE_NAME = &quot;hello111&quot;;</span><br><span class="line"></span><br><span class="line">  //声明两个队列</span><br><span class="line">  @Bean</span><br><span class="line">  public Queue queue() &#123;</span><br><span class="line">    return new Queue(&quot;hello&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Queue queue1() &#123;</span><br><span class="line">    return new Queue(&quot;hello1&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //声明一个fanout的交换机</span><br><span class="line">  @Bean</span><br><span class="line">  public FanoutExchange fanoutExchange() &#123;</span><br><span class="line">    return new FanoutExchange(EXCHANGE_NAME);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //将队列和交互机进行绑定</span><br><span class="line">  @Bean</span><br><span class="line">  public Binding bindfanout(Queue queue, FanoutExchange fanoutExchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(queue).to(fanoutExchange);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Binding bindfanout1(Queue queue1, FanoutExchange fanoutExchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(queue1).to(fanoutExchange);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test3;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">@RabbitListener(queues = &quot;hello&quot;) //这个队列就是我们之前定义的队列名称，监听hello队列的消息</span><br><span class="line">public class FanoutReceiver1 &#123;</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void receive(String message) throws InterruptedException &#123;</span><br><span class="line">    System.err.println(&quot;1:收到消息&quot; + message);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test3;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">@RabbitListener(queues=&quot;hello1&quot;) //这个队列就是我们之前定义的队列名称，监听hello队列的消息</span><br><span class="line">public class FanoutReceiver2 &#123;</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void receive(String message) throws InterruptedException&#123;</span><br><span class="line">    System.err.println(&quot;2收到消息:&quot;+message);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test3;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class SendController2 &#123;</span><br><span class="line"></span><br><span class="line">  private static String EXCHANGE_NAME = &quot;hello111&quot;;</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  private AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">  @RequestMapping(value = &quot;testFanout&quot;)</span><br><span class="line">  public void test() throws InterruptedException &#123;</span><br><span class="line">    for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">        Thread.sleep(i * 20);</span><br><span class="line">        amqpTemplate.convertAndSend(EXCHANGE_NAME, &quot;fanout&quot;, &quot;hello word&quot; + i);</span><br><span class="line">    &#125;</span><br><span class="line">    System.err.println(&quot;消息发送成功&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试，浏览器访问：<a href="http://localhost:8080/testFanout" target="_blank" rel="noopener">http://localhost:8080/testFanout</a></p><h4 id="Direct-路由模式"><a href="#Direct-路由模式" class="headerlink" title="Direct 路由模式"></a>Direct 路由模式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test4;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.Binding;</span><br><span class="line">import org.springframework.amqp.core.BindingBuilder;</span><br><span class="line">import org.springframework.amqp.core.DirectExchange;</span><br><span class="line">import org.springframework.amqp.core.Queue;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Routing 模式.配置类</span><br><span class="line"> *</span><br><span class="line"> * @author Administrator</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class DirectRabbitConfig &#123;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Queue AMessage() &#123;</span><br><span class="line">    return new Queue(&quot;direct.A&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  public Queue BMessage() &#123;</span><br><span class="line">    return new Queue(&quot;direct.B&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  DirectExchange directExchange() &#123;</span><br><span class="line">    return new DirectExchange(&quot;directExchange&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  Binding bindingExchangeMessage(Queue AMessage, DirectExchange exchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(AMessage).to(exchange).with(&quot;orange&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  Binding bindingExchangeMessageBOfBlack(Queue BMessage, DirectExchange exchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(BMessage).to(exchange).with(&quot;black&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Bean</span><br><span class="line">  Binding bindingExchangeMessageBOfGreen(Queue BMessage, DirectExchange exchange) &#123;</span><br><span class="line">    return BindingBuilder.bind(BMessage).to(exchange).with(&quot;green&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test4;</span><br><span class="line"></span><br><span class="line">import org.slf4j.Logger;</span><br><span class="line">import org.slf4j.LoggerFactory;</span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class DirectSender &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  protected static Logger logger= LoggerFactory.getLogger(DirectSender.class);</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  private AmqpTemplate rabbitTemplate;</span><br><span class="line">  public void sendOrange() &#123;</span><br><span class="line">    String context = &quot;hi, i am message orange&quot;;</span><br><span class="line">    logger.debug(&quot;Sender : &quot; + context);</span><br><span class="line">    this.rabbitTemplate.convertAndSend(&quot;directExchange&quot;, &quot;orange&quot;, context);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void sendBlack() &#123;</span><br><span class="line">    String context = &quot;hi, i am messages black&quot;;</span><br><span class="line">    logger.debug(&quot;Sender : &quot; + context);</span><br><span class="line">    this.rabbitTemplate.convertAndSend(&quot;directExchange&quot;, &quot;black&quot;, context);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void sendGreen() &#123;</span><br><span class="line">    String context = &quot;hi, i am messages green&quot;;</span><br><span class="line">    logger.debug(&quot;Sender : &quot; + context);</span><br><span class="line">    this.rabbitTemplate.convertAndSend(&quot;directExchange&quot;, &quot;green&quot;, context);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test4;</span><br><span class="line"></span><br><span class="line">import org.slf4j.Logger;</span><br><span class="line">import org.slf4j.LoggerFactory;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;direct.A&quot;)</span><br><span class="line">public class DirectReceiverA &#123;</span><br><span class="line"></span><br><span class="line">  protected static Logger logger= LoggerFactory.getLogger(DirectReceiverA.class);</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void process(String message) &#123;</span><br><span class="line">    logger.debug(&quot;direct.A Receiver  : &quot; + message);</span><br><span class="line">    System.out.println(&quot;direct.A Receiver  : &quot; + message);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test4;</span><br><span class="line"></span><br><span class="line">import org.slf4j.Logger;</span><br><span class="line">import org.slf4j.LoggerFactory;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitHandler;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@RabbitListener(queues = &quot;direct.B&quot;)</span><br><span class="line">public class DirectReceiverB &#123;</span><br><span class="line"></span><br><span class="line">  protected static Logger logger = LoggerFactory.getLogger(DirectReceiverB.class);</span><br><span class="line"></span><br><span class="line">  @RabbitHandler</span><br><span class="line">  public void process(String message) &#123;</span><br><span class="line">    logger.debug(&quot;direct.B Receiver   : &quot; + message);</span><br><span class="line">    System.out.println(&quot;direct.B Receiver  : &quot; + message);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package com.example.springboot.test4;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/routing&quot;)</span><br><span class="line">public class DirectController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private DirectSender directSender;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/send1&quot;)</span><br><span class="line">    public String send1() &#123;</span><br><span class="line">        directSender.sendOrange();</span><br><span class="line">        return &quot;send1 orange ok&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/send2&quot;)</span><br><span class="line">    public String send2() &#123;</span><br><span class="line">        directSender.sendBlack();</span><br><span class="line">        return &quot;send2  black ok&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/send3&quot;)</span><br><span class="line">    public String send3() &#123;</span><br><span class="line">        directSender.sendGreen();</span><br><span class="line">        return &quot;send3 green ok&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试，浏览器访问：<br><a href="http://localhost:8080/routing/send1" target="_blank" rel="noopener">http://localhost:8080/routing/send1</a> 输出： direct.A Receiver  : hi, i am message orange<br><a href="http://localhost:8080/routing/send2" target="_blank" rel="noopener">http://localhost:8080/routing/send2</a> 输出： direct.B Receiver  : hi, i am messages black<br><a href="http://localhost:8080/routing/send3" target="_blank" rel="noopener">http://localhost:8080/routing/send3</a> 输出： direct.B Receiver  : hi, i am messages green</p><h4 id="RPC-Request-reply（暂未使用）"><a href="#RPC-Request-reply（暂未使用）" class="headerlink" title="RPC Request/reply（暂未使用）"></a>RPC Request/reply（暂未使用）</h4><p>RPC比较适合- 客户端调用哪个服务器比较明确 </p><ul><li>调用需要立即得到返回结果 </li><li>架构简单<br>  在一个由多个微服务构成的大系统中，某些关键服务间的调用应当在较短的时间内返回，而且各个微服务的专业化程度较高，同一个请求的关注者只有一个。这个时候就应该用RPC。   比如在一个ERP系统中，有一个管理仓储的微服务，以及一个负责订单的微服务。新建订单时需要查知当前的存货是否充足，如果不充足就通知用户；提交订单时预订指定数量的货物，如果此时货物不错，也要终止订单的提交，并通知用户。显然在这种场景下是不允许较大的延迟，否则会影响用户体验。所以应该使用RPC，及时返回仓储情况。 </li></ul><p>MQ比较适合 </p><ul><li>消息的发送者和消费者需要解耦的情况 </li><li>发送者并不明确谁是消费者 </li><li>发送者并不关心谁来消费消息 </li><li>各个消费者可以从不同的角度入手处理消息 </li><li>消费者的处理结果也不返回给发送者 </li><li>消息的发送和处理是异步的 </li><li>消息的关注者不止一个<br>  在一个由多个微服务构成的大系统中，会有一些非关键服务，用来执行一些不需要立刻得到结果的计算。而且它们的计算结果并不会返回给消息的发送者。这个时候就应该使用MQ。   比如在一个ERP系统中有一些日志服务、业务监控服务等。这些服务会发布一些系统事件，针对这些事件可能有多个应用关注。对于日志服务，当系统出现某些异常情况时需要浏览日志，查找问题的根源；也可以在分析系统运行的瓶颈时提供关键数据。对于业务监控系统，例如货物入仓出仓的消息，可以被报表系统关注，生成报表；也可以被配货系统关注，及时补足所需库存。</li></ul>]]></content>
      
      
      <categories>
          
          <category> RabbitMq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简单模式 Hello World </tag>
            
            <tag> 工作模式 Work Queue </tag>
            
            <tag> 发布/订阅模式 Publish/Subscribe </tag>
            
            <tag> 路由模式 Routing </tag>
            
            <tag> 通配符模式 Topic </tag>
            
            <tag> 分布式 RPC </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Window10安装RabbitMq中间件</title>
      <link href="/blog/2019/04/17/Window10%E5%AE%89%E8%A3%85RabbitMq%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
      <url>/blog/2019/04/17/Window10%E5%AE%89%E8%A3%85RabbitMq%E4%B8%AD%E9%97%B4%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Rabbit MQ是一个在AMQP协议标准基础上完整的，可服用的企业消息系统；<br>它遵循Mozilla Public License开源协议，采用 Erlang 实现的工业级的消息队列(MQ)服务器，Rabbit MQ 是建立在Erlang OTP平台上；<br>Erlang语言阻止了大量的 Java 工程师去深入研究和掌控它，对公司而言，几乎处于不可控的状态，但是是开源的，比较稳定的社区支持，活跃度也高;<br>AMQP（高级消息队列协议）是一个异步消息传递所使用应用层协议规范，为面向消息中间件设计，基于此协议的客户端与消息中间件可以无视消息来源传递消息，不受客户端、消息中间件、不同的开发语言环境等条件的限制；<br>支持主流操作系统：Linux、Windows，MacOX等；<br>支持多种客户端开发语言：Java、Python、Ruby、.NET，PHP、C/C++、Node.js等。<br><a id="more"></a></p><h3 id="安装-Erlang-及-Rabbit-MQ（安装路径不允许出现空格）"><a href="#安装-Erlang-及-Rabbit-MQ（安装路径不允许出现空格）" class="headerlink" title="安装 Erlang 及 Rabbit MQ（安装路径不允许出现空格）"></a>安装 Erlang 及 Rabbit MQ<font color="red">（安装路径不允许出现空格）</font></h3><p>Erlang 小编使用的是 <code>otp_win64_21.3</code> ，需要其他版本或者32位系统的，可以去 <a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">Erlang官网下载</a>。<br>全部点击“下一步”就行。（安装完成）<br>进入CMD窗口，<br>安装成功后，确认一下是否有系统环境变量。<br>打开Dos窗口,输入 <code>erl</code> 查看Erlang版本（如果可以查看版本，则掠过下方环境配置）<br>变量名：<code>ERLANG_HOME</code>，变量值：<code>Erlang安装路径</code>。<br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq1.png" alt="配置ERLANG_HOME环境变量"><br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq2.png" alt="配置PATH环境变量"><br>Rabbit MQ 小编使用的是 <code>rabbitmq-server-3.7.14</code>，需要其他版本或者32位系统的，可以去<a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">Rabbit MQ官网下载</a>。<br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq3.png" alt="Rabbit MQ官网下载按需下载"><br>全部点击“下一步”就行。（安装完成）<br>激活 <code>RabbitMQ&#39;s Management Plugin</code> 管理界面<br>打开Dos窗口,输入命令：<br><code>&quot;D:\Program Files\RabbitMQ Server\rabbitmq_server-3.7.14\sbin\rabbitmq-plugins.bat&quot; enable rabbitmq_management</code><br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq4.png" alt="RabbitMQ&#39;s Management Plugin启动成功（启动6个插件）"><br>rabbitmq必须用管理员用户启动（也可配置普通用户启动、暂未使用此方法）<br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq5.png" alt="普通管理员启动错误"><br>可以在Windows10系统的开始菜单上，单击鼠标右键，这时候出现的菜单中，我们选择命令提示符（管理员）点击打开这样即可。<br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq6.png" alt="管理员打开Dos窗口"><br><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq7.png" alt="Rabbit MQ启动关闭命令"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">erl #查看Erlang版本</span><br><span class="line">rabbitmqctl status #查看了啊RabbitMQ版本</span><br><span class="line">net start rabbitmq #启动RabbitMQ命令</span><br><span class="line">net stop rabbitmq #关闭RabbitMQ命令</span><br><span class="line">127.0.0.1:15672 #访问RabbitMQ管理界面 默认用户名 guest 密码 guest</span><br><span class="line">默认监听端口：15672（在3.0版本之前是55672端口）</span><br><span class="line">rabbitmq-plugins enable rabbitmq_web_stomp rabbitmq_web_stomp_examples</span><br><span class="line">rabbitmq-plugins enable rabbitmq_management rabbitmq_web_stomp rabbitmq_stomp rabbitmq_web_stomp_examples</span><br><span class="line">&quot;/d/Program Files/RabbitMQ Server/rabbitmq_server-3.7.14/sbin/rabbitmq-plugins.bat&quot; enable rabbitmq_web_stomp rabbitmq_web_stomp_examples</span><br><span class="line">&quot;/d/Program Files/RabbitMQ Server/rabbitmq_server-3.7.14/sbin/rabbitmqctl.bat&quot; startus</span><br><span class="line">&quot;/d/Program Files/RabbitMQ Server/rabbitmq_server-3.7.14/sbin/rabbitmqctl.bat&quot; list_queues</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2019/04/17/Window10安装RabbitMq中间件/rabbitmq8.png" alt="Rabbit MQ管理员界面"></p>]]></content>
      
      
      <categories>
          
          <category> RabbitMq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMq </tag>
            
            <tag> Queue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>为什么使用消息队列</title>
      <link href="/blog/2019/04/16/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
      <url>/blog/2019/04/16/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>栈：先进先出。<br>堆、队列：先进后出。</p><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p>队列（常用数据结构之一）。<br>队列是一种特殊的线性表，特殊之处在于它只允许在表的前端（front）进行删除操作，而在表的后端（rear）进行插入操作，和栈一样，队列是一种操作受限制的线性表。进行插入操作的端称为队尾，进行删除操作的端称为队头。<br>消息被发送到队列中，“消息队列”是在消息的传输过程中保存消息的容器。<br>消息队列管理器在将消息从它的源中继到它的目标时充当中间人。<br>队列的主要目的是提供路由并保证消息的传递。<br>如果发送消息时接收者不可用，消息队列会保留消息，直到可以成功地传递它。《百度百科》<br><a id="more"></a></p><h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><h4 id="为什么使用消息队列？（场景、优点、缺点）"><a href="#为什么使用消息队列？（场景、优点、缺点）" class="headerlink" title="为什么使用消息队列？（场景、优点、缺点）"></a>为什么使用消息队列？（场景、优点、缺点）</h4><h6 id="解耦"><a href="#解耦" class="headerlink" title="解耦"></a>解耦</h6><p>场景A：<br>A 系统发送数据到 BCD 三个系统，通过接口调用发送。如果 E 系统也要这个数据呢？那如果 C 系统现在不需要了呢？A 系统负责人几乎崩溃……在这个场景中，A 系统跟其它各种乱七八糟的系统严重耦合，A 系统产生一条比较关键的数据，很多系统都需要 A 系统将这个数据发送过来。A 系统要时时刻刻考虑 BCDE 四个系统如果挂了该咋办？要不要重发，要不要把消息存起来？头发都白了啊！<br>场景A使用MQ：<br>如果使用 MQ，A 系统产生一条数据，发送到 MQ 里面去，哪个系统需要数据自己去 MQ 里面消费。如果新系统需要数据，直接从 MQ 里消费即可；如果某个系统不需要这条数据了，就取消对 MQ 消息的消费即可。这样下来，A 系统压根儿不需要去考虑要给谁发送数据，不需要维护这个代码，也不需要考虑人家是否调用成功、失败超时等情况。<br>总结：<br>通过一个 MQ，Pub/Sub 发布订阅消息这么一个模型，A 系统就跟其它系统彻底解耦了。<br>面试技巧：<br>你需要去考虑一下你负责的系统中是否有类似的场景，就是一个系统或者一个模块，调用了多个系统或者模块，互相之间的调用很复杂，维护起来很麻烦。但是其实这个调用是不需要直接同步调用接口的，如果用 MQ 给它异步化解耦，也是可以的，你就需要去考虑在你的项目里，是不是可以运用这个 MQ 去进行系统的解耦。在简历中体现出来这块东西，用 MQ 作解耦。</p><h6 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h6><p>场景B：<br>A 系统接收一个请求，需要在自己本地写库，还需要在 BCD 三个系统写库，自己本地写库要 3ms，BCD 三个系统分别写库要 300ms、450ms、200ms。最终请求总延时是 3 + 300 + 450 + 200 = 953ms，接近 1s，用户感觉搞个什么东西，慢死了慢死了。用户通过浏览器发起请求，等待个 1s，这几乎是不可接受的。一般互联网类的企业，对于用户直接的操作，一般要求是每个请求都必须在 200 ms 以内完成，对用户几乎是无感知的。<br>场景B使用MQ：<br>如果使用 MQ，那么 A 系统连续发送 3 条消息到 MQ 队列中，假如耗时 5ms，A 系统从接受一个请求到返回响应给用户，总时长是 3 + 5 = 8ms，对于用户而言，其实感觉上就是点个按钮，8ms 以后就直接返回了，爽！网站做得真好，真快！</p><h6 id="削峰"><a href="#削峰" class="headerlink" title="削峰"></a>削峰</h6><p>场景C：<br>每天 0:00 到 12:00，A 系统风平浪静，每秒并发请求数量就 50 个。结果每次一到 12:00 ~ 13:00 ，每秒并发请求数量突然会暴增到 5k+ 条。但是系统是直接基于 MySQL 的，大量的请求涌入 MySQL，每秒钟对 MySQL 执行约 5k 条 SQL。一般的 MySQL，扛到每秒 2k 个请求就差不多了，如果每秒请求到 5k 的话，可能就直接把 MySQL 给打死了，导致系统崩溃，用户也就没法再使用系统了。但是高峰期一过，到了下午的时候，就成了低峰期，可能也就 1w 的用户同时在网站上操作，每秒中的请求数量可能也就 50 个请求，对整个系统几乎没有任何的压力。<br>场景C使用MQ：<br>如果使用 MQ，每秒 5k 个请求写入 MQ，A 系统每秒钟最多处理 2k 个请求，因为 MySQL 每秒钟最多处理 2k 个。A 系统从 MQ 中慢慢拉取请求，每秒钟就拉取 2k 个请求，不要超过自己每秒能处理的最大请求数量就 ok，这样下来，哪怕是高峰期的时候，A 系统也绝对不会挂掉。而 MQ 每秒钟 5k 个请求进来，就 2k 个请求出去，结果就导致在中午高峰期（1 个小时），可能有几十万甚至几百万的请求积压在 MQ 中。这个短暂的高峰期积压是 ok 的，因为高峰期过了之后，每秒钟就 50 个请求进 MQ，但是 A 系统依然会按照每秒 2k 个请求的速度在处理。所以说，只要高峰期一过，A 系统就会快速将积压的消息给解决掉。</p><h4 id="消息队列有什么优点和缺点？"><a href="#消息队列有什么优点和缺点？" class="headerlink" title="消息队列有什么优点和缺点？"></a>消息队列有什么优点和缺点？</h4><h5 id="优点：上面已经说了，就是在特殊场景下有其对应的好处，解耦、异步、削峰（三个）"><a href="#优点：上面已经说了，就是在特殊场景下有其对应的好处，解耦、异步、削峰（三个）" class="headerlink" title="优点：上面已经说了，就是在特殊场景下有其对应的好处，解耦、异步、削峰（三个）"></a>优点：上面已经说了，就是在特殊场景下有其对应的好处，解耦、异步、削峰（三个）</h5><h5 id="缺点：系统可用性降低、系统复杂度提高、一致性问题（三个）"><a href="#缺点：系统可用性降低、系统复杂度提高、一致性问题（三个）" class="headerlink" title="缺点：系统可用性降低、系统复杂度提高、一致性问题（三个）"></a>缺点：系统可用性降低、系统复杂度提高、一致性问题（三个）</h5><h6 id="系统可用性降低："><a href="#系统可用性降低：" class="headerlink" title="系统可用性降低："></a>系统可用性降低：</h6><p>系统引入的外部依赖越多，越容易挂掉。本来你就是 A 系统调用 BCD 三个系统的接口就好了，人 ABCD 四个系统好好的，没啥问题，你偏加个 MQ 进来，万一 MQ 挂了咋整，MQ 一挂，整套系统崩溃的，你不就完了？如何保证消息队列的高可用，可以点击这里查看。</p><h6 id="系统复杂度提高"><a href="#系统复杂度提高" class="headerlink" title="系统复杂度提高"></a>系统复杂度提高</h6><p>硬生生加个 MQ 进来，你怎么保证消息没有重复消费？怎么处理消息丢失的情况？怎么保证消息传递的顺序性？头大头大，问题一大堆，痛苦不已。</p><h6 id="一致性问题"><a href="#一致性问题" class="headerlink" title="一致性问题"></a>一致性问题</h6><p>A 系统处理完了直接返回成功了，人都以为你这个请求就成功了；但是问题是，要是 BCD 三个系统那里，BD 两个系统写库成功了，结果 C 系统写库失败了，咋整？你这数据就不一致了。</p><h4 id="Kafka、ActiveMQ、RabbitMQ、RocketMQ-都有什么区别，以及适合哪些场景？"><a href="#Kafka、ActiveMQ、RabbitMQ、RocketMQ-都有什么区别，以及适合哪些场景？" class="headerlink" title="Kafka、ActiveMQ、RabbitMQ、RocketMQ 都有什么区别，以及适合哪些场景？"></a>Kafka、ActiveMQ、RabbitMQ、RocketMQ 都有什么区别，以及适合哪些场景？</h4><p>所以消息队列实际是一种非常复杂的架构，你引入它有很多好处，但是也得针对它带来的坏处做各种额外的技术方案和架构来规避掉，做好之后，你会发现，妈呀，系统复杂度提升了一个数量级，也许是复杂了 10 倍。但是关键时刻，用，还是得用的。</p><p><img src="/blog/2019/04/16/为什么使用消息队列/rabbitmq1.png" alt="四大MQ的优缺点"></p><p>综上，各种对比之后，有如下建议：<br>1、一般的业务系统要引入 MQ，最早大家都用 ActiveMQ，但是现在确实大家用的不多了，没经过大规模吞吐量场景的验证，社区也不是很活跃，所以大家还是算了吧，我个人不推荐用这个了；<br>2、后来大家开始用 RabbitMQ，但是确实 erlang 语言阻止了大量的 Java 工程师去深入研究和掌控它，对公司而言，几乎处于不可控的状态，但是确实人家是开源的，比较稳定的支持，活跃度也高；<br>3、不过现在确实越来越多的公司会去用 RocketMQ，确实很不错，毕竟是阿里出品，但社区可能有突然黄掉的风险（目前 RocketMQ 已捐给 Apache，但 GitHub 上的活跃度其实不算高）对自己公司技术实力有绝对自信的，推荐用 RocketMQ，否则回去老老实实用 RabbitMQ 吧，人家有活跃的开源社区，绝对不会黄。<br>所以中小型公司，技术实力较为一般，技术挑战不是特别高，用 RabbitMQ 是不错的选择；<br>大型公司，基础架构研发实力较强，用 RocketMQ 是很好的选择。<br>如果是大数据领域的实时计算、日志采集等场景，用 Kafka 是业内标准的，绝对没问题，社区活跃度很高，绝对不会黄，何况几乎是全世界这个领域的事实性规范。</p>]]></content>
      
      
      <categories>
          
          <category> queue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Queue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git基本命令</title>
      <link href="/blog/2019/03/04/Git%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
      <url>/blog/2019/03/04/Git%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>Git命令行基本操作！<br><a id="more"></a></p><h3 id="git-config可以配置git的参数"><a href="#git-config可以配置git的参数" class="headerlink" title="git config可以配置git的参数"></a>git config可以配置git的参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git config --list 查看已经配置的git参数</span><br><span class="line">git config --system user.name &quot;Tocy&quot;所有用户（本系统）</span><br><span class="line">git config --system user.email zyvj@qq.com所有用户（本系统）</span><br><span class="line">git config --global user.name &quot;Tocy&quot;当前用户（全局）</span><br><span class="line">git config --global user.email zyvj@qq.com当前用户（全局）</span><br><span class="line">git config --local user.name &quot;Tocy&quot;本地配置（当前目录）</span><br><span class="line">git config --local user.email zyvj@qq.com  本地配置（当前目录）</span><br></pre></td></tr></table></figure><h3 id="创建Git仓库"><a href="#创建Git仓库" class="headerlink" title="创建Git仓库"></a>创建Git仓库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init初始化当前目录</span><br></pre></td></tr></table></figure><h3 id="克隆Git仓库"><a href="#克隆Git仓库" class="headerlink" title="克隆Git仓库"></a>克隆Git仓库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://git.oschina.net/Tocy/SampleCode.git</span><br></pre></td></tr></table></figure><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">git status# 检查下修改了什么内容</span><br><span class="line">git log --stat      # 仅显示摘要选项</span><br><span class="line">git log --pretty=oneline        # 定制记录格式</span><br><span class="line">git log --graph     # 图像化分支和版本更新</span><br><span class="line">git add . # 提交所有文件到暂存区</span><br><span class="line">git add Readme.md</span><br><span class="line">git add *.png</span><br><span class="line">git add /home/code/</span><br><span class="line">git diff # 查看当前目录的所有修改</span><br><span class="line">git commit -m &quot;注释备注&quot; # 提交代码到本地仓库</span><br><span class="line">git push # 提交代码到远程仓库</span><br><span class="line">git branch # 显示本地当前所有分支</span><br><span class="line">git branch -d test # 删除分支</span><br><span class="line">git branch -D test # 强制删除分支</span><br><span class="line">git checkout -b testing # 直接切换并创建分支</span><br><span class="line">git checkout master # 切换主分支</span><br><span class="line">git merge test # 合并分支的代码</span><br><span class="line">git branch -a # 查看远程仓库所有分支</span><br><span class="line">git push origin test # 推送本地分支到远程仓库</span><br><span class="line">git push  origin --delete test # 删除远程分支</span><br><span class="line">git checkout &quot;git status项目文件路径&quot; # 还原某个文件</span><br><span class="line">git reset --hard &apos;git log中的commit id&apos;还原所有文件到一个版本</span><br><span class="line">git pull # 更新远程仓库最新代码</span><br><span class="line">git reset HEAD &quot;文件路径&quot;     # 撤回暂存区的某个文件</span><br><span class="line">git reset HEAD~     # 撤回本地仓库中的代码到暂存区</span><br><span class="line">git reset# 撤回所有本地仓库中的代码到暂存区</span><br><span class="line">git rm --cached you_file_name # 撤回暂存区中的代码（暂未使用）</span><br><span class="line">git merge dev--合并分支dev的代码（Fast-forward表示快进模式，合并速度快，会直接将Master分支指向Develop分支）</span><br><span class="line">git merge --no-ff dev # 正常工作 master生成新节点，保证版本演变的清晰，建议此方法g&apos;g</span><br><span class="line"></span><br><span class="line"># 回退一个版本,且会将暂存区的内容和本地已提交的内容全部恢复到未暂存的状态,不影响原来本地文件(未提交的也不受影响) </span><br><span class="line">git reset (–mixed) HEAD~1 </span><br><span class="line"># 回退一个版本,不清空暂存区,将已提交的内容恢复到暂存区,不影响原来本地的文件(未提交的也不受影响) </span><br><span class="line">git reset –soft HEAD~1 </span><br><span class="line"># 回退一个版本,清空暂存区,将已提交的内容的版本恢复到本地,本地的文件也将被恢复的版本替换</span><br><span class="line">git reset –hard HEAD~1 </span><br><span class="line"># 强制覆盖远程仓库，从提交记录上还很难查到是谁进行了强制覆盖</span><br><span class="line">git push origin v1.0.0 --force </span><br><span class="line"></span><br><span class="line">#git不需要每次输出用户名密码 生成凭证 第一次需要账号密码</span><br><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Calendar获取日期</title>
      <link href="/blog/2019/01/09/Calendar%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F/"/>
      <url>/blog/2019/01/09/Calendar%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<p>Calendar获取月初月末日期。<a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">SimpleDateFormat startSimpleDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd 00:00:00&quot;);</span><br><span class="line">SimpleDateFormat EndDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd 23:59:59&quot;);</span><br><span class="line">//上月第一天</span><br><span class="line">Calendar calendar = Calendar.getInstance();</span><br><span class="line">System.out.println(&quot;当前时间：&quot;+simpleDateFormat.format(calendar.getTime()));</span><br><span class="line">calendar.add(Calendar.MONTH, -1);</span><br><span class="line">calendar.set(Calendar.DAY_OF_MONTH, 1);</span><br><span class="line">System.out.println(calendar.getTime());</span><br><span class="line">System.out.println(&quot;上月第一天时间：&quot;+startSimpleDateFormat.format(calendar.getTime()));</span><br><span class="line">//上月最后一天</span><br><span class="line">Calendar calendar1 = Calendar.getInstance();</span><br><span class="line">calendar1.set(Calendar.DAY_OF_MONTH, 1);</span><br><span class="line">calendar1.add(Calendar.DATE, -1);</span><br><span class="line">System.out.println(calendar1.getTime());</span><br><span class="line">System.out.println(&quot;上月最后一天：&quot;+EndDateFormat.format(calendar1.getTime()));</span><br><span class="line">//本月第一天</span><br><span class="line">Calendar calendar2 = Calendar.getInstance();</span><br><span class="line">calendar2.set(Calendar.DAY_OF_MONTH, calendar2.getActualMinimum(Calendar.DAY_OF_MONTH));</span><br><span class="line">System.out.println(calendar2.getTime());</span><br><span class="line">System.out.println(&quot;本月第一天：&quot;+startSimpleDateFormat.format(calendar2.getTime()));</span><br><span class="line">//本月最后一天</span><br><span class="line">Calendar calendar3 = Calendar.getInstance();</span><br><span class="line">calendar3.set(Calendar.DAY_OF_MONTH, calendar3.getActualMaximum(Calendar.DAY_OF_MONTH));</span><br><span class="line">System.out.println(calendar3.getTime());</span><br><span class="line">System.out.println(&quot;本月最后一天：&quot;+EndDateFormat.format(calendar3.getTime()));</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>BigDecimal算法</title>
      <link href="/blog/2018/12/24/BigDecimal%E7%AE%97%E6%B3%95/"/>
      <url>/blog/2018/12/24/BigDecimal%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>BigDecimal算法。<a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal bignum1 = new BigDecimal(&quot;10&quot;);  </span><br><span class="line">BigDecimal bignum2 = new BigDecimal(&quot;5&quot;);  </span><br><span class="line">BigDecimal bignum3 = null;  </span><br><span class="line">  </span><br><span class="line">//加法  </span><br><span class="line">bignum3 =  bignum1.add(bignum2);       </span><br><span class="line">System.out.println(&quot;和 是：&quot; + bignum3);  </span><br><span class="line">  </span><br><span class="line">//减法  </span><br><span class="line">bignum3 = bignum1.subtract(bignum2);  </span><br><span class="line">System.out.println(&quot;差  是：&quot; + bignum3);  </span><br><span class="line">  </span><br><span class="line">//乘法  </span><br><span class="line">bignum3 = bignum1.multiply(bignum2);  </span><br><span class="line">System.out.println(&quot;积  是：&quot; + bignum3);  </span><br><span class="line">  </span><br><span class="line">//除法  </span><br><span class="line">bignum3 = bignum1.divide(bignum2);  </span><br><span class="line">System.out.println(&quot;商  是：&quot; + bignum3);  </span><br><span class="line"></span><br><span class="line">//比较</span><br><span class="line">int bignum = bignum1.compareTo(bignum2);</span><br><span class="line">返回的结果是int类型，-1表示小于，0是等于，1是大于。</span><br><span class="line"></span><br><span class="line">BigDecimal decimal = new BigDecimal(&quot;1.12345&quot;);</span><br><span class="line"></span><br><span class="line">//保留四位小数，默认四舍五入</span><br><span class="line">BigDecimal setScale = decimal.setScale(4);</span><br><span class="line">System.out.println(setScale);</span><br><span class="line"></span><br><span class="line">//保留四位小数，直接删除多余的小数</span><br><span class="line">BigDecimal setScale = decimal.setScale(4,BigDecimal.ROUND_DOWN);</span><br><span class="line">System.out.println(setScale);</span><br><span class="line"></span><br><span class="line">//保留四位小数，进位处理</span><br><span class="line">BigDecimal setScale = decimal.setScale(4,BigDecimal.ROUND_UP);</span><br><span class="line">System.out.println(setScale);</span><br><span class="line"></span><br><span class="line">//保留四位小数，四舍五入（2.35变成2.4）</span><br><span class="line">BigDecimal setScale1= decimal.setScale(4,BigDecimal.ROUND_HALF_UP);</span><br><span class="line">System.out.println(setScale);</span><br><span class="line"></span><br><span class="line">//保留四位小数，四舍五入（2.35变成2.3）</span><br><span class="line">BigDecimal setScale = decimal.setScale(4,BigDecimal.ROUND_HALF_DOWN);</span><br><span class="line">System.out.println(setScale);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oracle表恢复到特定时间点</title>
      <link href="/blog/2018/12/13/Oracle%E8%A1%A8%E6%81%A2%E5%A4%8D%E5%88%B0%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4%E7%82%B9/"/>
      <url>/blog/2018/12/13/Oracle%E8%A1%A8%E6%81%A2%E5%A4%8D%E5%88%B0%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>Oracle数据库表恢复到特定时间点。<a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- Create table</span><br><span class="line">create table TEST</span><br><span class="line">(</span><br><span class="line">  id    NUMBER(4),</span><br><span class="line">  name  VARCHAR2(20),</span><br><span class="line">  class VARCHAR2(20),</span><br><span class="line">  score NUMBER</span><br><span class="line">);</span><br><span class="line">-- Insert table</span><br><span class="line">insert into test values (11,&apos;测试10&apos;,&apos;一年三班&apos;,80);</span><br><span class="line">insert into test values (12,&apos;测试11&apos;,&apos;一年二班&apos;,90);</span><br><span class="line">insert into test values (13,&apos;测试12&apos;,&apos;一年一班&apos;,100);</span><br><span class="line">-- 数据库表恢复到特定时间点。</span><br><span class="line">select * from test as of timestamp </span><br><span class="line">  to_timestamp(&apos;2018-12-13 10:18:00&apos;, &apos;yyyy-mm-dd hh24:mi:ss&apos;);</span><br><span class="line">-- 临时表恢复之前的数据</span><br><span class="line">create table 临时表 as</span><br><span class="line">  select * from 你的那个数据被删除的表 as of </span><br><span class="line">  timestamp to_timestamp(&apos;2013-08-13 14:00:00&apos;,  &apos;yyyy-mm-dd hh24:mi:ss&apos;);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ORACLE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oracle查询各班前三名学生信息</title>
      <link href="/blog/2018/11/30/Oracle%E6%9F%A5%E8%AF%A2%E5%90%84%E7%8F%AD%E5%89%8D%E4%B8%89%E5%90%8D%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF/"/>
      <url>/blog/2018/11/30/Oracle%E6%9F%A5%E8%AF%A2%E5%90%84%E7%8F%AD%E5%89%8D%E4%B8%89%E5%90%8D%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>Oracle查询各班前三名学生的信息。<br>row_number函数排序最好用它，每一行记录生成一个序号，依次排序且不会重复。<br>rank函数返回结果集的分区内每行排名，行的排名是相关行之前的排名数加一，重复排序会重复。<br>dense_rank函数的功能与rank函数类似，dense_rank函数在生成序号时是连续的，依次排序会重复。<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from </span><br><span class="line">  (select rank() over(partition by class order by score desc nulls last)rank,</span><br><span class="line">  s.*from test s) t</span><br><span class="line">  where rank &lt;= 3</span><br><span class="line">  order by class asc, score desc;</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2018/11/30/Oracle查询各班前三名学生信息/sql1.png" alt="rank效果展示"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from </span><br><span class="line">  (select row_number()over(partition by class order by score desc nulls last)</span><br><span class="line">  rank,s.*from test s) t</span><br><span class="line">  where rank &lt;= 3</span><br><span class="line">  order by class asc, score desc</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2018/11/30/Oracle查询各班前三名学生信息/sql2.png" alt="row_number效果展示"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from </span><br><span class="line">  (select dense_rank()over(partition by class order by score desc nulls last)</span><br><span class="line">  rank,s.*from test s) t</span><br><span class="line">  where rank &lt;= 3</span><br><span class="line">  order by class asc, score desc</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2018/11/30/Oracle查询各班前三名学生信息/sql3.png" alt="dense_rank效果展示"></p><h2 id="关于Parttion-by："><a href="#关于Parttion-by：" class="headerlink" title="关于Parttion by："></a>关于Parttion by：</h2><ul><li>Parttion by关键字是Oracle中分析性函数的一部分，用于给结果集进行分区。它和聚合函数Group by不同的地方在于它只是将原始数据进行名次排列，能够返回一个分组中的多条记录（记录数不变），而Group by是对原始数据进行聚合统计，一般只有一条反映统计值的结果（每组返回一条）。<br>TIPS：<br>使用rank over()的时候，空值是最大的，如果排序字段为null, 可能造成null字段排在最前面，影响排序结果。<br>可以这样： rank over(partition by course order by score desc nulls last)</li></ul><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><ul><li>在使用排名函数的时候需要注意以下三点：<br>1、排名函数必须有 OVER 子句。<br>2、排名函数必须有包含 ORDER BY 的 OVER 子句。<br>3、分组内从1开始排序。</li></ul>]]></content>
      
      
      <categories>
          
          <category> ORACLE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java获得日期间的所有月份</title>
      <link href="/blog/2018/11/28/Java%E8%8E%B7%E5%BE%97%E6%97%A5%E6%9C%9F%E9%97%B4%E7%9A%84%E6%89%80%E6%9C%89%E6%9C%88%E4%BB%BD/"/>
      <url>/blog/2018/11/28/Java%E8%8E%B7%E5%BE%97%E6%97%A5%E6%9C%9F%E9%97%B4%E7%9A%84%E6%89%80%E6%9C%89%E6%9C%88%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<p>java获得两个日期之间的所有月份及日期之间的间隔。<a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">private static List&lt;String&gt; getMonthBetween(String minDate, String maxDate) </span><br><span class="line"> throws ParseException &#123;</span><br><span class="line">  ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();</span><br><span class="line">  SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM&quot;);//格式化为年月</span><br><span class="line"></span><br><span class="line">  Calendar min = Calendar.getInstance();</span><br><span class="line">  Calendar max = Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">  min.setTime(sdf.parse(minDate));</span><br><span class="line">  min.set(min.get(Calendar.YEAR), min.get(Calendar.MONTH), 1);</span><br><span class="line"></span><br><span class="line">  max.setTime(sdf.parse(maxDate));</span><br><span class="line">  max.set(max.get(Calendar.YEAR), max.get(Calendar.MONTH), 2);</span><br><span class="line"></span><br><span class="line">  Calendar curr = max;</span><br><span class="line">  while (min.before(curr)) &#123;</span><br><span class="line">result.add(sdf.format(curr.getTime()));</span><br><span class="line">curr.add(Calendar.MONTH, -1);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  //得到日期之间的间隔totalMonth</span><br><span class="line">  Calendar calendarStart = Calendar.getInstance();</span><br><span class="line">  int startYear = calendarStart.get(Calendar.YEAR);</span><br><span class="line">  int startMonth = calendarStart.get(Calendar.MONTH);</span><br><span class="line">  Calendar calendarEnd = Calendar.getInstance();</span><br><span class="line">  calendarEnd.setTime(sdf.parse(maxDate));</span><br><span class="line">  int endYear = calendarEnd.get(Calendar.YEAR);</span><br><span class="line">  int endMonth = calendarEnd.get(Calendar.MONTH);</span><br><span class="line">  int totalMonth = 0;</span><br><span class="line">  if (endYear &gt; startYear) &#123;</span><br><span class="line">totalMonth = (endYear-startYear)*12 +(endMonth - startMonth)+1;</span><br><span class="line">  &#125;else if (endYear == startYear) &#123;</span><br><span class="line">totalMonth = endMonth - startMonth+1;</span><br><span class="line">  &#125;else &#123;</span><br><span class="line">throw new ParameterException(&quot;结束时间不能小于开始时间&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws ParseException &#123;</span><br><span class="line">  List&lt;String&gt; list= getMonthBetween(&quot;2018-10&quot;,&quot;2019-10&quot;);</span><br><span class="line">  for(String date : list) &#123;</span><br><span class="line">    System.out.println(date);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git添加Tag用法</title>
      <link href="/blog/2018/11/14/Git%E6%B7%BB%E5%8A%A0Tag%E7%94%A8%E6%B3%95/"/>
      <url>/blog/2018/11/14/Git%E6%B7%BB%E5%8A%A0Tag%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>作为版本管理工具，Git可以对某个版本打上标签(tag)，表示本版本为发行版。这样一个不可修改的历史代码版本就像被我们封存起来一样,不论是运维发布拉取,或者以后的代码版本管理,都是十分方便的。<br><a id="more"></a><br>Git标签分为两类：<br>1、轻量级的：它其实是一个独立的分支,或者说是一个不可变的分支.指向特定提交对象的引用<br>2、带附注的：实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，标签说明，标签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证,电子邮件地址和日期，一般我们都建议使用含附注型的标签，以便保留相关信息</p><h2 id="查看标签"><a href="#查看标签" class="headerlink" title="查看标签"></a>查看标签</h2><h3 id="打印所有标签"><a href="#打印所有标签" class="headerlink" title="打印所有标签"></a>打印所有标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><h3 id="打印符合检索条件的标签"><a href="#打印符合检索条件的标签" class="headerlink" title="打印符合检索条件的标签"></a>打印符合检索条件的标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -l &lt;版本号&gt;</span><br></pre></td></tr></table></figure><p>如 <code>git tag -l 1.*.*</code> 为搜索一级版本为1的版本</p><h3 id="查看对应标签状态"><a href="#查看对应标签状态" class="headerlink" title="查看对应标签状态"></a>查看对应标签状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;版本号&gt;</span><br></pre></td></tr></table></figure><h2 id="创建本地标签"><a href="#创建本地标签" class="headerlink" title="创建本地标签"></a>创建本地标签</h2><h3 id="创建轻量标签"><a href="#创建轻量标签" class="headerlink" title="创建轻量标签"></a>创建轻量标签</h3><p>轻量标签指向一个发行版的分支，其只是一个像某commit的引用，不存储名称时间戳及标签说明等信息。定义方法如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;版本号&gt;-light</span><br></pre></td></tr></table></figure></p><h3 id="创建带附注标签"><a href="#创建带附注标签" class="headerlink" title="创建带附注标签"></a>创建带附注标签</h3><p>相对于轻量标签，附注标签是一个独立的标签对象，包含了名称时间戳以及标签备注等信息，同时指向对应的commit。定义方法如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;版本号&gt; -m &quot;&lt;备注信息&gt;&quot;</span><br></pre></td></tr></table></figure></p><p>同时我们也可以像特定的commit添加标签，使用该commit对应的SHA值即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;版本号&gt; &lt;SHA值&gt; -m &quot;&lt;备注信息&gt;&quot;</span><br></pre></td></tr></table></figure></p><p>比如 <code>git tag -a 1.0.0 0c3b62d -m &quot;Release Edition v1.0.0&quot;</code> 就是为SHA为0c3b62d的这次提交打了1.0发行版的tag</p><h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><h3 id="删除本地标签"><a href="#删除本地标签" class="headerlink" title="删除本地标签"></a>删除本地标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d &lt;版本号&gt;</span><br></pre></td></tr></table></figure><h3 id="删除远程仓库的标签"><a href="#删除远程仓库的标签" class="headerlink" title="删除远程仓库的标签"></a>删除远程仓库的标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete &lt;版本号&gt; #新版本Git (&gt; v1.7.0)</span><br></pre></td></tr></table></figure><h2 id="推送标签"><a href="#推送标签" class="headerlink" title="推送标签"></a>推送标签</h2><h3 id="推送所有标签"><a href="#推送所有标签" class="headerlink" title="推送所有标签"></a>推送所有标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><h3 id="推送指定版本的标签"><a href="#推送指定版本的标签" class="headerlink" title="推送指定版本的标签"></a>推送指定版本的标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;版本号&gt;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>最后总结一下常用命令，方便查阅。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 创建标签(本地)</span><br><span class="line">// 创建轻量标签</span><br><span class="line">git tag 1.0.0-light</span><br><span class="line">// 创建带备注标签(推荐)</span><br><span class="line">git tag -a 1.0.0 -m &quot;这是备注信息&quot;</span><br><span class="line">// 针对特定commit版本SHA创建标签</span><br><span class="line">git tag -a 1.0.0 0c3b62d -m &quot;这是备注信息&quot;</span><br><span class="line"></span><br><span class="line">// 查看标签</span><br><span class="line">// 打印所有标签</span><br><span class="line">git tag</span><br><span class="line">// 打印符合检索条件的标签</span><br><span class="line">git tag -l 1.*.*</span><br><span class="line">// 查看对应标签状态</span><br><span class="line">git checkout 1.0.0</span><br><span class="line"></span><br><span class="line">// 将本地标签发布到远程仓库</span><br><span class="line">// 发送所有</span><br><span class="line">git push origin --tags</span><br><span class="line">// 指定版本发送</span><br><span class="line">git push origin 1.0.0</span><br><span class="line"></span><br><span class="line">// 删除标签(本地)</span><br><span class="line">git tag -d 1.0.0</span><br><span class="line"></span><br><span class="line">// 删除远程仓库对应标签</span><br><span class="line">// Git版本 &gt; V1.7.0</span><br><span class="line">git push origin --delete 1.0.0</span><br><span class="line">// 旧版本Git</span><br><span class="line">git push origin :refs/tags/1.0.0</span><br></pre></td></tr></table></figure></p><p>参考博客：<a href="https://www.jianshu.com/p/8956a9cfa9da" target="_blank" rel="noopener">使用Git添加Tag的方法</a></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo实现github+coding双线部署</title>
      <link href="/blog/2018/11/08/Hexo%E5%AE%9E%E7%8E%B0github-coding%E5%8F%8C%E7%BA%BF%E9%83%A8%E7%BD%B2/"/>
      <url>/blog/2018/11/08/Hexo%E5%AE%9E%E7%8E%B0github-coding%E5%8F%8C%E7%BA%BF%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<p>Hexo是一个开源的静态博客框架，支持markdown文档，应用起来很方便而且有丰富的主题模板可供选择，是建立个性化的个人博客的不二之选，因为GitHub在国内访问速度较慢，因此选择Coding.从网上搜索的结果来看，很多人都认为github博客在国内的seo情况不太好，不被百度爬虫所青睐。一个比较好的方案是，同时将hexo博客部署到github和Coding上。<br><a id="more"></a></p><h3 id="第一步：注册Coding账号"><a href="#第一步：注册Coding账号" class="headerlink" title="第一步：注册Coding账号"></a>第一步：注册<a href="https://coding.net/" target="_blank" rel="noopener">Coding</a>账号</h3><h3 id="第二步：Coding应用配置"><a href="#第二步：Coding应用配置" class="headerlink" title="第二步：Coding应用配置"></a>第二步：Coding应用配置</h3><p><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding1.png" alt="项目-项目名称-创建项目"></p><h3 id="第三步：配置SSH公钥"><a href="#第三步：配置SSH公钥" class="headerlink" title="第三步：配置SSH公钥"></a>第三步：配置SSH公钥</h3><p>我们要想生成SSH key，首先就得先安装 SSH，对于 Linux 和 Mac 系统，其默认是安装 SSH 的，而对于 Windows 系统，其默认是不安装 SSH 的，不过由于我们安装了 Git Bash，其也应该自带了 SSH. 可以通过在 Git Bash 中输入ssh命令，查看本机是否安装 SSH：<br> <img src="/blog/2018/11/08/Hexo实现github-coding双线部署/ssh0.png" alt="查看是否安装ssh"><br>初次使用git的用户要使用git协议大概需要三个步骤：<br>一、生成密钥对<br>二、设置远程仓库（本文以github为例）上的公钥<br>三、把git的 remote url 修改为git协议（以上两个步骤初次设置过以后，以后使用都不需要再次设置，此步骤视以后项目的remote url而定，如果以后其他项目的协议为https则需要此步骤）<br>打开Hexo安装目录，右键git bash here点击<br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/ssh1.png" alt="输入cd ~/.ssh回车-看你是否有了ssh key 密钥，有了就备份"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/ssh2.png" alt="生成密钥"><br>打开你的id_rsa.pub文件，复制下里面的内容，然后登录进去你的coding；<br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding3.png" alt="密钥位置C:\Users\用户名\.ssh"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding2.png" alt="个人设置-SSH公钥-新增公钥"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding4.png" alt="把id_rsa.pub内容复制到公式内容-添加即可"></p><h3 id="第四步：初始化部署仓库"><a href="#第四步：初始化部署仓库" class="headerlink" title="第四步：初始化部署仓库"></a>第四步：初始化部署仓库</h3><p><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding5.png" alt="三种基本初始化方法"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding6.png" alt="复制"></p><ul><li>修改博客站点_config.yml</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">#（修改coding的路径，实现coding及github同时部署）</span><br><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repository: </span><br><span class="line">    github: git@github.com:wangrui15034005712/blog.git,master</span><br><span class="line">    coding: https://git.dev.tencent.com/wangrui15034005712/demo.git,master</span><br></pre></td></tr></table></figure><ul><li>在gitbash上输入hexo clean 、hexo g再hexo d<br>这样你的博客就被部署到Coding上了<br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding7.png" alt="pages服务-一键开启pages服务"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding8.png" alt=""><h3 id="第五步：域名配置"><a href="#第五步：域名配置" class="headerlink" title="第五步：域名配置"></a>第五步：域名配置</h3>进入域名控制台，如有不理解之处可查看<a href="https://lastsummer.top/blog/2018/10/19/Hexo-Github搭建个人博客二">Hexo-Github搭建个人博客二</a><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding10.png" alt="按图片配置成功即可，先配置Coding再配置Gihub，否则域名未连通"><br><img src="/blog/2018/11/08/Hexo实现github-coding双线部署/coding9.png" alt="点击设置-绑定新域名-确定"></li></ul><p>大功告成！</p><p>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>参考博客：<a href="https://blog.csdn.net/weixin_41196185/article/details/79234078" target="_blank" rel="noopener">hexo+github打造个人博客系列之Coding托管（实现github+coding双线部署）</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客用自己的页面做首页</title>
      <link href="/blog/2018/11/07/Hexo%E5%8D%9A%E5%AE%A2%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%81%9A%E9%A6%96%E9%A1%B5/"/>
      <url>/blog/2018/11/07/Hexo%E5%8D%9A%E5%AE%A2%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%81%9A%E9%A6%96%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<ul><li>Hexo博客用自己的页面做首页。个人网站 <a href="https://lastsummer.top">去年夏天</a> 欢迎大家的访问！</li></ul><a id="more"></a><p><img src="/blog/2018/11/07/Hexo博客用自己的页面做首页/index1.png" alt="效果展示"></p><ul><li>Demo地址：<a href="https://lastsummer.top">https://lastsummer.top</a><br>Demo仓库：<a href="https://github.com/wangrui15034005712/wangrui15034005712.github.io" target="_blank" rel="noopener">https://github.com/wangrui15034005712/wangrui15034005712.github.io</a><br>那么接下来是教程，本教程的前提已经用hexo将博客搭建在 xxxxxx.github.io的repository上<br>那么现在你要做的有以下几步</li></ul><h2 id="新建一个仓库"><a href="#新建一个仓库" class="headerlink" title="新建一个仓库"></a>新建一个仓库</h2><ul><li>名字随便起 我起了 <strong>blog</strong><br>那么现在你有了一个空的仓库<strong>repository</strong><br>然后本地clone下按照提示初始化一个主<strong>master</strong>分支<br>访问xxxxxx.github.io/blog成功即可</li></ul><h2 id="修改博客站点-config-yml"><a href="#修改博客站点-config-yml" class="headerlink" title="修改博客站点_config.yml"></a>修改博客站点_config.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</span><br><span class="line">url: https://xxxxxx.github.io/blog(改这里)</span><br><span class="line">root: /blog(改这里)</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/xxxxxx/blog.git(改这里)</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h2 id="重新部署你的博客"><a href="#重新部署你的博客" class="headerlink" title="重新部署你的博客"></a>重新部署你的博客</h2><ul><li>在对应的文件下在gitbash上输入hexo clean 、hexo g再hexo d<br>这样你的博客就被部署到<code>https://xxxxxx.github.io/blog/</code>上了</li></ul><h2 id="清空原来的仓库"><a href="#清空原来的仓库" class="headerlink" title="清空原来的仓库"></a>清空原来的仓库</h2><ul><li>现在原来那个xxxxxx.github.io的repository你就可以清空<br>或者直接删除重新新建xxxxxx.github.io的repository（进入想要删除的仓库，点击setting 占到delete this repository 在弹窗里输入仓库名，确认即可）<br>然后新建一个index.html，把你自定义页面的代码复制到里面就好了，<br>然后可以通过<code>&lt;a href=&quot;blog/&quot;&gt;&lt;/a&gt;</code>跳转到你的博客界面了<br>可以使用Demo进行配置，已在参考博客Demo代码中进行了优化</li></ul><p>大功告成！</p><p>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>参考博客：<a href="http://blog.lightina.cn/2016/10/27/HexoOverview/" target="_blank" rel="noopener">Hexo-用自己的页面做首页</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客添加返回顶部按钮</title>
      <link href="/blog/2018/11/06/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE/"/>
      <url>/blog/2018/11/06/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE/</url>
      
        <content type="html"><![CDATA[<p>Hexo博客添加返回顶部按钮。<br><a id="more"></a><br><img src="/blog/2018/11/06/Hexo博客添加返回顶部按钮/top1.png" alt="效果展示"></p><h3 id="返回顶部模块代码"><a href="#返回顶部模块代码" class="headerlink" title="返回顶部模块代码"></a>返回顶部模块代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;top gongyong&quot;&gt;</span><br><span class="line">    &lt;a href=&quot;javascript:void(0);&quot;&gt;顶部&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;bottom gongyong&quot;&gt;</span><br><span class="line">    &lt;a href=&quot;javascript:void(0);&quot;&gt;底部&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">body &#123;</span><br><span class="line">position:relative;</span><br><span class="line">&#125;</span><br><span class="line">.gongyong a &#123;</span><br><span class="line">width:50px;</span><br><span class="line">height:50px;</span><br><span class="line">background:#fff;</span><br><span class="line">color:#000;</span><br><span class="line">position:fixed;</span><br><span class="line">text-align:center;</span><br><span class="line">line-height:50px;</span><br><span class="line">right:2%;</span><br><span class="line">text-decoration:none;</span><br><span class="line">transition:all 0.5s;</span><br><span class="line">display:none;</span><br><span class="line">&#125;</span><br><span class="line">.top a &#123;</span><br><span class="line">top:70%;</span><br><span class="line">&#125;</span><br><span class="line">.bottom a &#123;</span><br><span class="line">top:80%;</span><br><span class="line">&#125;</span><br><span class="line">.gongyong a.hover &#123;</span><br><span class="line">background:#e14da0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(function() &#123;</span><br><span class="line">    $(window).scroll(function() &#123;</span><br><span class="line">        if ($(window).scrollTop() &gt;= 300) &#123;</span><br><span class="line">            $(&apos;.gongyong a&apos;).fadeIn(600);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            $(&apos;.gongyong a&apos;).fadeOut(600);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&apos;.gongyong a&apos;).hover(function() &#123;</span><br><span class="line">        $(this).addClass(&apos;hover&apos;);</span><br><span class="line">    &#125;, function() &#123;</span><br><span class="line">        $(this).removeClass(&apos;hover&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&apos;.top a&apos;).click(function() &#123;</span><br><span class="line">        $(&quot;html,body&quot;).animate(&#123;</span><br><span class="line">            scrollTop: 0</span><br><span class="line">        &#125;, 500);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&apos;.bottom a&apos;).click(function() &#123;</span><br><span class="line">        $(&quot;html,body&quot;).animate(&#123;</span><br><span class="line">            scrollTop: $(document).height()</span><br><span class="line">        &#125;, 500);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>大功告成！</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo添加评论功能</title>
      <link href="/blog/2018/11/05/Hexo%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/"/>
      <url>/blog/2018/11/05/Hexo%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>目前博客站点使用的评论功能，多说，网易云跟贴都已经下线。Disqus也被挡在墙外，友言貌似也不行。<br><a id="more"></a></p><h2 id="可用的评论系统大概有"><a href="#可用的评论系统大概有" class="headerlink" title="可用的评论系统大概有"></a>可用的评论系统大概有</h2><ul><li>来必力：<a href="https://livere.com" target="_blank" rel="noopener">https://livere.com</a> （来自韩国，使用邮箱注册）</li><li>畅言： <a href="http://changyan.kuaizhan.com" target="_blank" rel="noopener">http://changyan.kuaizhan.com</a> （安装需要备案号）</li><li>Valine: <a href="https://github.com/xCss/Valine" target="_blank" rel="noopener">https://github.com/xCss/Valine</a> (用了下没效果，应该是我的主题没有集成Valine，支持Next）</li></ul><p>综上，最终采用了来必力及畅言。</p><h2 id="来必力"><a href="#来必力" class="headerlink" title="来必力"></a>来必力</h2><h3 id="注册官网"><a href="#注册官网" class="headerlink" title="注册官网"></a>注册官网</h3><ul><li>打开来必力官网 <a href="https://livere.com" target="_blank" rel="noopener">https://livere.com</a><br><img src="/blog/2018/11/05/Hexo添加评论功能/comment1.png" alt="体验-现在安装（免费）"><br><img src="/blog/2018/11/05/Hexo添加评论功能/comment2.png" alt="data-uid记录下来-点击copy"></li></ul><h3 id="安装及配置"><a href="#安装及配置" class="headerlink" title="安装及配置"></a>安装及配置</h3><p><code>themes\hexo-theme-shana-master\layout\_partial\comments</code> 下新建 <code>livere.ejs</code>(如不存在目录就新建即可) 把复制的内容粘贴进来；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 来必力City版安装代码 --&gt;</span><br><span class="line">&lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;&lt;%= theme.livere_uid %&gt;&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">var refer = &quot;&#123;Permalink&#125;&quot;.replace(&quot;http://&quot;,&quot;&quot;);</span><br><span class="line">   (function(d, s) &#123;</span><br><span class="line">       var j, e = d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       if (typeof LivereTower === &apos;function&apos;) &#123; return; &#125;</span><br><span class="line"></span><br><span class="line">       j = d.createElement(s);</span><br><span class="line">       j.src = &apos;https://cdn-city.livere.com/js/embed.dist.js&apos;;</span><br><span class="line">       j.async = true;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, &apos;script&apos;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt;为正常使用来必力评论功能请激活JavaScript&lt;/noscript&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- City版安装代码已完成 --&gt;</span><br></pre></td></tr></table></figure></p><p>在 <code>themes\hexo-theme-shana-master\layout\_partial\article.ejs</code> 中的内容底部添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.comments &amp;&amp; theme.livere.on)&#123; %&gt;</span><br><span class="line">  &lt;%- partial(&apos;comments/livere&apos;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p><p>在主题<code>themes\hexo-theme-shana-master\_config.yml</code>添加内容如下(livere_uid就是data-uid)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#来必力</span><br><span class="line">livere:</span><br><span class="line">   on: true</span><br><span class="line">   livere_uid: ###############</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2018/11/05/Hexo添加评论功能/comment3.png" alt="来必力效果展示"><br>来必力就已经集成到自己的博客中啦！</p><h2 id="畅言"><a href="#畅言" class="headerlink" title="畅言"></a>畅言</h2><h3 id="注册官网-1"><a href="#注册官网-1" class="headerlink" title="注册官网"></a>注册官网</h3><ul><li>打开畅言官网 <a href="http://changyan.kuaizhan.com/" target="_blank" rel="noopener">http://changyan.kuaizhan.com/</a><br><img src="/blog/2018/11/05/Hexo添加评论功能/comment4.png" alt="点击后台总览-获取畅言密匙"><br><img src="/blog/2018/11/05/Hexo添加评论功能/comment5.png" alt="点击安装畅言-通用代码安装-点击复制代码"></li></ul><h3 id="安装及配置-1"><a href="#安装及配置-1" class="headerlink" title="安装及配置"></a>安装及配置</h3><p><code>themes\hexo-theme-shana-master\layout\_partial\comments</code> 下新建 <code>changyan.ejs</code>(如不存在目录就新建即可) 把复制的内容粘贴进来；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--PC和WAP自适应版 sid=&quot;请将此处替换为配置SourceID的语句&quot;--&gt;</span><br><span class="line">&lt;div id=&quot;SOHUCS&quot;&gt;&lt;/div&gt; </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt; </span><br><span class="line">(function()&#123; </span><br><span class="line">var appid = &apos;修改成自己的畅言APP ID&apos;; </span><br><span class="line">var conf = &apos;修改成自己的畅言APP KEY&apos;; </span><br><span class="line">var width = window.innerWidth || document.documentElement.clientWidth; </span><br><span class="line">if (width &lt; 960) &#123;</span><br><span class="line">  window.document.write(&apos;&lt;script id=&quot;changyan_mobile_js&quot; charset=&quot;utf-8&quot; type=&quot;text/javascript&quot; src=&quot;https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=&apos; + appid + &apos;&amp;conf=&apos; + conf + &apos;&quot;&gt;&lt;\/script&gt;&apos;); </span><br><span class="line">&#125; else &#123; </span><br><span class="line">  var loadJs=function(d,a)&#123;</span><br><span class="line">  var c=document.getElementsByTagName(&quot;head&quot;)[0]||document.head||document.documentElement;</span><br><span class="line">  var b=document.createElement(&quot;script&quot;);</span><br><span class="line">  b.setAttribute(&quot;type&quot;,&quot;text/javascript&quot;);</span><br><span class="line">  b.setAttribute(&quot;charset&quot;,&quot;UTF-8&quot;);</span><br><span class="line">  b.setAttribute(&quot;src&quot;,d);</span><br><span class="line">  if(typeof a===&quot;function&quot;)&#123;</span><br><span class="line">  if(window.attachEvent)&#123;</span><br><span class="line">  b.onreadystatechange=function()&#123;</span><br><span class="line">  var e=b.readyState;if(e===&quot;loaded&quot;||e===&quot;complete&quot;)&#123;</span><br><span class="line">  b.onreadystatechange=null;a()&#125;&#125;&#125;else&#123;b.onload=a&#125;&#125;c.appendChild(b)&#125;;</span><br><span class="line">  loadJs(&quot;https://changyan.sohu.com/upload/changyan.js&quot;,</span><br><span class="line">  function()&#123;window.changyan.api.config(&#123;appid:appid,conf:conf&#125;)&#125;); &#125; </span><br><span class="line">  &#125;)(); </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>在 <code>themes\hexo-theme-shana-master\layout\_partial\article.ejs</code> 中的内容底部添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.comments &amp;&amp; theme.changyan.on)&#123; %&gt;</span><br><span class="line">&lt;%- partial(&apos;comments/changyan&apos;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p><p>在主题<code>themes\hexo-theme-shana-master\_config.yml</code>添加内容如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#畅言</span><br><span class="line">changyan:</span><br><span class="line">   on: true</span><br></pre></td></tr></table></figure></p><p><img src="/blog/2018/11/05/Hexo添加评论功能/comment6.png" alt="畅言效果展示"><br>畅言就已经集成到自己的博客中啦！</p><ul><li>如果要修改来必力及畅言评论的样式，可以在官网进行相关配置：<br>1、评论管理<br>2、评论审核<br>3、评论数据统计<br>4、系统配置</li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zookeeper安装和使用 windows环境</title>
      <link href="/blog/2018/10/30/zookeeper%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-windows%E7%8E%AF%E5%A2%83/"/>
      <url>/blog/2018/10/30/zookeeper%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-windows%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>1、ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。<a id="more"></a><br>2、ZooKeeper的目标就是封装好复杂易出错的关键服务，将简单易用的接口和性能高效、功能稳定的系统提供给用户。<br>3、ZooKeeper包含一个简单的原语集，提供Java和C的接口。<br>4、ZooKeeper代码版本中，提供了分布式独享锁、选举、队列的接口，代码在zookeeper-3.4.12\src\recipes。其中分布锁和队列有Java和C两个版本，选举只有Java版本。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>Apache官方最新版本为：3.4.12<br>下载地址：<a href="http://mirror.bit.edu.cn/apache/zookeeper/stable/zookeeper-3.4.12.tar.gz" target="_blank" rel="noopener">http://mirror.bit.edu.cn/apache/zookeeper/stable/zookeeper-3.4.12.tar.gz</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>解压到指定目录下    D:\dubbo\zookeeper-3.4.12<br>修改zoo_sample.cfg 文件名(D:\dubbo\zookeeper-3.4.12\conf) 为 zoo.cfg<br>主要修改一下日志位置，具体配置文件如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick</span><br><span class="line">#tickTime：这个时间是作为 Zookeeper 服务器之间或客户端与服务器之间维持心跳的时间间隔，也就是每个 tickTime 时间就会发送一个心跳。  </span><br><span class="line">#默认情况下最小的会话超时时间为两倍的tickTime  </span><br><span class="line">tickTime=2000</span><br><span class="line"># The number of ticks that the initial   </span><br><span class="line"># synchronization phase can take  </span><br><span class="line">#zookeeper集群中的包含多台server, 其中一台为leader, 集群中其余的server为follower. initLimit参数配置初始化连接时,   </span><br><span class="line">#follower和leader之间的最长心跳时间. 此时该参数设置为5, 说明时间限制为5倍tickTime, 即5*2000=10000ms=10s.  </span><br><span class="line">initLimit=10</span><br><span class="line"># The number of ticks that can pass between </span><br><span class="line"># sending a request and getting an acknowledgement</span><br><span class="line">#该参数配置leader和follower之间发送消息, 请求和应答的最大时间长度. 此时该参数设置为2, 说明时间限制为2倍tickTime, 即4000ms.  </span><br><span class="line">syncLimit=5</span><br><span class="line"># the directory where the snapshot is stored.</span><br><span class="line"># do not use /tmp for storage, /tmp here is just </span><br><span class="line"># example sakes.</span><br><span class="line">#dataDir：顾名思义就是 Zookeeper 保存数据的目录，默认情况下，Zookeeper 将写数据的日志文件也保存在这个目录里。  </span><br><span class="line">dataDir=D:\\dubbo\\zookeeper-3.4.12-1\\data</span><br><span class="line">#dataLogDir：顾名思义就是 Zookeeper 保存日志文件的目录  </span><br><span class="line">dataLogDir=D:\\dubbo\\zookeeper-3.4.12-1\\log</span><br><span class="line"># the port at which the clients will connect</span><br><span class="line">#clientPort：这个端口就是客户端连接 Zookeeper 服务器的端口，Zookeeper 会监听这个端口，接受客户端的访问请求。  </span><br><span class="line">clientPort=2181</span><br><span class="line"># the maximum number of client connections.</span><br><span class="line"># increase this if you need to handle more clients</span><br><span class="line">#maxClientCnxns：限制连接到 ZooKeeper 的客户端的数量  </span><br><span class="line">#maxClientCnxns=60</span><br><span class="line">#</span><br><span class="line"># Be sure to read the maintenance section of the </span><br><span class="line"># administrator guide before turning on autopurge.</span><br><span class="line">#</span><br><span class="line"># http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance</span><br><span class="line">#</span><br><span class="line"># The number of snapshots to retain in dataDir</span><br><span class="line">#autopurge.snapRetainCount=3</span><br><span class="line"># Purge task interval in hours</span><br><span class="line"># Set to &quot;0&quot; to disable auto purge feature</span><br><span class="line">#autopurge.purgeInterval=1</span><br></pre></td></tr></table></figure></p><p>配置文件简单解析<br>1、tickTime：这个时间是作为 Zookeeper 服务器之间或客户端与服务器之间维持心跳的时间间隔，也就是每个 tickTime 时间就会发送一个心跳。<br>2、dataDir：顾名思义就是 Zookeeper 保存数据的目录，默认情况下，Zookeeper 将写数据的日志文件也保存在这个目录里。<br>3、dataLogDir：顾名思义就是 Zookeeper 保存日志文件的目录<br>4、clientPort：这个端口就是客户端连接 Zookeeper 服务器的端口，Zookeeper 会监听这个端口，接受客户端的访问请求。</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>进入到bin目录，并且启动zkServer.cmd，这个脚本中会启动一个java进程(不可关闭，造成客户端无法访问)<br><img src="/blog/2018/10/30/zookeeper安装和使用-windows环境/zookeeper1.png" alt=""><br>启动后jps可以看到QuorumPeerMain的进程<br><img src="/blog/2018/10/30/zookeeper安装和使用-windows环境/zookeeper2.png" alt=""><br>也可以启动客户端连接一下<br><img src="/blog/2018/10/30/zookeeper安装和使用-windows环境/zookeeper3.png" alt=""><br>OK，安装成功，很简单。</p><p>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>参考博客：<a href="https://blog.csdn.net/tlk20071/article/details/52028945" target="_blank" rel="noopener">zookeeper安装和使用 windows环境</a></p>]]></content>
      
      
      <categories>
          
          <category> RPC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Dubbo入门---搭建一个最简单的Demo框架</title>
      <link href="/blog/2018/10/30/Dubbo%E5%85%A5%E9%97%A8-%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84Demo%E6%A1%86%E6%9E%B6/"/>
      <url>/blog/2018/10/30/Dubbo%E5%85%A5%E9%97%A8-%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84Demo%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="Dubbo背景和简介"><a href="#Dubbo背景和简介" class="headerlink" title="Dubbo背景和简介"></a>Dubbo背景和简介</h2><p>Dubbo开始于电商系统，因此在这里先从电商系统的<strong>演变</strong>讲起。<br><a id="more"></a><br>1.单一应用框架(ORM)<br>当网站流量很小时，只需一个应用，将所有功能如下单支付等都部署在一起，以减少部署节点和成本。<br><strong>缺点：</strong>单一的系统架构，使得在开发过程中，占用的资源越来越多，而且随着流量的增加越来越难以维护。<br><br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo1.png" alt=""><br>2.垂直应用框架(MVC)<br>垂直应用架构解决了单一应用架构所面临的扩容问题，流量能够分散到各个子系统当中，且系统的体积可控，一定程度上降低了开发人员之间协同以及维护的成本，提升了开发效率。<br><strong>缺点：</strong>但是在垂直架构中相同逻辑代码需要不断的复制，不能复用。 <br><br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo2.png" alt=""><br>3.分布式应用架构(RPC)<br>当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心。<br><br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo3.png" alt=""><br>4.流动计算架构(SOA)<br>随着服务化的进一步发展，服务越来越多，服务之间的调用和依赖关系也越来越复杂，诞生了面向服务的架构体系(SOA)，也因此衍生出了一系列相应的技术，如对服务提供、服务调用、连接处理、通信协议、序列化方式、服务发现、服务路由、日志输出等行为进行封装的服务框架。<br><br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo4.png" alt="电商系统的演变可以看出架构演变的过程"></p><ul><li>单一应用架构<ul><li>当网站流量很小时，只需一个应用，将所有功能都部署在一起，以减少部署节点和成本。</li><li>此时，用于简化增删改查工作量的 数据访问框架(ORM) 是关键。</li></ul></li><li>垂直应用架构<ul><li>当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，将应用拆成互不相干的几个应用，以提升效率。</li><li>此时，用于加速前端页面开发的 Web框架(MVC) 是关键。</li></ul></li><li>分布式服务架构 <ul><li>当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。</li><li>此时，用于提高业务复用及整合的 分布式服务框架(RPC) 是关键。</li></ul></li><li>流动计算架构 <ul><li>当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。</li><li>此时，用于提高机器利用率的 资源调度和治理中心(SOA) 是关键。</li></ul></li></ul><hr><h2 id="Dubbo是什么"><a href="#Dubbo是什么" class="headerlink" title="Dubbo是什么"></a>Dubbo是什么</h2><p>Dubbo是：<br>一款分布式服务框架<br>高性能和透明化的RPC远程服务调用方案<br>SOA服务治理方案<br>每天为2千多个服务提供大于30亿次访问量支持，并被广泛应用于阿里巴巴集团的各成员站点以及别的公司的业务中。</p><hr><h2 id="Dubbo架构"><a href="#Dubbo架构" class="headerlink" title="Dubbo架构"></a>Dubbo架构</h2><p><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo5.png" alt=""><br><strong>Provider: </strong>暴露服务的服务提供方。<br><strong>Consumer: </strong>调用远程服务的服务消费方。<br><strong>Registry: </strong>服务注册与发现的注册中心。<br><strong>Monitor: </strong>统计服务的调用次数和调用时间的监控中心。</p><p><strong>调用流程</strong><br>0.服务容器负责启动，加载，运行服务提供者。<br>1.服务提供者在启动时，向注册中心注册自己提供的服务。<br>2.服务消费者在启动时，向注册中心订阅自己所需的服务。<br>3.注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。<br>4.服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。<br>5.服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</p><hr><h2 id="Dubbo注册中心"><a href="#Dubbo注册中心" class="headerlink" title="Dubbo注册中心"></a>Dubbo注册中心</h2><p>对于服务提供方，它需要发布服务，而且由于应用系统的复杂性，服务的数量、类型也不断膨胀；<br>对于服务消费方，他关心如何获取到它所需要的服务，而面对复杂的应用系统，需要管理大量的服务调用。<br>对于服务提供方和服务消费方来说，他们还有可能兼具这两种角色，即既需要提供服务，有需要消费服务。</p><p>通过将服务统一管理起来，可以有效地优化内部应用对服务发布/使用的流程和管理。服务注册中心可以通过特定协议来完成服务对外的统一。</p><p><strong>Dubbo提供的注册中心有如下几种类型可供选择：</strong></p><ul><li>Multicast注册中心</li><li>Zookeeper注册中心</li><li>Redis注册中心</li><li>Simple注册中心</li></ul><hr><h2 id="Dubbo优缺点"><a href="#Dubbo优缺点" class="headerlink" title="Dubbo优缺点"></a>Dubbo优缺点</h2><p><strong>优点：</strong><br>1.透明化的远程方法调用<br>&nbsp;&nbsp;&nbsp;&nbsp;像调用本地方法一样调用远程方法；只需简单配置，没有任何API侵入。<br>2.软负载均衡及容错机制<br>&nbsp;&nbsp;&nbsp;&nbsp;可在内网替代nginx lvs等硬件负载均衡器。<br>3.服务注册中心自动注册 &amp; 配置管理<br>&nbsp;&nbsp;&nbsp;&nbsp;不需要写死服务提供者地址，注册中心基于接口名自动查询提供者ip。<br>&nbsp;&nbsp;&nbsp;&nbsp;使用类似zookeeper等分布式协调服务作为服务注册中心，可以将绝大部分项目配置移入zookeeper集群。<br>4.服务接口监控与治理<br>&nbsp;&nbsp;&nbsp;&nbsp;Dubbo-admin与Dubbo-monitor提供了完善的服务接口管理与监控功能，针对不同应用的不同接口，可以进行 多版本，多协议，多注册中心管理。<br><strong>缺点：</strong>只支持JAVA语言</p><hr><h2 id="Dubbo入门Demo"><a href="#Dubbo入门Demo" class="headerlink" title="Dubbo入门Demo"></a>Dubbo入门Demo</h2><p>了解了Dubbo以后，自然要搭建一个简单的Demo实现。本文采用Dubbo与Zookeeper、Spring框架的整合。<br><strong>主要步骤：</strong><br>1.安装Zookeeper,启动；<br>2.创建MAVEN项目，构建Dubbo+Zookeeper+Spring实现的简单Demo；<br>3.安装Dubbo-admin，实现监控。</p><h3 id="Zookeeper介绍与安装"><a href="#Zookeeper介绍与安装" class="headerlink" title="Zookeeper介绍与安装"></a>Zookeeper介绍与安装</h3><p>本Demo中的Dubbo注册中心采用的是Zookeeper。为什么采用Zookeeper呢？<br>Zookeeper是一个分布式的服务框架，是树型的目录服务的数据存储，能做到集群管理数据 ，这里能很好的作为Dubbo服务的注册中心。<br>Dubbo能与Zookeeper做到集群部署，当提供者出现断电等异常停机时，Zookeeper注册中心能自动删除提供者信息，当提供者重启时，能自动恢复注册数据，以及订阅请求。<br>具体的安装方法在此不一一叙述，可参考博文： <a href="https://lastsummer.top/blog/2018/10/30/zookeeper安装和使用-windows环境/">zookeeper安装和使用 windows环境</a><br><br>安装完成后，进入到bin目录，并且启动zkServer.cmd，这个脚本中会启动一个java进程：<br>(注：需要先启动zookeeper后，后续dubbo demo代码运行才能使用zookeeper注册中心的功能，不可关闭) </p><h3 id="MAVEN项目"><a href="#MAVEN项目" class="headerlink" title="MAVEN项目"></a>MAVEN项目</h3><ul><li>项目结构： </li><li>主要分三大模块： </li><li>dubbo-api : 存放公共接口； </li><li>dubbo-provider : 提供远程服务；</li><li>dubbo-consumer :　调用远程服务； </li><li>dubbo-consumer2 :　调用远程服务；<br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo6.png" alt="目录结构"><br>具体的项目在此不一一叙述，整个项目的代码已经上传到我的github上<a href="https://github.com/wangrui15034005712/dubboTest.git" target="_blank" rel="noopener">https://github.com/wangrui15034005712/dubboTest.git</a> 欢迎下载查看。<br>运行项目，先确保provider已被运行后再启动consumer模块：<br>当然，这只是一个模拟的项目，实际中有多提供者多消费者情况，比这要复杂的多，当然只有这样才能体现dubbo的特性。</li></ul><hr><h2 id="Dubbo管理控制台介绍"><a href="#Dubbo管理控制台介绍" class="headerlink" title="Dubbo管理控制台介绍"></a>Dubbo管理控制台介绍</h2><p><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo7.png" alt=""><br>下载dubbo-admin，可自行根据网上介绍安装。大致做法就是将dubbo-admin中 的某个文件夹内容替换到tomcat的conf中，再运行tomcat即可。但我在实际操作中发现JDK8无法运行，后来找到一个JDK8可以实现的dubbo-admin版本，下载地址：链接: <a href="https://pan.baidu.com/s/1dxu1NctjLowFQylINul3gA" target="_blank" rel="noopener">https://pan.baidu.com/s/1dxu1NctjLowFQylINul3gA</a> 提取码: 5ci8 。<br>把下载的dubbo-admin-2.6.0.war放置tomcat下的webapp中,访问localhost:8080/dubbo-admin-2.6.0即可访问管理控制台，账号密码默认都是root。<br><img src="/blog/2018/10/30/Dubbo入门-搭建一个最简单的Demo框架/dubbo8.png" alt="启动zookeeper-启动tomcat-启动-启动Provider-启动Consumer-访问localhost:8080/dubbo-admin-2.6.0"></p><p>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>参考博客：<a href="https://blog.csdn.net/noaman_wgs/article/details/70214612" target="_blank" rel="noopener">Dubbo入门—搭建一个最简单的Demo框架</a></p>]]></content>
      
      
      <categories>
          
          <category> SOA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
            <tag> Dubbo </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客实现站内搜索</title>
      <link href="/blog/2018/10/29/Hexo%E5%8D%9A%E5%AE%A2%E5%AE%9E%E7%8E%B0%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2/"/>
      <url>/blog/2018/10/29/Hexo%E5%8D%9A%E5%AE%A2%E5%AE%9E%E7%8E%B0%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当博文慢慢变多的时候，标签和分类已经不能提供太大的作用，无法准确的定位到自己想要看的博客上去，所以添加一个本站内搜索功能是很有必要的，以 hexo-theme-shana-master 主题为例。Hexo提供的Local Search,原理是通过hexo-generator-search插件在本地生成一个search.xml文件，搜索的时候从这个文件中根据关键字检索出相应的链接。<br><a id="more"></a><br><img src="/blog/2018/10/29/Hexo博客实现站内搜索/search.png" alt="效果展示"></p><h2 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">利用插件hexo-generator-search生成xml文件</span><br><span class="line">利用jQuery.ajax解析xml</span><br><span class="line">寻找所用主题对应文件修改</span><br></pre></td></tr></table></figure><h2 id="主要步骤"><a href="#主要步骤" class="headerlink" title="主要步骤"></a>主要步骤</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>直接在自己的博客文件夹下（我的是Hexo）点击鼠标右键选择Git Bash Here<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-generator-search --save</span><br><span class="line">cnpm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure></p><h3 id="修改站点配置文件"><a href="#修改站点配置文件" class="headerlink" title="修改站点配置文件"></a>修改站点配置文件</h3><p>博客Hexo下的_config.yml文件，进行编辑。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#搜索</span><br><span class="line">search:</span><br><span class="line">  path: search.xml#生成的路径</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure></p><h3 id="编写站内搜索模块的代码-index-ejs"><a href="#编写站内搜索模块的代码-index-ejs" class="headerlink" title="编写站内搜索模块的代码(index.ejs)"></a>编写站内搜索模块的代码(index.ejs)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;site_search&quot; align=&apos;center&apos; style=&quot;margin:15px 0 0 0;&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; placeholder=&quot;本站搜索&quot; style=&apos;width:180px;height:25px;&apos;/&gt;</span><br><span class="line">  &lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var searchFunc = function(path, search_id, content_id) &#123;&apos;use strict&apos;;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">url : path,</span><br><span class="line">dataType : &quot;xml&quot;,</span><br><span class="line">success : function(xmlResponse) &#123;</span><br><span class="line">// get the contents from search data</span><br><span class="line">var datas = $(&quot;entry&quot;, xmlResponse).map(function() &#123;</span><br><span class="line">return &#123;</span><br><span class="line">title : $(&quot;title&quot;, this).text(),</span><br><span class="line">content : $(&quot;content&quot;, this).text(),</span><br><span class="line">url : $(&quot;url&quot;, this).text()</span><br><span class="line">&#125;;</span><br><span class="line">&#125;).get();</span><br><span class="line">var $input = document.getElementById(search_id);</span><br><span class="line">var $resultContent = document.getElementById(content_id);</span><br><span class="line">$input.addEventListener(&apos;input&apos;,</span><br><span class="line">function() &#123;</span><br><span class="line">var str = &apos;&lt;ul class=\&quot;search-result-list\&quot;&gt;&apos;;</span><br><span class="line">var keywords = this.value.trim().toLowerCase().split(</span><br><span class="line">/[\s\-]+/);</span><br><span class="line">$resultContent.innerHTML = &quot;&quot;;</span><br><span class="line">if (this.value.trim().length &lt;= 0) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">// perform local searching</span><br><span class="line">datas.forEach(function(data) &#123;</span><br><span class="line">var isMatch = true;</span><br><span class="line">var content_index = [];</span><br><span class="line">var data_title = data.title.trim().toLowerCase();</span><br><span class="line">var data_content = data.content.trim().replace(</span><br><span class="line">/&lt;[^&gt;]+&gt;/g, &quot;&quot;).toLowerCase();</span><br><span class="line">var data_url = data.url;</span><br><span class="line">var index_title = -1;</span><br><span class="line">var index_content = -1;</span><br><span class="line">var first_occur = -1;</span><br><span class="line">// only match artiles with not empty titles and contents</span><br><span class="line">if (data_title != &apos;&apos; &amp;&amp; data_content != &apos;&apos;) &#123;</span><br><span class="line">keywords.forEach(function(keyword, i) &#123;</span><br><span class="line">index_title = data_title.indexOf(keyword);</span><br><span class="line">index_content = data_content.indexOf(keyword);</span><br><span class="line">if (index_title &lt; 0 &amp;&amp; index_content &lt; 0) &#123;</span><br><span class="line">isMatch = false;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">if (index_content &lt; 0) &#123;</span><br><span class="line">index_content = 0;</span><br><span class="line">&#125;</span><br><span class="line">if (i == 0) &#123;</span><br><span class="line">first_occur = index_content;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">// show search results</span><br><span class="line">if (isMatch) &#123;</span><br><span class="line">str += &quot;&lt;li&gt;&lt;a href=&apos;&quot; + data_url + &quot;&apos; class=&apos;search-result-title&apos;&gt;&quot; + data_title + &quot;&lt;/a&gt;&quot;;</span><br><span class="line">var content = data.content.trim().replace(</span><br><span class="line">/&lt;[^&gt;]+&gt;/g, &quot;&quot;);</span><br><span class="line">if (first_occur &gt;= 0) &#123;</span><br><span class="line">// cut out 100 characters</span><br><span class="line">var start = first_occur - 20;</span><br><span class="line">var end = first_occur + 80;</span><br><span class="line">if (start &lt; 0) &#123;</span><br><span class="line">start = 0;</span><br><span class="line">&#125;</span><br><span class="line">if (start == 0) &#123;</span><br><span class="line">end = 100;</span><br><span class="line">&#125;</span><br><span class="line">if (end &gt; content.length) &#123;</span><br><span class="line">end = content.length;</span><br><span class="line">&#125;</span><br><span class="line">var match_content = content.substr(start,</span><br><span class="line">end);</span><br><span class="line">// highlight all keywords</span><br><span class="line">keywords.forEach(function(keyword) &#123;</span><br><span class="line">var regS = new RegExp(keyword, &quot;gi&quot;);</span><br><span class="line">match_content = match_content.replace(</span><br><span class="line">regS,</span><br><span class="line">&quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;</span><br><span class="line">+ keyword + &quot;&lt;/em&gt;&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">str += &quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot;</span><br><span class="line">+ match_content + &quot;...&lt;/p&gt;&quot;</span><br><span class="line">&#125;</span><br><span class="line">str += &quot;&lt;/li&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">str += &quot;&lt;/ul&gt;&quot;;</span><br><span class="line">$resultContent.innerHTML = str;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var search_path = &quot;&lt;%= config.search.searchpath %&gt;&quot;;</span><br><span class="line">if (search_path.length == 0) &#123;</span><br><span class="line">search_path = &quot;search.xml&quot;;</span><br><span class="line">&#125;</span><br><span class="line">var path = &quot;/&quot; + search_path;</span><br><span class="line">searchFunc(path, &apos;local-search-input&apos;, &apos;local-search-result&apos;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>大功告成！<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>推荐博客：<a href="http://lastsummer.top/blog/2018/10/29/Hexo博客实现站内搜索/">Hexo博客添加文章目录</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客添加文章目录</title>
      <link href="/blog/2018/10/29/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95/"/>
      <url>/blog/2018/10/29/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>Hexo博客添加嵌入边栏的文章目录，以 hexo-theme-shana-master 主题为例。<br><a id="more"></a><br><img src="/blog/2018/10/29/Hexo博客添加文章目录/catalog1.png" alt="效果展示"></p><h3 id="第一步：编写文章目录模块的代码"><a href="#第一步：编写文章目录模块的代码" class="headerlink" title="第一步：编写文章目录模块的代码"></a>第一步：编写文章目录模块的代码</h3><p><code>themes\hexo-theme-shana-master\layout\_partial</code> 下新建 <code>toc.ejs</code> 输入如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 目录内容 --&gt;</span><br><span class="line">&lt;p class=<span class="string">"show-toc-btn"</span> id=<span class="string">"show-toc-btn"</span> onclick=<span class="string">"showToc();"</span> style=<span class="string">"display:none"</span>&gt;</span><br><span class="line">  &lt;span class=<span class="string">"btn-bg"</span>&gt;&lt;/span&gt;</span><br><span class="line">  &lt;span class=<span class="string">"btn-text"</span>&gt;文章导航&lt;/span&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;div id=<span class="string">"toc-article"</span> class=<span class="string">"toc-article"</span> &gt;</span><br><span class="line">  &lt;span id=<span class="string">"toc-close"</span> class=<span class="string">"toc-close"</span> title=<span class="string">"隐藏导航"</span> onclick=<span class="string">"showBtn();"</span>&gt;×&lt;/span&gt;</span><br><span class="line">  &lt;strong class=<span class="string">"toc-title"</span>&gt;文章目录&lt;/strong&gt;</span><br><span class="line">  &lt;%- toc(post.content) %&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">showToc</span></span>()&#123;</span><br><span class="line">   var toc_article = document.getElementById(<span class="string">"toc-article"</span>);</span><br><span class="line">   var show_toc_btn = document.getElementById(<span class="string">"show-toc-btn"</span>);</span><br><span class="line">   toc_article.setAttribute(<span class="string">"style"</span>,<span class="string">"display:block"</span>);</span><br><span class="line">   show_toc_btn.setAttribute(<span class="string">"style"</span>,<span class="string">"display:none"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">showBtn</span></span>()&#123;</span><br><span class="line">   var toc_article = document.getElementById(<span class="string">"toc-article"</span>);</span><br><span class="line">   var show_toc_btn = document.getElementById(<span class="string">"show-toc-btn"</span>);</span><br><span class="line">   toc_article.setAttribute(<span class="string">"style"</span>,<span class="string">"display:none"</span>);</span><br><span class="line">   show_toc_btn.setAttribute(<span class="string">"style"</span>,<span class="string">"display:block"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 目录内容结束 --&gt;</span><br></pre></td></tr></table></figure></p><h3 id="第二步：编写文章目录模块的样式"><a href="#第二步：编写文章目录模块的样式" class="headerlink" title="第二步：编写文章目录模块的样式"></a>第二步：编写文章目录模块的样式</h3><p><code>themes\hexo-theme-shana-master\source\css\_partial</code> 下新建 <code>toc.styl</code> 输入如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">#container .show-toc-btn,#container .toc-article&#123;display:block&#125;</span></span><br><span class="line">.toc-article&#123;z-index:100;background:<span class="comment">#fff;border:1px solid #ccc;max-width:250px;min-width:150px;max-height:500px;overflow-y:auto;-webkit-box-shadow:5px 5px 2px #ccc;box-shadow:5px 5px 2px #ccc;font-size:12px;padding:10px;position:fixed;right:35px;top:129px&#125;</span></span><br><span class="line">.toc-article .toc-close&#123;font-weight:700;font-size:20px;cursor:pointer;<span class="built_in">float</span>:right;color:<span class="comment">#ccc&#125;</span></span><br><span class="line">.toc-article .toc-close:hover&#123;color:<span class="comment">#000&#125;</span></span><br><span class="line">.toc-article .toc&#123;font-size:12px;padding:0;line-height:20px&#125;</span><br><span class="line">.toc-article .toc .toc-number&#123;color:<span class="comment">#333&#125;</span></span><br><span class="line">.toc-article .toc .toc-text:hover&#123;text-decoration:underline;color:<span class="comment">#2a6496&#125;</span></span><br><span class="line">.toc-article li&#123;list-style-type:none&#125;</span><br><span class="line">.toc-article .toc-level-1&#123;margin:4px 0&#125;</span><br><span class="line">.toc-article .toc-child&#123;&#125;</span><br><span class="line">@-moz-keyframes <span class="built_in">cd</span>-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;</span><br><span class="line">@-webkit-keyframes <span class="built_in">cd</span>-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;</span><br><span class="line">@-o-keyframes <span class="built_in">cd</span>-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;</span><br><span class="line">@keyframes <span class="built_in">cd</span>-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;</span><br><span class="line">.show-toc-btn&#123;display:none;z-index:10;width:30px;min-height:14px;overflow:hidden;padding:4px 6px 8px 5px;border:1px solid <span class="comment">#ddd;border-right:none;position:fixed;right:40px;text-align:center;background-color:#f9f9f9&#125;</span></span><br><span class="line">.show-toc-btn .btn-bg&#123;margin-top:2px;display:block;width:16px;height:14px;background:url(http://7xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;-webkit-background-size:100%;-moz-background-size:100%;background-size:100%&#125;</span><br><span class="line">.show-toc-btn .btn-text&#123;color:<span class="comment">#999;font-size:12px&#125;</span></span><br><span class="line">.show-toc-btn:hover&#123;cursor:pointer&#125;</span><br><span class="line">.show-toc-btn:hover .btn-bg&#123;background-position:0 -16px&#125;</span><br><span class="line">.show-toc-btn:hover .btn-text&#123;font-size:12px;color:<span class="comment">#ea8010&#125;</span></span><br><span class="line">.toc-article li ol, .toc-article li ul &#123;margin-left: 30px;&#125;</span><br><span class="line">.toc-article ol, .toc-article ul &#123;margin: 10px 0;&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p><p>最后，记得在 <code>toc.styl</code> 中添加 @import <code>_partial/toc</code> </p><h3 id="第三步：将文章目录模块整合到文章中"><a href="#第三步：将文章目录模块整合到文章中" class="headerlink" title="第三步：将文章目录模块整合到文章中"></a>第三步：将文章目录模块整合到文章中</h3><p>在 <code>themes\hexo-theme-shana-master\layout\_partial\article.ejs</code> 中的 <code>&lt;article&gt; &lt;/article&gt;</code> 标签内添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class="line">    &lt;%- partial(&apos;toc&apos;) %&gt;</span><br><span class="line">&lt;%- post.content %&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p><p>若想要文章显示目录，在每篇文章开头加入：<code>toc: true</code></p><p>大功告成！<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>推荐博客：<a href="http://lastsummer.top/blog/2018/10/29/Hexo博客添加文章目录/">Hexo博客添加文章目录</a><br>参考博客：<a href="https://blog.csdn.net/u013082989/article/details/70212008" target="_blank" rel="noopener">Hexo+yilia主题实现文章目录和添加视频</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客用Leancloud统计文章阅读量</title>
      <link href="/blog/2018/10/26/Hexo%E5%8D%9A%E5%AE%A2%E7%94%A8Leancloud%E7%BB%9F%E8%AE%A1%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F/"/>
      <url>/blog/2018/10/26/Hexo%E5%8D%9A%E5%AE%A2%E7%94%A8Leancloud%E7%BB%9F%E8%AE%A1%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>Hexo博客用Leancloud统计文章阅读量，以 hexo-theme-shana-master 主题为例。<br><a id="more"></a></p><h3 id="第一步：注册LeanCloud账号-GitHub"><a href="#第一步：注册LeanCloud账号-GitHub" class="headerlink" title="第一步：注册LeanCloud账号(GitHub)"></a>第一步：注册<a href="https://leancloud.cn/dashboard/login.html#/signin" target="_blank" rel="noopener">LeanCloud</a>账号(GitHub)</h3><h3 id="第二步：LeanCloud应用配置"><a href="#第二步：LeanCloud应用配置" class="headerlink" title="第二步：LeanCloud应用配置"></a>第二步：LeanCloud应用配置</h3><p><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud1.png" alt="创建应用"><br><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud2.png" alt="新应用名称-开发版-创建"><br><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud3.png" alt="点击存储"><br><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud4.png" alt="存储-创建Class-Class名称-无限制-创建Class（等待2分钟初始化）"><br><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud5.png" alt="设置-得到App ID及App Key"></p><h3 id="第三步：Hexo主题配置"><a href="#第三步：Hexo主题配置" class="headerlink" title="第三步：Hexo主题配置"></a>第三步：Hexo主题配置</h3><p>打开博客根目录/themes/next/下的_config.yml，查找leancloud，填写复制来的App ID和App Key，重新生成、步署博客即可正常统计文章阅读量。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># leadcloud访问次数统计</span></span><br><span class="line">leancloud_visitors:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  app_id: Your AppId</span><br><span class="line">  app_key: Your AppKey</span><br></pre></td></tr></table></figure></p><h3 id="第四步：域名附赠说明"><a href="#第四步：域名附赠说明" class="headerlink" title="第四步：域名附赠说明"></a>第四步：域名附赠说明</h3><p>因为AppID以及AppKey是暴露在外的，为了确保只用于我们自己的博客，建议设置Web安全域名，填入自己的博客域名。<br><img src="/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量/leancloud6.png" alt="设置-安全中心-Web安全域名-保存"><br>1.记录文章访问量的唯一标识符是文章的发布日期和文章的标题，因此请确保这两个数值组合的唯一性，如果更改了这两个数值，会造成文章阅读数值的清零重计。</p><p>2.初始的文章统计量显示为0。在配置好阅读量统计服务之后，第一次打开博文时，会自动向服务器发送数据，该数据会被记录在对应的应用的Counter表中。</p><p>3.修改Counter表中的time字段的数值，可以修改文章的访问量。双击具体的数值，修改之后回车即可保存。</p><p>大功告成！<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>推荐博客：<a href="http://lastsummer.top/blog/2018/10/26/Hexo博客用Leancloud统计文章阅读量">NexT主题用Leancloud统计文章阅读量</a><br>参考博客：<a href="https://blog.csdn.net/weixin_39345384/article/details/80787998" target="_blank" rel="noopener">NexT主题下，用Leancloud统计文章阅读量</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leancloud </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客添加打赏功能</title>
      <link href="/blog/2018/10/25/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E6%89%93%E8%B5%8F%E5%8A%9F%E8%83%BD/"/>
      <url>/blog/2018/10/25/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E6%89%93%E8%B5%8F%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>基本思路是将微信和支付宝的收款二维码放到每篇文章的最后，打赏的时候扫下二维码就可以了。<br><a id="more"></a><br>以 hexo-theme-shana-master 主题为例：</p><h3 id="第一步：编写打赏模块的代码"><a href="#第一步：编写打赏模块的代码" class="headerlink" title="第一步：编写打赏模块的代码"></a>第一步：编写打赏模块的代码</h3><p><code>themes\hexo-theme-shana-master\layout\_partial</code> 下新建 <code>donate.ejs</code> 输入如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;! -- 添加捐赠图标 --&gt;</span><br><span class="line">&lt;div align=<span class="string">'center'</span> style=<span class="string">'margin-top:80px;'</span>&gt;</span><br><span class="line">&lt;div id=<span class="string">'donate_board'</span> class=<span class="string">"donate_bar"</span>&gt;</span><br><span class="line">&lt;a id=<span class="string">"btn_donate"</span> class=<span class="string">"btn_donate"</span> href=<span class="string">"javascript:;"</span> title=<span class="string">"打赏"</span>&gt;&lt;/a&gt;</span><br><span class="line">&lt;span class=<span class="string">"donate_txt"</span>&gt;</span><br><span class="line">   &amp;uarr;&lt;br&gt;</span><br><span class="line">   &lt;%=theme.donate_message%&gt;</span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">"donate_guide"</span> class=<span class="string">"donate_bar hidden"</span> &gt;</span><br><span class="line">&lt;!-- 支付宝打赏图案 --&gt;</span><br><span class="line">&lt;img src=<span class="string">"/photos/donate/zhifubao.jpg"</span> alt=<span class="string">"支付宝打赏"</span>&gt; </span><br><span class="line">&lt;!-- 微信打赏图案 --&gt;</span><br><span class="line">&lt;img src=<span class="string">"/photos/donate/weixin.png"</span> alt=<span class="string">"微信打赏"</span>&gt;  </span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">document.getElementById(<span class="string">'btn_donate'</span>).onclick = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">$(<span class="string">'#donate_board'</span>).addClass(<span class="string">'hidden'</span>);</span><br><span class="line">$(<span class="string">'#donate_guide'</span>).removeClass(<span class="string">'hidden'</span>);</span><br><span class="line">&#125;</span><br><span class="line">document.getElementById(<span class="string">'donate_guide'</span>).onclick = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">$(<span class="string">'#donate_guide'</span>).addClass(<span class="string">'hidden'</span>);</span><br><span class="line">$(<span class="string">'#donate_board'</span>).removeClass(<span class="string">'hidden'</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&lt;! -- 添加捐赠图标 --&gt;</span><br></pre></td></tr></table></figure></p><h3 id="第二步：-编写打赏模块的样式"><a href="#第二步：-编写打赏模块的样式" class="headerlink" title="第二步： 编写打赏模块的样式"></a>第二步： 编写打赏模块的样式</h3><p><code>themes\hexo-theme-shana-master\source\css\_partial</code> 下新建 <code>donate.styl</code> 输入如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">.donate_bar &#123;</span><br><span class="line">text-align: center;</span><br><span class="line">margin-top: 5%</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.donate_bar a.btn_donate &#123;</span><br><span class="line">display: inline-block;</span><br><span class="line">width: 82px;</span><br><span class="line">height: 82px;</span><br><span class="line">margin-left: auto;</span><br><span class="line">margin-right: auto;</span><br><span class="line">background: url(http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif)no-repeat;</span><br><span class="line">-webkit-transition: background 0s;</span><br><span class="line">-moz-transition: background 0s;</span><br><span class="line">-o-transition: background 0s;</span><br><span class="line">-ms-transition: background 0s;</span><br><span class="line">transition: background 0s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.donate_bar a.btn_donate:hover &#123;</span><br><span class="line">background-position: 0 -82px</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.donate_bar .donate_txt &#123;</span><br><span class="line">display: block;</span><br><span class="line">color: <span class="comment">#9d9d9d;</span></span><br><span class="line">font: 14px/2 <span class="string">"Microsoft Yahei"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.donate_bar.hidden&#123;</span><br><span class="line">display: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post-donate&#123;</span><br><span class="line">margin-top: 80px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#donate_guide&#123;</span></span><br><span class="line">height: 210px;</span><br><span class="line">width: 420px;</span><br><span class="line">margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#donate_guide img&#123;</span></span><br><span class="line">height: 200px;</span><br><span class="line">height: 200px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>最后，记得在 <code>style.styl</code> 中添加 @import <code>_partial/donate</code> </p><h3 id="第三步：-讲打赏模块整合到文章中"><a href="#第三步：-讲打赏模块整合到文章中" class="headerlink" title="第三步： 讲打赏模块整合到文章中"></a>第三步： 讲打赏模块整合到文章中</h3><p>在 <code>themes\hexo-theme-shana-master\layout\_partial\article.ejs</code> 中的 <code>&lt;article&gt; &lt;/article&gt;</code> 标签内添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; theme.donate &amp;&amp; post.donate)&#123; %&gt;</span><br><span class="line">&lt;%- partial(&apos;donate/donate&apos;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p><h3 id="第四步：-编写配置文件"><a href="#第四步：-编写配置文件" class="headerlink" title="第四步： 编写配置文件"></a>第四步： 编写配置文件</h3><p>我们在<code>\themes\hexo-theme-shana-master\_config.yml</code>主题文件中关闭和打开打赏功能，还可以自定义设置打赏文案。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#是否开启打赏功能</span><br><span class="line">donate: true</span><br><span class="line">#打赏文案</span><br><span class="line">donate_message: 欣赏此文？求鼓励，求支持！</span><br></pre></td></tr></table></figure></p><p>如果我们要针对某一篇文章关闭打赏功能的话，只需要在该篇文章上添加 donate: false 代码即可。</p><p>大功告成！<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>推荐博客：<a href="http://lastsummer.top/blog/2018/10/25/Hexo博客添加打赏功能/">Hexo博客添加打赏功能</a><br>参考博客：<a href="http://cighao.com/2016/02/23/add-donate-to-hexo/" target="_blank" rel="noopener">Hexo 博客添加打赏功能</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo博客添加图片音乐及视频</title>
      <link href="/blog/2018/10/23/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87%E9%9F%B3%E4%B9%90%E5%8F%8A%E8%A7%86%E9%A2%91/"/>
      <url>/blog/2018/10/23/Hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87%E9%9F%B3%E4%B9%90%E5%8F%8A%E8%A7%86%E9%A2%91/</url>
      
        <content type="html"><![CDATA[<p>Hexo博客添加图片音乐及视频。<br><a id="more"></a></p><h5 id="插入外部链接图片"><a href="#插入外部链接图片" class="headerlink" title="插入外部链接图片"></a>插入外部链接图片</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![“图片描述”](“图片地址”)</span><br></pre></td></tr></table></figure><h5 id="添加本地图片"><a href="#添加本地图片" class="headerlink" title="添加本地图片"></a>添加本地图片</h5><p>在\hexo\source目录下新建文件夹，命名为images或者其他你喜欢的名字，然后编辑你的md博文，插入下面的代码样式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![“图片描述”](/images/你的图片名字.JPG)</span><br></pre></td></tr></table></figure></p><h5 id="插入音乐"><a href="#插入音乐" class="headerlink" title="插入音乐"></a>插入音乐</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe frameborder=<span class="string">"no"</span> border=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> width=660 height=86 src=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=1306515028&amp;auto=0&amp;height=66"</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="660" height="86" src="//music.163.com/outchain/player?type=2&id=1306515028&auto=0&height=66"></iframe></p><h5 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe height=498 width=660 src=<span class="string">'//player.youku.com/embed/XMzgyNTI5NTY1Mg=='</span> frameborder=0 <span class="string">'allowfullscreen'</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><p><iframe height="498" width="660" src="//player.youku.com/embed/XMzgyNTI5NTY1Mg==" frameborder="0" 'allowfullscreen'=""></iframe><br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>相关链接: <a href="https://lastsummer.top/blog/生活">去年夏天</a><br>参考博客：<a href="https://blog.csdn.net/qq_26891045/article/details/51693571" target="_blank" rel="noopener">hexo博客添加图片，音乐，视频</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo-Github搭建个人博客二</title>
      <link href="/blog/2018/10/19/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E4%BA%8C/"/>
      <url>/blog/2018/10/19/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍了域名解析绑定及SSH部署博客到Github。<br><a id="more"></a></p><h2 id="Github绑定域名相关步骤"><a href="#Github绑定域名相关步骤" class="headerlink" title="Github绑定域名相关步骤"></a>Github绑定域名相关步骤</h2><h3 id="Github注册"><a href="#Github注册" class="headerlink" title="Github注册"></a>Github注册</h3><p>访问Github官方地址 <a href="https://github.com/" target="_blank" rel="noopener">Github</a><br>输入用户名、电子邮箱、密码,然后点击注册按钮.–&gt;之后验证邮箱（进入自己邮箱进行验证）<br>在github上面创建项目(借用github服务器)静态网站<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github1.png" alt="注册"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github2.png" alt=""><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github5.png" alt="创建仓库"><br>在git命令框中安装git插件(cnpm install hexo-deployer-git –save)<br>打开Hexo安装目录，编辑_config.yml文件<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github4.png" alt=""><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:wangrui15034005712/wangrui15034005712.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p><h3 id="Git使用ssh密钥"><a href="#Git使用ssh密钥" class="headerlink" title="Git使用ssh密钥"></a>Git使用ssh密钥</h3><p>git支持https和git两种传输协议，github分享链接时会有两种协议可选：<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ssh00.png" alt="https图例"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ssh.png" alt="ssh图例"><br>我们要想生成SSH key，首先就得先安装 SSH，对于 Linux 和 Mac 系统，其默认是安装 SSH 的，而对于 Windows 系统，其默认是不安装 SSH 的，不过由于我们安装了 Git Bash，其也应该自带了 SSH. 可以通过在 Git Bash 中输入ssh命令，查看本机是否安装 SSH：<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ssh0.png" alt="查看是否安装ssh"><br>初次使用git的用户要使用git协议大概需要三个步骤：<br>一、生成密钥对<br>二、设置远程仓库（本文以github为例）上的公钥<br>三、把git的 remote url 修改为git协议（以上两个步骤初次设置过以后，以后使用都不需要再次设置，此步骤视以后项目的remote url而定，如果以后其他项目的协议为https则需要此步骤）<br>打开Hexo安装目录，右键git bash here点击<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ssh1.png" alt="输入cd ~/.ssh回车-看你是否有了ssh key 密钥，有了就备份"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ssh2.png" alt="生成密钥"><br>打开你的id_rsa.pub文件，复制下里面的内容，然后登录进去你的github；<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github6.png" alt="点击settings"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github7.png" alt="点击SSH and GPG keys-New SSH key"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github8.png" alt="把之前复制的公钥输入key-And SSH key"><br>至此，Github步骤结束。</p><h3 id="域名购买解析"><a href="#域名购买解析" class="headerlink" title="域名购买解析"></a>域名购买解析</h3><p>国内可以去几个大型的域名商去购买即可，直接搜域名购买，搜索引擎前几的都可以(万网、百度云、腾讯云、新网、西部数码、阿里云)，如果国外的可以去godday、name等站点去购买<br>访问阿里云官方地址 <a href="https://wanwang.aliyun.com/" target="_blank" rel="noopener">阿里云</a><br>输入会员名、手机号、密码,然后点击注册按钮.–&gt;之后验证手机(可通过淘宝或者支付宝进行登陆)<br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun1.png" alt="登录成功后-点击产品-企业应用-域名注册"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun2.png" alt="输入自己喜欢的域名点击查询-加入清单-立即结算"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun3.png" alt="选择年限-其他服务不需要勾选-域名持有者按需配置-点击创建信息模板"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun6.png" alt="点击立即购买"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun7.png" alt="进入域名控制台-点击解析"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun8.png" alt="点击新手引导"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/ping1.png" alt="打开dos-ping 用户名.github.io-得到Github服务器IP"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/aliyun9.png" alt="点击确定"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github9.png" alt="登陆github-点击username.github.io-找到settings"><br><img src="/blog/2018/10/19/Hexo-Github搭建个人博客二/github10.png" alt="找到GitHub Pages-Custom domain-把自己的域名绑定并保存"><br>至此，域名解析步骤结束，我们可以通过自己的域名进行访问了。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo-Github搭建个人博客</title>
      <link href="/blog/2018/10/15/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/blog/2018/10/15/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>首先呢，先说一下吧，这是本人第一次写博客，也是在大学生时代的一个想法，现在终于实现了。<br>花了几天的时间，研究了一下，颇有收获，而我在找资料的过程中，都是这个博客找点那个博客找点，都没有一个博客的教程是很详细且到位的，哎，醉了，感谢你们一直看到这里听我在这里碎碎念，最后啰嗦一句，有什么问题，及时下方评论(不是私信)，因为我几乎每天登陆博客，所以看到后会及时回复大家的。<br><a id="more"></a><br>环境配置：<br>    电脑系统为window 10专业版，64位，Nodejs, Github, Hexo, livere, Leancloud, ShareSDK, Dalao。</p><h2 id="相关步骤"><a href="#相关步骤" class="headerlink" title="相关步骤"></a>相关步骤</h2><h3 id="安装Node-js和配置好Node-js环境-我的版本10-11-0"><a href="#安装Node-js和配置好Node-js环境-我的版本10-11-0" class="headerlink" title="安装Node.js和配置好Node.js环境,我的版本10.11.0"></a>安装Node.js和配置好Node.js环境,我的版本10.11.0</h3><p>1、访问官方地址 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a> 根据自己的系统进行下载。<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs1.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs2.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs3.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs4.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs5.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs6.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs7.png" alt=""><br>2、检测是否安装成功：点击开始-运行-cmd（win+R），打开dos，输入“node –version”检查Nodejs版本；输入“npm –version”检查npm版本：<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs8.png" alt=""><br>3、这里我们要分两步，第一步修改NPM的缓存目录和全局目录路径，将对应的模块目录改到D盘nodejs的安装目录，第二步是配置npm和nodejs的环境变量，这样nodejs才能正确地调用对应的模块。<br>我们先来做第一步，在nodejs目录下创建两个目录，分别是node_cache和node_global，这是用来放安装过程的缓存文件以及最终的模块配置位置。配置完成后，执行下面这两个命令：<br>npm config set prefix “D:\Program Files (x86)\nodejs\node_global”<br>npm config set cache “D:\Program Files (x86)\nodejs\node_cache”<br>将npm的全局模块目录和缓存目录配置到我们刚才创建的那两个目录：<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs9.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs10.png" alt=""><br>然后我们来配置npm的环境变量和nodejs的环境变量。在计算机图标上点右键，选属性，然后点击高级系统配置，弹出来的新窗口右下角有个环境路径，点击去，就能看到环境路径的配置界面，我们点击新建。然后在弹出来的窗口里，变量名填：NODE_PATH<br>变量值填：D:\Program Files (x86)\nodejs\node_global\node_modules<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs11.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs12.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs13.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/nodejs14.png" alt=""><br>由于npm的镜像是国外的，为了加快下载速度，可以通过国内淘宝镜像来下载，所以采用cnpm，当然也可以不采用cnpm，直接把镜像指向淘宝镜像，接下来我说下这两种方式：<br>(1)直接指定registry为淘宝镜像：npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a><br>(2)安装cnpm：npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a>    输入上述命令即可安装，另外要注意的是，安装完后，输入cnpm -v进行检测。<br>至此，node.js安装步骤完毕。</p><h3 id="安装Git-我的版本2-14-2"><a href="#安装Git-我的版本2-14-2" class="headerlink" title="安装Git,我的版本2.14.2"></a>安装Git,我的版本2.14.2</h3><p>1、访问官方地址 <a href="https://git-scm.com/download/win" target="_blank" rel="noopener">https://git-scm.com/download/win</a> windows64版本<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git1.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git2.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git3.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git4.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git5.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git6.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git7.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/git8.png" alt=""><br>检测是否安装成功：点击开始-运行-cmd（win+R），打开dos，输入“git –version”检查git版本；<br>你需要运行命令来配置你的用户名和邮箱：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"wangrui"</span></span><br><span class="line">git config --global user.email <span class="string">"150340057121990@163.com"</span></span><br></pre></td></tr></table></figure></p><p>注意：（引号内请输入你自己设置的名字，和你自己的邮箱）此用户名和邮箱是git提交代码时用来显示你身份和联系方式的，并不是github用户名和邮箱<br>至此，安装git步骤结束。</p><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>首先在本地磁盘中建立一个Hexo文件夹用于存储本地文件(做本地文件保存以及测试使用)<br>在Hexo文件夹中右键，单击Git Bash Here，git终端开启。<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/hexo1.png" alt=""><br>由于已经使用了淘宝镜像cnpm，直接使用即可<br>在git命令框中安装Hexo(cnpm install -g hexo)<br>在git命令框中git+hexo模块(cnpm install hexo-server –save)<br>hexo基本命令<br>hexo服务启动    hexo server        简写    hexo s<br>hexo删除文件    hexo clean        简写    hexo clean<br>hexo生成文件    hexo generate    简写    hexo g<br>hexo部署文件    hexo deploy        简写    hexo d<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/hexo2.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/hexo3.png" alt=""><br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/hexo4.png" alt=""><br>浏览器输入<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 按理来说应该会出现本地访问页面<br>注意：访问本地页面的时候hexo server 不可以按ctrl+c停止服务，否则会报404<br>本地测试:<br><img src="/blog/2018/10/15/Hexo-Github搭建个人博客/hexo5.png" alt=""><br>至此，安装hexo步骤结束,博客基本搭建完成！<br>随后我会陆续更新自己的博客，评论，打赏，分类，标签，分享，域名绑定，照片墙等等陆续上线！<br>个人博客：<a href="https://lastsummer.top">去年夏天</a><br>推荐博客：<a href="https://lastsummer.top/blog/2018/10/19/Hexo-Github域名绑定及SSH密钥配置/">Hexo-Github域名绑定及SSH密钥配置</a><br>参考博客：<a href="https://blog.csdn.net/ainuser/article/details/77609180?utm_source=copy" target="_blank" rel="noopener">hexo+github搭建个人博客(超详细教程)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Hexo </tag>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/blog/2018/10/11/hello-world/"/>
      <url>/blog/2018/10/11/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 心情 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
